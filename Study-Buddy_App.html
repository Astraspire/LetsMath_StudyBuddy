<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Precalc Review Master</title>
    <style>
        :root {
            --color-white: rgba(255, 255, 255, 1);
            --color-black: rgba(0, 0, 0, 1);
            --color-cream-50: rgba(252, 252, 249, 1);
            --color-gray-200: rgba(245, 245, 245, 1);
            --color-gray-300: rgba(167, 169, 169, 1);
            --color-slate-500: rgba(98, 108, 113, 1);
            --color-brown-600: rgba(94, 82, 64, 1);
            --color-charcoal-700: rgba(31, 33, 33, 1);
            --color-teal-500: rgba(45, 212, 191, 1);
            --color-teal-600: rgba(34, 197, 176, 1);
            --color-teal-700: rgba(29, 180, 161, 1);
            --color-red-500: rgba(239, 68, 68, 1);
            --color-orange-500: rgba(249, 115, 22, 1);
            --color-blue-400: rgba(96, 165, 250, 1);
            --color-green-500: rgba(74, 222, 128, 1);
            --color-purple-500: rgba(192, 132, 252, 1);
            --color-pink-500: rgba(244, 114, 182, 1);
            --color-cyan-500: rgba(34, 211, 238, 1);
            --color-teal-400: rgba(94, 234, 212, 1);
            --color-yellow-400: rgba(250, 204, 21, 1);
            --color-purple-400: rgba(216, 180, 254, 1);
            --color-blue-500: rgba(59, 130, 246, 1);
            --color-dark-card: rgba(17, 24, 39, 1);
            --color-dark-border: rgba(75, 85, 99, 1);
            --color-dark-surface: rgba(9, 11, 17, 1);

            --color-accent-glow-yellow: 0 0 25px rgba(250, 204, 21, 0.5), 0 0 50px rgba(250, 204, 21, 0.2);
            --color-accent-glow-purple: 0 0 25px rgba(192, 132, 252, 0.5), 0 0 50px rgba(192, 132, 252, 0.2);
            --color-accent-glow-blue: 0 0 25px rgba(59, 130, 246, 0.5), 0 0 50px rgba(59, 130, 246, 0.2);

            --color-bg: var(--color-dark-surface);
            --color-surface: var(--color-dark-card);
            --color-text: rgba(255, 255, 255, 0.95);
            --color-text-secondary: rgba(203, 213, 225, 1);
            --color-primary: var(--color-teal-500);
            --color-primary-hover: var(--color-teal-600);
            --color-primary-active: var(--color-teal-700);
            
            --space-8: 8px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --space-32: 32px;
            --space-40: 40px;
            
            --radius-base: 8px;
            --radius-lg: 12px;
            --radius-full: 9999px;
            
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.5);
            
            --duration-fast: 150ms;
            --duration-normal: 250ms;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            color: var(--color-text);
            background: var(--color-bg);
        }

        body {
            background: linear-gradient(135deg, #080e1a 0%, #10101e 50%, #080e1a 100%);
            min-height: 100vh;
            padding: var(--space-16);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: var(--space-40);
            animation: slideDown 0.6s ease-out;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: var(--space-8);
            background: linear-gradient(135deg, var(--color-yellow-400) 0%, var(--color-purple-400) 50%, var(--color-blue-500) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.02em;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--color-text-secondary);
            margin-bottom: var(--space-24);
        }

        .nav-tabs {
            display: flex;
            gap: var(--space-12);
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: var(--space-32);
            animation: fadeIn 0.6s ease-out 0.2s both;
        }

        .tab-btn {
            padding: var(--space-12) var(--space-24);
            border: 2px solid var(--color-dark-border);
            background: var(--color-dark-surface);
            color: var(--color-text);
            font-size: 1rem;
            font-weight: 600;
            border-radius: var(--radius-full);
            cursor: pointer;
            transition: all var(--duration-normal) ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
        }

        .tab-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .tab-btn:hover {
            border-color: var(--color-primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .tab-btn.active {
            background: var(--color-primary);
            color: var(--color-white);
            border-color: var(--color-primary);
            box-shadow: 0 0 20px rgba(45, 212, 191, 0.5), 0 0 40px rgba(45, 212, 191, 0.2);
        }

        .tab-btn.active::before {
            left: 100%;
        }

        .content-section {
            display: none;
            animation: fadeIn 0.4s ease-out;
        }

        .content-section.active {
            display: block;
        }

        .review-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-24);
            margin-bottom: var(--space-40);
        }

        .concept-card {
            background: var(--color-dark-card);
            border-radius: var(--radius-lg);
            padding: var(--space-24);
            border: 2px solid var(--color-dark-border);
            border-left: 4px solid var(--color-teal-500);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);
            transition: all var(--duration-normal) ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .concept-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(45, 212, 191, 0.1), transparent);
            border-radius: 50%;
            margin: -50px -50px 0 0;
        }

        /* Card color groups by subtopic */
        .concept-card.card-algebra  { border-left-color: var(--color-teal-500); }
        .concept-card.card-explog   { border-left-color: var(--color-blue-400); }
        .concept-card.card-trig     { border-left-color: var(--color-purple-500); }
        .concept-card.card-misc     { border-left-color: var(--color-orange-500); }
        .concept-card.card-calc     { border-left-color: var(--color-green-500); }
        .concept-card.card-precalc-exp { border-left-color: #f59e0b; }  /* amber / gold */
        .concept-card.card-trig-exp    { border-left-color: #e879a0; }  /* rose / pink */

        /* Tier badges */
        .tier-badge { display: inline-block; font-size: 0.65rem; padding: 2px 7px; border-radius: 6px; vertical-align: middle; margin-left: 8px; font-weight: 600; letter-spacing: 0.03em; }
        .tier-badge.tier-1 { background: rgba(234, 179, 8, 0.18); color: #eab308; }
        .tier-badge.tier-2 { background: rgba(59, 130, 246, 0.15); color: #60a5fa; }
        .tier-badge.tier-3 { background: rgba(168, 85, 247, 0.15); color: #a78bfa; }

        .concept-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 30px rgba(45, 212, 191, 0.3), 0 0 15px rgba(45, 212, 191, 0.15);
        }

        .concept-card.card-explog:hover  { box-shadow: 0 8px 30px rgba(59, 130, 246, 0.3), 0 0 15px rgba(59, 130, 246, 0.15); }
        .concept-card.card-trig:hover    { box-shadow: 0 8px 30px rgba(168, 85, 247, 0.3), 0 0 15px rgba(168, 85, 247, 0.15); }
        .concept-card.card-misc:hover    { box-shadow: 0 8px 30px rgba(168, 75, 47, 0.3), 0 0 15px rgba(168, 75, 47, 0.15); }
        .concept-card.card-calc:hover    { box-shadow: 0 8px 30px rgba(34, 197, 94, 0.3), 0 0 15px rgba(34, 197, 94, 0.15); }
        .concept-card.card-precalc-exp:hover { box-shadow: 0 8px 30px rgba(245, 158, 11, 0.3), 0 0 15px rgba(245, 158, 11, 0.15); }
        .concept-card.card-trig-exp:hover    { box-shadow: 0 8px 30px rgba(232, 121, 160, 0.3), 0 0 15px rgba(232, 121, 160, 0.15); }

        .concept-card:not(.expanded) > *:not(h3) {
            display: none;
        }

        .concept-card h3 {
            font-size: 1.3rem;
            margin-bottom: var(--space-12);
            color: var(--color-text);
            position: relative;
            z-index: 1;
            user-select: none;
        }

        .concept-card h3::after {
            content: ' \25B8';
            font-size: 0.85rem;
            color: var(--color-text-secondary);
            display: inline-block;
            margin-left: var(--space-8);
        }

        .concept-card.expanded h3::after {
            content: ' \25BE';
        }

        .concept-card:not(.expanded) h3 {
            margin-bottom: 0;
        }

        /* ===== FOCUS MODE ===== */

        .review-grid.focus-mode {
            display: flex;
            justify-content: center;
        }

        .review-grid.focus-mode .concept-card {
            display: none;
        }

        .review-grid.focus-mode .concept-card.focused {
            display: block;
            max-width: 800px;
            width: 100%;
        }

        .review-grid.focus-mode .concept-card.focused:hover {
            transform: none;
        }

        /* ===== BACK BUTTON ===== */

        .card-back-btn {
            display: none;
            align-items: center;
            gap: var(--space-8);
            padding: var(--space-12) var(--space-20);
            margin-bottom: var(--space-24);
            background: var(--color-dark-card);
            color: var(--color-text-secondary);
            border: 1px solid var(--color-dark-border);
            border-radius: var(--radius-base);
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--duration-fast) ease;
        }

        .card-back-btn:hover {
            color: var(--color-text);
            background: var(--color-dark-border);
            border-color: var(--color-primary);
        }

        .card-back-btn.visible {
            display: inline-flex;
        }

        /* ===== SIDEBAR SECTION LABELS ===== */

        .sidebar-section-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-text-secondary);
            padding: var(--space-8) var(--space-16);
            margin-top: var(--space-16);
            list-style: none;
        }

        .sidebar-section-label:first-child {
            margin-top: 0;
        }

        .sidebar-collapsible {
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .sidebar-collapsible::after {
            content: '\25B8';
            font-size: 0.7rem;
            transition: transform var(--duration-fast) ease;
        }

        .sidebar-collapsible.open::after {
            transform: rotate(90deg);
        }

        .sidebar-group {
            list-style: none;
            display: none;
            padding: 0;
        }

        .sidebar-group.open {
            display: block;
        }

        .concept-card p {
            color: var(--color-text-secondary);
            line-height: 1.6;
            position: relative;
            z-index: 1;
            font-size: 0.95rem;
        }

        .equation-box {
            background: rgba(45, 212, 191, 0.12);
            border: 2px solid rgba(45, 212, 191, 0.4);
            border-radius: var(--radius-base);
            padding: var(--space-12) var(--space-16);
            margin: var(--space-16) 0;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            color: var(--color-teal-400);
            line-height: 1.5;
            box-shadow: 0 0 16px rgba(45, 212, 191, 0.2), inset 0 0 16px rgba(45, 212, 191, 0.08);
        }

        .flashcard-container {
            perspective: 1000px;
            margin-bottom: var(--space-40);
        }

        .flashcard {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: var(--space-32);
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
            cursor: pointer;
            transition: all var(--duration-normal) ease;
            border: 2px solid var(--color-dark-border);
            position: relative;
            overflow: hidden;
        }

        .flashcard::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.3), transparent);
            transition: all 0.5s;
            pointer-events: none;
        }

        .flashcard:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            border-color: var(--color-primary);
        }

        .flashcard.flipped {
            background: linear-gradient(135deg, rgba(33, 128, 141, 0.1), rgba(59, 130, 246, 0.1));
            border-color: var(--color-primary);
        }

        .flashcard-question {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--color-text);
            margin-bottom: var(--space-16);
        }

        .flashcard-answer {
            font-size: 1.1rem;
            color: var(--color-primary);
            line-height: 1.6;
            font-weight: 500;
        }

        .flashcard-label {
            position: absolute;
            top: var(--space-16);
            right: var(--space-16);
            font-size: 0.85rem;
            color: var(--color-teal-400);
            background: rgba(45, 212, 191, 0.15);
            padding: var(--space-4) var(--space-12);
            border-radius: var(--radius-full);
        }

        .controls {
            display: flex;
            gap: var(--space-16);
            justify-content: center;
            margin-bottom: var(--space-32);
            flex-wrap: wrap;
        }

        .btn {
            padding: var(--space-12) var(--space-24);
            border: none;
            border-radius: var(--radius-base);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--duration-normal) ease;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: var(--color-primary);
            color: var(--color-white);
        }

        .btn-primary:hover {
            background: var(--color-primary-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(45, 212, 191, 0.5), 0 0 15px rgba(45, 212, 191, 0.2);
        }

        .btn-secondary {
            background: var(--color-dark-card);
            color: var(--color-text);
            border: 2px solid var(--color-dark-border);
        }

        .btn-secondary:hover {
            background: var(--color-dark-border);
            border-color: var(--color-primary);
            transform: translateY(-2px);
        }

        .btn-small {
            padding: var(--space-8) var(--space-16);
            font-size: 0.9rem;
        }

        .quiz-container {
            max-width: 700px;
            margin: 0 auto;
        }

        .quiz-progress {
            margin-bottom: var(--space-32);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--color-gray-200);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin-bottom: var(--space-12);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-teal-500), var(--color-blue-400));
            transition: width 0.4s ease;
            border-radius: var(--radius-full);
        }

        .progress-text {
            font-size: 0.9rem;
            color: var(--color-text-secondary);
            font-weight: 600;
        }

        .question-card {
            background: var(--color-dark-card);
            border-radius: var(--radius-lg);
            padding: var(--space-32);
            margin-bottom: var(--space-24);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);
            border: 2px solid var(--color-dark-border);
            animation: slideUp 0.4s ease-out;
        }

        .question-number {
            font-size: 0.85rem;
            color: var(--color-primary);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--space-12);
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--color-text);
            margin-bottom: var(--space-24);
            line-height: 1.6;
        }

        .options {
            display: grid;
            gap: var(--space-12);
            margin-bottom: var(--space-24);
        }

        .option {
            padding: var(--space-20) var(--space-24) var(--space-20) 52px;
            border: 2px solid var(--color-dark-border);
            border-radius: var(--radius-base);
            background: var(--color-dark-surface);
            cursor: pointer;
            font-size: 1rem;
            line-height: 1.5;
            transition: all var(--duration-normal) ease;
            position: relative;
            text-align: center;
            min-height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .option:hover {
            border-color: var(--color-primary);
            background: rgba(45, 212, 191, 0.1);
            transform: translateX(4px);
        }

        .option.selected {
            border-color: var(--color-primary);
            background: rgba(45, 212, 191, 0.15);
        }

        .option.correct {
            border-color: var(--color-green-500);
            background: rgba(34, 197, 94, 0.15);
        }

        .option.incorrect {
            border-color: var(--color-red-500);
            background: rgba(239, 68, 68, 0.15);
        }

        .option::before {
            content: '';
            position: absolute;
            left: var(--space-16);
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border: 2px solid currentColor;
            border-radius: 50%;
            background: transparent;
            transition: all var(--duration-normal) ease;
        }

        .option.selected::before,
        .option.correct::before {
            background: currentColor;
            box-shadow: inset 0 0 0 4px var(--color-white);
        }

        .results-container {
            background: linear-gradient(135deg, rgba(45, 212, 191, 0.12), rgba(96, 165, 250, 0.12));
            border-radius: var(--radius-lg);
            padding: var(--space-40);
            text-align: center;
            margin: var(--space-32) 0;
            border: 2px solid var(--color-dark-border);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);
            animation: slideUp 0.4s ease-out;
        }

        .results-score {
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--color-teal-400), var(--color-blue-400));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--space-8);
        }

        .results-label {
            font-size: 1.1rem;
            color: var(--color-text-secondary);
            margin-bottom: var(--space-24);
        }

        .results-detail {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-16);
            margin: var(--space-32) 0;
        }

        .results-stat {
            background: var(--color-dark-surface);
            padding: var(--space-16);
            border-radius: var(--radius-base);
            border: 1px solid var(--color-dark-border);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .results-stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--color-teal-400);
        }

        .results-stat-label {
            font-size: 0.9rem;
            color: var(--color-text-secondary);
            margin-top: var(--space-4);
        }

        .quiz-history-section {
            max-width: 700px;
            margin: var(--space-32) auto 0;
            padding: var(--space-24);
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            border: 1px solid var(--color-dark-border);
        }

        .quiz-history-table {
            width: 100%;
            font-size: 0.9rem;
        }

        .quiz-history-pass {
            color: var(--color-green-500);
            font-weight: 700;
        }

        .quiz-history-ok {
            color: var(--color-yellow-400);
            font-weight: 700;
        }

        .quiz-history-fail {
            color: var(--color-red-500);
            font-weight: 700;
        }

        .quiz-history-actions {
            display: flex;
            gap: var(--space-12);
            margin-top: var(--space-16);
        }

        .animation-visual {
            width: 100%;
            height: 200px;
            background: rgba(45, 212, 191, 0.05);
            border-radius: var(--radius-lg);
            border: 1px solid var(--color-dark-border);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: var(--space-16) 0;
            position: relative;
            overflow: hidden;
        }

        .wave {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .dot {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--color-primary);
            border-radius: 50%;
            animation: bounce 1.5s ease-in-out infinite;
        }

        .dot:nth-child(1) { left: 10%; animation-delay: 0s; }
        .dot:nth-child(2) { left: 30%; animation-delay: 0.2s; }
        .dot:nth-child(3) { left: 50%; animation-delay: 0.4s; }
        .dot:nth-child(4) { left: 70%; animation-delay: 0.6s; }
        .dot:nth-child(5) { left: 90%; animation-delay: 0.8s; }

        @keyframes bounce {
            0%, 100% { top: 50%; opacity: 1; }
            50% { top: 20%; opacity: 0.7; }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .info-badge {
            display: inline-block;
            background: rgba(45, 212, 191, 0.15);
            border: 2px solid rgba(45, 212, 191, 0.4);
            border-left: 3px solid var(--color-primary);
            padding: var(--space-12) var(--space-16);
            border-radius: var(--radius-base);
            margin: var(--space-12) 0;
            font-size: 0.95rem;
            color: var(--color-text);
            line-height: 1.5;
        }

        .table-responsive {
            overflow-x: auto;
            margin: var(--space-16) 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--color-dark-surface);
            border-radius: var(--radius-base);
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--color-dark-border);
        }

        th {
            background: var(--color-dark-card);
            padding: var(--space-12) var(--space-16);
            text-align: left;
            font-weight: 700;
            color: var(--color-teal-400);
            border-bottom: 2px solid var(--color-dark-border);
        }

        td {
            padding: var(--space-12) var(--space-16);
            border-bottom: 1px solid var(--color-dark-border);
            color: var(--color-text);
        }

        tr:hover {
            background: rgba(45, 212, 191, 0.05);
        }

        .center-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: var(--space-20);
        }

        /* ===== SIDEBAR ===== */

        .sidebar-toggle {
            position: fixed;
            top: var(--space-16);
            left: var(--space-16);
            z-index: 1001;
            background: var(--color-dark-card);
            color: var(--color-text);
            border: 1px solid var(--color-dark-border);
            border-radius: var(--radius-base);
            width: 44px;
            height: 44px;
            font-size: 1.4rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--duration-normal) ease;
        }

        .sidebar-toggle:hover {
            background: var(--color-primary);
            border-color: var(--color-primary);
            box-shadow: 0 0 15px rgba(45, 212, 191, 0.4);
        }

        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: opacity var(--duration-normal) ease, visibility var(--duration-normal) ease;
        }

        .sidebar-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: -280px;
            width: 280px;
            height: 100vh;
            background: var(--color-dark-card);
            border-right: 2px solid var(--color-dark-border);
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.6);
            z-index: 1000;
            overflow-y: auto;
            transition: left var(--duration-normal) ease;
            padding: 72px var(--space-24) var(--space-24);
        }

        .sidebar.open {
            left: 0;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-32);
            padding-bottom: var(--space-16);
            border-bottom: 1px solid var(--color-dark-border);
        }

        .sidebar-header h2 {
            font-size: 1.2rem;
            color: var(--color-text);
            background: linear-gradient(135deg, var(--color-yellow-400), var(--color-purple-400));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .sidebar-close {
            background: none;
            border: none;
            color: var(--color-text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: var(--space-8);
            line-height: 1;
            transition: color var(--duration-fast) ease;
        }

        .sidebar-close:hover {
            color: var(--color-text);
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: var(--space-8);
        }

        .sidebar-link {
            display: block;
            padding: var(--space-12) var(--space-16);
            color: var(--color-text-secondary);
            text-decoration: none;
            border-radius: var(--radius-base);
            font-size: 0.95rem;
            font-weight: 500;
            transition: all var(--duration-fast) ease;
        }

        .sidebar-link:hover {
            color: var(--color-text);
            background: var(--color-dark-surface);
            padding-left: var(--space-20);
        }

        .sidebar-link.active {
            color: var(--color-teal-400);
            background: rgba(45, 212, 191, 0.1);
            border-left: 3px solid var(--color-teal-400);
        }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .review-grid { grid-template-columns: 1fr; }
            .nav-tabs { gap: var(--space-8); }
            .tab-btn { padding: var(--space-10) var(--space-16); font-size: 0.9rem; }
            .results-detail { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebar()" aria-label="Toggle navigation">&#9776;</button>
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>Navigation</h2>
            <button class="sidebar-close" onclick="toggleSidebar()" aria-label="Close navigation">&times;</button>
        </div>
        <ul class="sidebar-nav">
            <li class="sidebar-section-label">App Sections</li>
            <li><a href="#tab-review" class="sidebar-link">üìñ Review Topics</a></li>
            <li><a href="#tab-unit-circle" class="sidebar-link">üîÑ Unit Circle</a></li>
            <li><a href="#tab-flashcards" class="sidebar-link">üé¥ Flashcards</a></li>
            <li><a href="#tab-quiz" class="sidebar-link">‚ùì Quiz Mode</a></li>

            <li class="sidebar-section-label sidebar-collapsible" onclick="toggleSidebarSection(this)">Pre-Calc Review</li>
            <ul class="sidebar-group">
                <li><a href="#topic-functions-notation" class="sidebar-link">Functions & Notation</a></li>
                <li><a href="#topic-exponentials-logs" class="sidebar-link">Exponentials & Logs</a></li>
                <li><a href="#topic-log-properties" class="sidebar-link">Log Properties</a></li>
                <li><a href="#topic-unit-circle" class="sidebar-link">The Unit Circle</a></li>
                <li><a href="#topic-trig-reference" class="sidebar-link">Quick Trig Reference</a></li>
                <li><a href="#topic-key-identities" class="sidebar-link">Key Identities</a></li>
                <li><a href="#topic-sinusoidal" class="sidebar-link">Sinusoidal Models</a></li>
                <li><a href="#topic-factoring" class="sidebar-link">Factoring Patterns</a></li>
                <li><a href="#topic-quadratics" class="sidebar-link">Solving Quadratics</a></li>
                <li><a href="#topic-algebra-skills" class="sidebar-link">More Algebra Skills</a></li>
                <li><a href="#topic-rational-functions" class="sidebar-link">Rational Functions</a></li>
                <li><a href="#topic-inverse-functions" class="sidebar-link">Inverse Functions</a></li>
                <li><a href="#topic-lines-slopes" class="sidebar-link">Lines & Slopes</a></li>
                <li><a href="#topic-abs-piecewise" class="sidebar-link">Absolute Value & Piecewise</a></li>
                <li><a href="#topic-transformations" class="sidebar-link">Function Transformations</a></li>
                <li><a href="#topic-inequalities" class="sidebar-link">Inequalities</a></li>
                <li><a href="#topic-sequences" class="sidebar-link">Sequences & Series</a></li>
                <li><a href="#topic-limits-preview" class="sidebar-link">Limits (Calculus Preview)</a></li>
                <li><a href="#topic-common-mistakes" class="sidebar-link">Common Mistakes</a></li>
                <li><a href="#topic-calculator" class="sidebar-link">Calculator Skills</a></li>
            </ul>

            <li class="sidebar-section-label sidebar-collapsible" onclick="toggleSidebarSection(this)">Calculus</li>
            <ul class="sidebar-group">
                <li><a href="#topic-function" class="sidebar-link">What is a Function?</a></li>
                <li><a href="#topic-limit" class="sidebar-link">What is a Limit?</a></li>
                <li><a href="#topic-derivative" class="sidebar-link">What is a Derivative?</a></li>
                <li><a href="#topic-integral" class="sidebar-link">What is an Integral?</a></li>
                <li><a href="#topic-continuity" class="sidebar-link">What is Continuity?</a></li>
                <li><a href="#topic-quick-ref-chart" class="sidebar-link">Quick Reference Chart</a></li>
                <li><a href="#topic-graph-ref-key" class="sidebar-link">Graph Reference Key</a></li>
                <li><a href="#topic-calc-definitions" class="sidebar-link">Definitions</a></li>
                <li><a href="#topic-rolles-theorem" class="sidebar-link">Rolle's Theorem</a></li>
                <li><a href="#topic-mvt" class="sidebar-link">Mean Value Theorem</a></li>
                <li><a href="#topic-corollaries" class="sidebar-link">Corollaries</a></li>
                <li><a href="#topic-first-deriv-test" class="sidebar-link">First Derivative Test</a></li>
                <li><a href="#topic-second-deriv-test" class="sidebar-link">Second Derivative Test</a></li>
                <li><a href="#topic-graphing-derivatives" class="sidebar-link">Graphing with Derivatives</a></li>
                <li><a href="#topic-integration-formulas" class="sidebar-link">Integration Formulas</a></li>
            </ul>

            <li class="sidebar-section-label sidebar-collapsible" onclick="toggleSidebarSection(this)">Precalculus (Expanded)</li>
            <ul class="sidebar-group">
                <li><a href="#topic-precalc_domain_range" class="sidebar-link">A1. Domain &amp; Range</a></li>
                <li><a href="#topic-precalc_composition" class="sidebar-link">A3. Function Composition</a></li>
                <li><a href="#topic-precalc_polynomials_deep" class="sidebar-link">A5. Polynomials (Deep)</a></li>
                <li><a href="#topic-precalc_quadratics_expanded" class="sidebar-link">A6. Quadratics (Expanded)</a></li>
                <li><a href="#topic-precalc_factor_remainder" class="sidebar-link">A7. Factor &amp; Remainder</a></li>
                <li><a href="#topic-precalc_rates_of_change" class="sidebar-link">A2. Rates of Change</a></li>
                <li><a href="#topic-precalc_linear_functions" class="sidebar-link">A4. Linear Functions</a></li>
                <li><a href="#topic-precalc_real_zeros" class="sidebar-link">A8. Real Zeros</a></li>
                <li><a href="#topic-precalc_complex_zeros" class="sidebar-link">A9. Complex Zeros</a></li>
                <li><a href="#topic-precalc_rational_functions_deep" class="sidebar-link">A10. Rational Functions (Deep)</a></li>
                <li><a href="#topic-precalc_exponential_models" class="sidebar-link">A12. Exponential (Expanded)</a></li>
                <li><a href="#topic-precalc_logarithmic_models" class="sidebar-link">A13. Logarithmic (Expanded)</a></li>
                <li><a href="#topic-precalc_inverses_radicals" class="sidebar-link">A11. Inverses &amp; Radicals</a></li>
            </ul>

            <li class="sidebar-section-label sidebar-collapsible" onclick="toggleSidebarSection(this)">Trigonometry (Expanded)</li>
            <ul class="sidebar-group">
                <li><a href="#topic-trig_six_functions" class="sidebar-link">B2. Six Trig Functions</a></li>
                <li><a href="#topic-trig_identities_proofs" class="sidebar-link">B3. Trig Identities (Proofs)</a></li>
                <li><a href="#topic-trig_inverse_functions" class="sidebar-link">B5. Inverse Trig Functions</a></li>
                <li><a href="#topic-trig_equations" class="sidebar-link">B6. Trig Equations</a></li>
                <li><a href="#topic-trig_angles_measure" class="sidebar-link">B1. Angles &amp; Measure</a></li>
                <li><a href="#topic-trig_graphs_all_functions" class="sidebar-link">B4. Trig Graphs (All)</a></li>
                <li><a href="#topic-trig_law_of_sines" class="sidebar-link">B7. Law of Sines</a></li>
                <li><a href="#topic-trig_law_of_cosines" class="sidebar-link">B8. Law of Cosines</a></li>
                <li><a href="#topic-trig_polar_coordinates" class="sidebar-link">B9. Polar Coordinates</a></li>
                <li><a href="#topic-trig_vectors" class="sidebar-link">B10. Vectors</a></li>
                <li><a href="#topic-trig_parametric_equations" class="sidebar-link">B11. Parametric Equations</a></li>
                <li><a href="#topic-trig_polar_complex" class="sidebar-link">B12. Polar Complex Numbers</a></li>
                <li><a href="#topic-trig_harmonic_motion" class="sidebar-link">B13. Harmonic Motion</a></li>
                <li><a href="#topic-trig_polar_conics" class="sidebar-link">B14. Polar Conics</a></li>
            </ul>
        </ul>
    </nav>

    <div class="container">
        <header>
            <h1>üìö Precalc Review Master</h1>
            <p class="subtitle">Master precalculus concepts with interactive review, flashcards, and quizzes</p>
        </header>

        <div class="nav-tabs">
            <button class="tab-btn active" onclick="switchTab('review')">üìñ Review</button>
            <button class="tab-btn" onclick="switchTab('unit-circle')">üîÑ Unit Circle</button>
            <button class="tab-btn" onclick="switchTab('flashcards')">üé¥ Flashcards</button>
            <button class="tab-btn" onclick="switchTab('quiz')">‚ùì Quiz Mode</button>
        </div>

        <!-- REVIEW TAB -->
        <div id="review" class="content-section active">
            <button class="card-back-btn" id="cardBackBtn" onclick="exitFocusMode()">&larr; Back to all topics</button>
            <div class="review-grid">
                <!-- Functions -->
                <div class="concept-card card-algebra" id="topic-functions-notation">
                    <h3>üìê Functions & Notation</h3>
                    <p>f(x) means "plug x into the expression"</p>
                    <div class="equation-box">f(3) = Replace every x with 3<br>f(a+h) = Replace x with (a+h)</div>
                    <p style="margin-top: var(--space-12); font-size: 0.9rem;"><strong>Domain:</strong> All valid x-values (watch for division by zero, ‚àö negatives, log issues)</p>
                    <p style="font-size: 0.9rem;"><strong>Range:</strong> All possible y-values</p>
                </div>

                <!-- Exponential & Log Core -->
                <div class="concept-card card-explog" id="topic-exponentials-logs">
                    <h3>üî¢ Exponentials & Logs</h3>
                    <p><strong>THE MOST IMPORTANT:</strong></p>
                    <div class="equation-box">a<sup>x</sup> = y  ‚ü∫  log<sub>a</sub>(y) = x</div>
                    <p style="margin-top: var(--space-12); font-size: 0.9rem;">These are inverse operations‚Äîthey undo each other!</p>
                    <div class="info-badge">Natural base e: e<sup>x</sup> = y  ‚ü∫  ln(y) = x</div>
                </div>

                <!-- Log Rules -->
                <div class="concept-card card-explog" id="topic-log-properties">
                    <h3>‚ûï Log Properties</h3>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        Product: log(MN) = log(M) + log(N)<br>
                        Quotient: log(M/N) = log(M) ‚àí log(N)<br>
                        Power: log(M<sup>k</sup>) = k¬∑log(M)
                    </div>
                    <div class="info-badge" style="background: rgba(192, 21, 47, 0.1); border-left-color: var(--color-red-500); color: var(--color-red-500);">
                        ‚ùå WRONG: ln(a+b) ‚â† ln(a) + ln(b)<br>Only works for multiplication!
                    </div>
                </div>

                <!-- Unit Circle -->
                <div class="concept-card card-trig" id="topic-unit-circle">
                    <h3>üîÑ The Unit Circle</h3>
                    <p><strong>Radius 1, centered at origin. Every point is (cos Œ∏, sin Œ∏).</strong></p>
                    <div class="info-badge">
                        <strong>Convert degrees ‚Üî radians:</strong><br>
                        Radians = (œÄ/180) √ó degrees<br>
                        Degrees = (180/œÄ) √ó radians
                    </div>
                    <div class="table-responsive">
                        <table style="font-size: 0.9rem;">
                            <tr>
                                <th>Degrees</th>
                                <th>Radians</th>
                                <th>cos Œ∏</th>
                                <th>sin Œ∏</th>
                                <th>tan Œ∏</th>
                            </tr>
                            <tr style="background: rgba(33, 128, 141, 0.1);">
                                <td>0¬∞</td>
                                <td>0</td>
                                <td>1</td>
                                <td>0</td>
                                <td>0</td>
                            </tr>
                            <tr style="background: rgba(33, 128, 141, 0.2);">
                                <td>30¬∞</td>
                                <td><strong>œÄ/6</strong></td>
                                <td>‚àö3/2</td>
                                <td>1/2</td>
                                <td>‚àö3/3</td>
                            </tr>
                            <tr style="background: rgba(33, 128, 141, 0.2);">
                                <td>45¬∞</td>
                                <td><strong>œÄ/4</strong></td>
                                <td>‚àö2/2</td>
                                <td>‚àö2/2</td>
                                <td>1</td>
                            </tr>
                            <tr style="background: rgba(33, 128, 141, 0.2);">
                                <td>60¬∞</td>
                                <td><strong>œÄ/3</strong></td>
                                <td>1/2</td>
                                <td>‚àö3/2</td>
                                <td>‚àö3</td>
                            </tr>
                            <tr style="background: rgba(33, 128, 141, 0.1);">
                                <td>90¬∞</td>
                                <td>œÄ/2</td>
                                <td>0</td>
                                <td>1</td>
                                <td>undef</td>
                            </tr>
                            <tr>
                                <td>120¬∞</td>
                                <td>2œÄ/3</td>
                                <td>‚àí1/2</td>
                                <td>‚àö3/2</td>
                                <td>‚àí‚àö3</td>
                            </tr>
                            <tr>
                                <td>135¬∞</td>
                                <td>3œÄ/4</td>
                                <td>‚àí‚àö2/2</td>
                                <td>‚àö2/2</td>
                                <td>‚àí1</td>
                            </tr>
                            <tr>
                                <td>150¬∞</td>
                                <td>5œÄ/6</td>
                                <td>‚àí‚àö3/2</td>
                                <td>1/2</td>
                                <td>‚àí‚àö3/3</td>
                            </tr>
                            <tr style="background: rgba(33, 128, 141, 0.1);">
                                <td>180¬∞</td>
                                <td>œÄ</td>
                                <td>‚àí1</td>
                                <td>0</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td>270¬∞</td>
                                <td>3œÄ/2</td>
                                <td>0</td>
                                <td>‚àí1</td>
                                <td>undef</td>
                            </tr>
                            <tr style="background: rgba(33, 128, 141, 0.1);">
                                <td>360¬∞</td>
                                <td>2œÄ</td>
                                <td>1</td>
                                <td>0</td>
                                <td>0</td>
                            </tr>
                        </table>
                    </div>
                    <p style="margin-top: var(--space-12); font-size: 0.85rem; color: var(--color-text-secondary);"><strong>Note:</strong> The highlighted rows (0¬∞, 30¬∞, 45¬∞, 60¬∞, 90¬∞, 180¬∞, 360¬∞) are the key angles you must memorize!</p>
                </div>

                <!-- Trig Values Quick Reference -->
                <div class="concept-card card-trig" id="topic-trig-reference">
                    <h3>‚ö° Quick Trig Reference</h3>
                    <p><strong>Key angles (memorize these!):</strong></p>
                    <div class="table-responsive">
                        <table style="font-size: 0.9rem;">
                            <tr>
                                <th>Angle</th>
                                <th>sin</th>
                                <th>cos</th>
                                <th>tan</th>
                            </tr>
                            <tr>
                                <td>0 / œÄ/2</td>
                                <td>0 / 1</td>
                                <td>1 / 0</td>
                                <td>0 / undef</td>
                            </tr>
                            <tr>
                                <td>œÄ/6 (30¬∞)</td>
                                <td>1/2</td>
                                <td>‚àö3/2</td>
                                <td>‚àö3/3</td>
                            </tr>
                            <tr>
                                <td>œÄ/4 (45¬∞)</td>
                                <td>‚àö2/2</td>
                                <td>‚àö2/2</td>
                                <td>1</td>
                            </tr>
                            <tr>
                                <td>œÄ/3 (60¬∞)</td>
                                <td>‚àö3/2</td>
                                <td>1/2</td>
                                <td>‚àö3</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!-- Trig Identities -->
                <div class="concept-card card-trig" id="topic-key-identities">
                    <h3>‚öôÔ∏è Key Identities</h3>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        sin¬≤(x) + cos¬≤(x) = 1<br>
                        tan(x) = sin(x)/cos(x)<br>
                        sin(2x) = 2sin(x)cos(x)
                    </div>
                    <p style="margin-top: var(--space-12); font-size: 0.9rem;"><strong>Even/Odd:</strong><br>sin(‚àíx) = ‚àísin(x) (odd)<br>cos(‚àíx) = cos(x) (even)</p>
                </div>

                <!-- Sinusoidal Models -->
                <div class="concept-card card-trig" id="topic-sinusoidal">
                    <h3>„Ä∞Ô∏è Sinusoidal Models</h3>
                    <div class="equation-box">y = A¬∑sin(bx + c) + D</div>
                    <p style="margin-top: var(--space-12); font-size: 0.9rem;">
                        <strong>A</strong> = Amplitude<br>
                        <strong>b</strong> = 2œÄ/Period<br>
                        <strong>D</strong> = Vertical shift (midline)
                    </p>
                </div>

                <!-- Factoring -->
                <div class="concept-card card-algebra" id="topic-factoring">
                    <h3>üßÆ Factoring Patterns</h3>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        Difference of squares: a¬≤ ‚àí b¬≤ = (a+b)(a‚àíb)<br>
                        Perfect square: a¬≤ ¬± 2ab + b¬≤ = (a¬±b)¬≤<br>
                        Sum/Diff cubes: a¬≥ ¬± b¬≥ = (a¬±b)(a¬≤ ‚àì ab + b¬≤)
                    </div>
                </div>

                <!-- Quadratic Formula -->
                <div class="concept-card card-algebra" id="topic-quadratics">
                    <h3>‚úñÔ∏è Solving Quadratics</h3>
                    <div class="equation-box">x = (‚àíb ¬± ‚àö(b¬≤ ‚àí 4ac)) / (2a)</div>
                    <p style="margin-top: var(--space-12); font-size: 0.9rem;">
                        <strong>Discriminant Œî = b¬≤ ‚àí 4ac</strong><br>
                        Œî > 0: Two real solutions<br>
                        Œî = 0: One solution<br>
                        Œî < 0: No real solutions
                    </p>
                </div>

                <!-- Completing the Square & Rationalizing -->
                <div class="concept-card card-algebra" id="topic-algebra-skills">
                    <h3>üîß More Algebra Skills</h3>
                    <p><strong>Completing the Square:</strong></p>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        x¬≤ + bx ‚Üí x¬≤ + bx + (b/2)¬≤ ‚àí (b/2)¬≤<br>
                        = (x + b/2)¬≤ ‚àí (b/2)¬≤
                    </div>
                    <p style="margin-top: var(--space-12); font-size: 0.9rem;"><strong>Example:</strong> x¬≤ + 6x + 1 = 0<br>
                        (x¬≤ + 6x + 9) ‚àí 9 + 1 = 0 ‚Üí (x + 3)¬≤ = 8 ‚Üí x = ‚àí3 ¬± 2‚àö2</p>
                    <p style="margin-top: var(--space-12);"><strong>Rationalizing Denominators:</strong></p>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        1/‚àöa ‚Üí multiply by ‚àöa/‚àöa<br>
                        1/(a + ‚àöb) ‚Üí multiply by (a ‚àí ‚àöb)/(a ‚àí ‚àöb)
                    </div>
                    <div class="info-badge">Multiply by the conjugate to eliminate radicals from the denominator</div>
                </div>

                <!-- Rational Functions -->
                <div class="concept-card card-algebra" id="topic-rational-functions">
                    <h3>üìä Rational Functions</h3>
                    <p><strong>Vertical Asymptotes:</strong> Set denominator = 0</p>
                    <p><strong>Horizontal Asymptotes:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        deg(P) < deg(Q) ‚Üí y = 0<br>
                        deg(P) = deg(Q) ‚Üí y = leading coef ratio<br>
                        deg(P) > deg(Q) ‚Üí none
                    </p>
                </div>

                <!-- Inverse Functions -->
                <div class="concept-card card-algebra" id="topic-inverse-functions">
                    <h3>üîÅ Inverse Functions</h3>
                    <p><strong>Find inverse:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        1. Write y = f(x)<br>
                        2. Swap x and y<br>
                        3. Solve for y<br>
                        4. Write as f‚Åª¬π(x) = result
                    </p>
                    <div class="info-badge">Graphs are reflections across y = x</div>
                </div>

                <!-- Lines & Slopes -->
                <div class="concept-card card-algebra" id="topic-lines-slopes">
                    <h3>üìè Lines & Slopes</h3>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        Slope: m = (y‚ÇÇ ‚àí y‚ÇÅ) / (x‚ÇÇ ‚àí x‚ÇÅ)
                    </div>
                    <p style="margin-top: var(--space-12);"><strong>Forms of Linear Equations:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        <strong>Slope-intercept:</strong> y = mx + b<br>
                        <strong>Point-slope:</strong> y ‚àí y‚ÇÅ = m(x ‚àí x‚ÇÅ)<br>
                        <strong>Standard form:</strong> Ax + By = C
                    </p>
                    <div class="info-badge">
                        <strong>Parallel lines:</strong> same slope (m‚ÇÅ = m‚ÇÇ)<br>
                        <strong>Perpendicular lines:</strong> negative reciprocal slopes (m‚ÇÅ ¬∑ m‚ÇÇ = ‚àí1)
                    </div>
                </div>

                <!-- Absolute Value & Piecewise Functions -->
                <div class="concept-card card-algebra" id="topic-abs-piecewise">
                    <h3>üìê Absolute Value & Piecewise</h3>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        |x| = x if x ‚â• 0, ‚àíx if x &lt; 0
                    </div>
                    <p style="margin-top: var(--space-12);"><strong>Solving Absolute Value Equations:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        |expression| = k ‚Üí two cases:<br>
                        expression = k &nbsp;OR&nbsp; expression = ‚àík
                    </p>
                    <p style="margin-top: var(--space-12);"><strong>Absolute Value Inequalities:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        |expr| &lt; k ‚Üí ‚àík &lt; expr &lt; k (AND/between)<br>
                        |expr| &gt; k ‚Üí expr &lt; ‚àík OR expr &gt; k (outside)
                    </p>
                    <div class="info-badge"><strong>Piecewise Functions:</strong> Check which domain condition the input satisfies, then use that piece's rule to evaluate.</div>
                </div>

                <!-- Function Transformations -->
                <div class="concept-card card-algebra" id="topic-transformations">
                    <h3>üîÄ Function Transformations</h3>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        y = a ¬∑ f(b(x ‚àí h)) + k
                    </div>
                    <p style="margin-top: var(--space-12); font-size: 0.9rem;">
                        <strong>k:</strong> Vertical shift (up if k &gt; 0, down if k &lt; 0)<br>
                        <strong>h:</strong> Horizontal shift (right if h &gt; 0, left if h &lt; 0)<br>
                        <strong>a:</strong> Vertical stretch (|a| &gt; 1) or compress (|a| &lt; 1)<br>
                        <strong>b:</strong> Horizontal compress (|b| &gt; 1) or stretch (|b| &lt; 1)
                    </p>
                    <p style="margin-top: var(--space-12); font-size: 0.9rem;">
                        <strong>Reflections:</strong><br>
                        ‚àíf(x) = reflect over x-axis<br>
                        f(‚àíx) = reflect over y-axis
                    </p>
                    <div class="info-badge">Inside changes affect x (opposite direction); outside changes affect y (same direction)</div>
                </div>

                <!-- Inequalities -->
                <div class="concept-card card-algebra" id="topic-inequalities">
                    <h3>‚öñÔ∏è Inequalities</h3>
                    <p><strong>Linear Inequalities:</strong> Solve like equations, but <em>flip the sign</em> when multiplying or dividing by a negative.</p>
                    <p style="margin-top: var(--space-12);"><strong>Polynomial/Rational Inequalities (Sign Chart):</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        1. Move everything to one side (‚â• 0 or ‚â§ 0)<br>
                        2. Factor completely<br>
                        3. Find critical values (zeros and undefined points)<br>
                        4. Test sign in each interval on number line<br>
                        5. Select intervals that satisfy the inequality
                    </p>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        Interval notation:<br>
                        (a, b) = open &nbsp;&nbsp; [a, b] = closed<br>
                        (‚àí‚àû, a) ‚à™ (b, ‚àû) = union of intervals
                    </div>
                </div>

                <!-- Sequences and Series -->
                <div class="concept-card card-misc" id="topic-sequences">
                    <h3>üî¢ Sequences & Series</h3>
                    <p><strong>Arithmetic Sequence</strong> (constant difference d):</p>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        a<sub>n</sub> = a‚ÇÅ + (n ‚àí 1)d<br>
                        Sum: S<sub>n</sub> = n(a‚ÇÅ + a<sub>n</sub>) / 2
                    </div>
                    <p style="margin-top: var(--space-12);"><strong>Geometric Sequence</strong> (constant ratio r):</p>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        a<sub>n</sub> = a‚ÇÅ ¬∑ r<sup>n‚àí1</sup><br>
                        Sum: S<sub>n</sub> = a‚ÇÅ(1 ‚àí r<sup>n</sup>) / (1 ‚àí r)
                    </div>
                    <div class="info-badge">Infinite geometric series converges when |r| &lt; 1: &nbsp; S = a‚ÇÅ / (1 ‚àí r)</div>
                </div>

                <!-- Limits Preview -->
                <div class="concept-card card-misc" id="topic-limits-preview">
                    <h3>üéØ Limits (Calculus Preview)</h3>
                    <p><strong>Core idea:</strong> What value does f(x) approach as x ‚Üí c?</p>
                    <p style="margin-top: var(--space-12); font-size: 0.9rem;"><strong>Strategy:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        1. Try direct substitution first<br>
                        2. If you get 0/0 (indeterminate): factor, cancel, or rationalize<br>
                        3. For limits at ‚àû: divide every term by highest power of x
                    </p>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        Key facts:<br>
                        lim(x‚Üí0) sin(x)/x = 1<br>
                        lim(x‚Üí‚àû) 1/x<sup>n</sup> = 0 &nbsp;(n &gt; 0)<br>
                        lim(x‚Üía) [polynomial] = plug in a
                    </div>
                </div>

                <!-- Common Mistakes -->
                <div class="concept-card card-misc" id="topic-common-mistakes">
                    <h3>‚ö†Ô∏è Common Mistakes to Avoid</h3>
                    <div class="info-badge" style="background: rgba(192, 21, 47, 0.1); border-left-color: var(--color-red-500); color: var(--color-red-500);">
                        These are the #1 exam killers ‚Äî memorize what NOT to do!
                    </div>
                    <div class="equation-box" style="font-size: 0.9rem; margin-top: var(--space-12);">
                        ‚ùå ln(a + b) ‚â† ln(a) + ln(b)<br>
                        ‚ùå (a + b)¬≤ ‚â† a¬≤ + b¬≤ &nbsp;‚Üí ‚úÖ a¬≤ + 2ab + b¬≤<br>
                        ‚ùå ‚àö(a¬≤ + b¬≤) ‚â† a + b<br>
                        ‚ùå 1/(a + b) ‚â† 1/a + 1/b
                    </div>
                    <p style="margin-top: var(--space-12); font-size: 0.9rem;">
                        <strong>Also watch out for:</strong><br>
                        ‚Ä¢ Forgetting to flip inequality sign when √ó/√∑ by negative<br>
                        ‚Ä¢ Ignoring domain restrictions (div by 0, ‚àö of negatives, log of ‚â§ 0)<br>
                        ‚Ä¢ Dropping parentheses: ‚àí3¬≤ = ‚àí9 but (‚àí3)¬≤ = 9
                    </p>
                </div>

                <!-- Calculator Skills -->
                <div class="concept-card card-misc" id="topic-calculator">
                    <h3>üñ© Calculator Skills</h3>
                    <p><strong>Essential Buttons:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        sin, cos, tan, sin‚Åª¬π, cos‚Åª¬π, tan‚Åª¬π<br>
                        ln, log, e<sup>x</sup>, 10<sup>x</sup>, x¬≤, ‚àö, œÄ, ^
                    </p>
                    <div class="info-badge" style="background: rgba(192, 21, 47, 0.1); border-left-color: var(--color-red-500); color: var(--color-red-500);">
                        ALWAYS check: Degree vs Radian mode!<br>For calculus, use RADIAN mode (almost always).
                    </div>
                    <p style="margin-top: var(--space-12);"><strong>Change of Base:</strong></p>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        log<sub>a</sub>(M) = ln(M) / ln(a)
                    </div>
                    <p style="margin-top: var(--space-12); font-size: 0.9rem;"><strong>Parentheses matter:</strong> ‚àí3¬≤ = ‚àí9 vs (‚àí3)¬≤ = 9</p>
                </div>

                <!-- ===== CALCULUS PREVIEW TOPICS ===== -->

                <!-- What is a Function? -->
                <div class="concept-card card-calc" id="topic-function">
                    <h3>üìò What is a Function?</h3>
                    <p>A function is a mathematical entity that describes a relationship between two sets of values: the <strong>domain</strong> (inputs) and the <strong>codomain</strong> (outputs). Each input in the domain is mapped to exactly one output.</p>
                    <div class="info-badge"><strong>Vertical Line Test:</strong> If a vertical line intersects the graph at more than one point, the graph does not represent a function.</div>
                    <p style="margin-top: var(--space-12);"><strong>Ways to describe functions:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        ‚Ä¢ <strong>Algebraically</strong> ‚Äî using equations<br>
                        ‚Ä¢ <strong>Graphically</strong> ‚Äî using plots<br>
                        ‚Ä¢ <strong>Numerically</strong> ‚Äî using tables<br>
                        ‚Ä¢ <strong>Verbally</strong> ‚Äî using words
                    </p>
                    <p style="margin-top: var(--space-12);"><strong>Types of functions:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">Polynomial, Rational, Exponential, Logarithmic, and Trigonometric functions.</p>
                    <p style="margin-top: var(--space-12);"><strong>Example:</strong></p>
                    <div class="equation-box">f(x) = 2x + 3</div>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">This is a linear function with slope 2 and y-intercept 3. The slope indicates the rate of change; the y-intercept is the value when x = 0.</p>
                </div>

                <!-- What is a Limit? -->
                <div class="concept-card card-calc" id="topic-limit">
                    <h3>üìò What is a Limit?</h3>
                    <p>The <strong>limit</strong> of a function f(x) as x approaches a is the value that f(x) gets closer to as x gets closer to a.</p>
                    <div class="equation-box">lim(x‚Üía) f(x) = L</div>
                    <p style="margin-top: var(--space-12);"><strong>Types of limits:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        ‚Ä¢ <strong>Two-sided limits</strong> ‚Äî approaching from both left and right<br>
                        ‚Ä¢ <strong>One-sided limits</strong> ‚Äî from the left (x‚Üía‚Åª) or from the right (x‚Üía‚Å∫)
                    </p>
                    <p style="margin-top: var(--space-12);"><strong>Techniques for finding limits:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        1. Direct substitution<br>
                        2. Factoring<br>
                        3. Rationalizing
                    </p>
                    <p style="margin-top: var(--space-12);"><strong>Example:</strong></p>
                    <div class="equation-box" style="font-size: 0.9rem;">lim(x‚Üí1) (x¬≤ ‚àí 1)/(x ‚àí 1)</div>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">Direct substitution gives 0/0 (indeterminate). Factor numerator: (x‚àí1)(x+1)/(x‚àí1) = x+1. The limit as x‚Üí1 is <strong>2</strong>.</p>
                </div>

                <!-- What is a Derivative? -->
                <div class="concept-card card-calc" id="topic-derivative">
                    <h3>üìò What is a Derivative?</h3>
                    <p>The <strong>derivative</strong> of a function f(x) at a point x is the rate of change of the function at that point.</p>
                    <div class="equation-box">f'(x) = lim(h‚Üí0) [f(x+h) ‚àí f(x)] / h</div>
                    <p style="margin-top: var(--space-12);"><strong>Interpretations:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        ‚Ä¢ The slope of the tangent line to the graph at a given point<br>
                        ‚Ä¢ The instantaneous rate of change of the function
                    </p>
                    <p style="margin-top: var(--space-12);"><strong>Derivative rules:</strong></p>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        Power rule: d/dx [x<sup>n</sup>] = nx<sup>n‚àí1</sup><br>
                        Product rule: d/dx [fg] = f'g + fg'<br>
                        Quotient rule: d/dx [f/g] = (f'g ‚àí fg') / g¬≤<br>
                        Chain rule: d/dx [f(g(x))] = f'(g(x)) ¬∑ g'(x)
                    </div>
                    <p style="margin-top: var(--space-12);"><strong>Example:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">For f(x) = x¬≤, the power rule gives f'(x) = 2x. At x = 2, the slope of the tangent line is <strong>4</strong>.</p>
                </div>

                <!-- What is an Integral? -->
                <div class="concept-card card-calc" id="topic-integral">
                    <h3>üìò What is an Integral?</h3>
                    <p>The <strong>integral</strong> of a function f(x) from a to b is the area under the curve between x = a and x = b.</p>
                    <div class="equation-box">‚à´<sub>a</sub><sup>b</sup> f(x) dx</div>
                    <p style="margin-top: var(--space-12);"><strong>Types of integrals:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        ‚Ä¢ <strong>Definite integrals</strong> ‚Äî compute a numerical value (area)<br>
                        ‚Ä¢ <strong>Indefinite integrals</strong> ‚Äî find an antiderivative (+ C)
                    </p>
                    <p style="margin-top: var(--space-12);"><strong>Techniques:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        1. Antiderivatives<br>
                        2. Substitution<br>
                        3. Integration by parts<br>
                        4. Partial fractions
                    </p>
                    <p style="margin-top: var(--space-12);"><strong>Example:</strong></p>
                    <div class="equation-box" style="font-size: 0.9rem;">‚à´<sub>0</sub><sup>1</sup> x¬≤ dx = [x¬≥/3]<sub>0</sub><sup>1</sup> = 1/3 ‚àí 0 = 1/3</div>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">The antiderivative of x¬≤ is (1/3)x¬≥. Evaluate at bounds 0 and 1 to get <strong>1/3</strong>.</p>
                </div>

                <!-- What is Continuity? -->
                <div class="concept-card card-calc" id="topic-continuity">
                    <h3>üìò What is Continuity?</h3>
                    <p>A function f(x) is <strong>continuous</strong> at a point x = a if three conditions are met:</p>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        1. f(a) is defined<br>
                        2. lim(x‚Üía) f(x) exists<br>
                        3. lim(x‚Üía) f(x) = f(a)
                    </div>
                    <p style="margin-top: var(--space-12);"><strong>Types of discontinuities:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        ‚Ä¢ <strong>Removable</strong> ‚Äî a hole in the graph (limit exists but ‚â† f(a))<br>
                        ‚Ä¢ <strong>Jump</strong> ‚Äî left and right limits differ<br>
                        ‚Ä¢ <strong>Infinite</strong> ‚Äî function approaches ¬±‚àû
                    </p>
                    <p style="margin-top: var(--space-12);"><strong>Examples:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">f(x) = x¬≤ is continuous at x = 2: f(2) = 4, and lim(x‚Üí2) f(x) = 4.</p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">f(x) = 1/x is discontinuous at x = 0: not defined there, and the limit does not exist (approaches ‚àû).</p>
                    <div class="info-badge"><strong>Intermediate Value Theorem:</strong> If f is continuous on [a, b] and N is between f(a) and f(b), then there exists c in (a, b) such that f(c) = N.</div>
                </div>

                <!-- ===== CALCULUS TOPICS ===== -->

                <!-- Quick Reference Chart -->
                <div class="concept-card card-calc" id="topic-quick-ref-chart">
                    <h3>üìã Quick Reference Chart</h3>
                    <p>Key calculus terms and what they mean at a glance.</p>
                    <div class="table-responsive">
                        <table style="font-size: 0.9rem;">
                            <thead>
                                <tr>
                                    <th>Term</th>
                                    <th>Meaning</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td><strong>Critical point</strong></td>
                                    <td>f'(x) = 0 or undefined</td>
                                </tr>
                                <tr>
                                    <td><strong>Increasing interval</strong></td>
                                    <td>f'(x) &gt; 0</td>
                                </tr>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td><strong>Decreasing interval</strong></td>
                                    <td>f'(x) &lt; 0</td>
                                </tr>
                                <tr>
                                    <td><strong>Inflection point</strong></td>
                                    <td>f''(x) = 0 with sign change</td>
                                </tr>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td><strong>Concave up</strong></td>
                                    <td>f''(x) &gt; 0</td>
                                </tr>
                                <tr>
                                    <td><strong>Concave down</strong></td>
                                    <td>f''(x) &lt; 0</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Graph Reference Key -->
                <div class="concept-card card-calc" id="topic-graph-ref-key">
                    <h3>üìà Graph Reference Key</h3>
                    <p>Reference markers on a typical function graph and what they represent.</p>
                    <div class="table-responsive">
                        <table style="font-size: 0.85rem;">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Location</th>
                                    <th>Property</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td>1</td>
                                    <td>Top center</td>
                                    <td>Critical Point</td>
                                    <td>f'(x) = 0 ‚Äî Local maximum</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>Upper right</td>
                                    <td>Concave Down</td>
                                    <td>f''(x) &lt; 0, curve bends downward</td>
                                </tr>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td>3</td>
                                    <td>Left side</td>
                                    <td>Increasing</td>
                                    <td>f'(x) &gt; 0, curve rising</td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td>Lower left</td>
                                    <td>Concave Down</td>
                                    <td>f''(x) &lt; 0, curve bends downward</td>
                                </tr>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td>5</td>
                                    <td>Bottom center</td>
                                    <td>Critical Point</td>
                                    <td>f'(x) = 0 ‚Äî Local minimum</td>
                                </tr>
                                <tr>
                                    <td>6</td>
                                    <td>Lower right</td>
                                    <td>Concave Down</td>
                                    <td>f''(x) &lt; 0, curve bends downward</td>
                                </tr>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td>7</td>
                                    <td>Right side</td>
                                    <td>Decreasing</td>
                                    <td>f'(x) &lt; 0, curve falling</td>
                                </tr>
                                <tr>
                                    <td>8</td>
                                    <td>Upper left</td>
                                    <td>Inflection Point</td>
                                    <td>f''(x) = 0 with sign change</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Definitions -->
                <div class="concept-card card-calc" id="topic-calc-definitions">
                    <h3>üìñ Definitions</h3>
                    <p>Core calculus definitions relating derivatives to function behavior.</p>
                    <div class="table-responsive">
                        <table style="font-size: 0.9rem;">
                            <thead>
                                <tr>
                                    <th>Term</th>
                                    <th>Condition</th>
                                    <th>Meaning</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td><strong>Critical Point</strong></td>
                                    <td>f'(x) = 0</td>
                                    <td>Horizontal tangent (max/min)</td>
                                </tr>
                                <tr>
                                    <td><strong>Increasing</strong></td>
                                    <td>f'(x) &gt; 0</td>
                                    <td>Function rising</td>
                                </tr>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td><strong>Decreasing</strong></td>
                                    <td>f'(x) &lt; 0</td>
                                    <td>Function falling</td>
                                </tr>
                                <tr>
                                    <td><strong>Inflection Point</strong></td>
                                    <td>f''(x) = 0 (sign change)</td>
                                    <td>Concavity changes</td>
                                </tr>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td><strong>Concave Up</strong></td>
                                    <td>f''(x) &gt; 0</td>
                                    <td>Curves upward ‚à™</td>
                                </tr>
                                <tr>
                                    <td><strong>Concave Down</strong></td>
                                    <td>f''(x) &lt; 0</td>
                                    <td>Curves downward ‚à©</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Rolle's Theorem -->
                <div class="concept-card card-calc" id="topic-rolles-theorem">
                    <h3>üìò Rolle's Theorem</h3>
                    <p>Let f be a continuous function over [a, b] and differentiable over (a, b) such that f(a) = f(b). There then exists at least one c in (a, b) such that f'(c) = 0.</p>
                    <div class="info-badge">
                        <strong>Three Conditions:</strong><br>
                        1. f is continuous on [a, b]<br>
                        2. f is differentiable on (a, b)<br>
                        3. f(a) = f(b)
                    </div>
                    <div class="equation-box">
                        If all 3 conditions hold ‚Üí there exists c in (a, b) where f'(c) = 0
                    </div>
                    <p style="font-size: 0.9rem; margin-top: var(--space-12); color: var(--color-text-secondary);">In other words, if a function starts and ends at the same height, somewhere in between the tangent line must be horizontal.</p>
                </div>

                <!-- Mean Value Theorem -->
                <div class="concept-card card-calc" id="topic-mvt">
                    <h3>üìò Mean Value Theorem (MVT)</h3>
                    <p>Drops the requirement f(a) = f(b) from Rolle's Theorem. States that there is at least one point c in (a, b) where the instantaneous rate of change equals the average rate of change:</p>
                    <div class="equation-box">
                        f'(c) = (f(b) ‚àí f(a)) / (b ‚àí a)
                    </div>
                    <div class="info-badge">
                        <strong>Conditions:</strong><br>
                        1. f is continuous on [a, b]<br>
                        2. f is differentiable on (a, b)
                    </div>
                    <p style="font-size: 0.9rem; margin-top: var(--space-12); color: var(--color-text-secondary);">The slope of the tangent at some point c equals the slope of the secant line connecting (a, f(a)) to (b, f(b)).</p>
                </div>

                <!-- Corollaries -->
                <div class="concept-card card-calc" id="topic-corollaries">
                    <h3>üìò Corollaries</h3>
                    <p style="margin-top: var(--space-12);"><strong>1. Functions with a Derivative of Zero:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">If f'(x) = 0 for all x in interval I, then f(x) = constant for all x in I.</p>
                    <p style="margin-top: var(--space-12);"><strong>2. Constant Difference Theorem:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">If f'(x) = g'(x) for all x in I, then f(x) = g(x) + C for some constant C.</p>
                    <p style="margin-top: var(--space-12);"><strong>3. Increasing and Decreasing Functions:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">Let f be continuous on [a, b] and differentiable on (a, b):</p>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        f'(x) &gt; 0 for all x in (a, b) ‚Üí f is increasing on [a, b]<br>
                        f'(x) &lt; 0 for all x in (a, b) ‚Üí f is decreasing on [a, b]
                    </div>
                </div>

                <!-- First Derivative Test -->
                <div class="concept-card card-calc" id="topic-first-deriv-test">
                    <h3>üìò First Derivative Test</h3>
                    <p>Suppose f is continuous over an interval I containing a critical point c, and differentiable over I except possibly at c:</p>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        f' changes + ‚Üí ‚àí at c &nbsp;‚Üí&nbsp; f(c) is a local maximum<br>
                        f' changes ‚àí ‚Üí + at c &nbsp;‚Üí&nbsp; f(c) is a local minimum<br>
                        f' same sign both sides &nbsp;‚Üí&nbsp; f(c) is neither max nor min
                    </div>
                    <div class="info-badge">
                        <strong>Key idea:</strong> Check sign of f'(x) on both sides of a critical point to classify it.
                    </div>
                </div>

                <!-- Second Derivative Test -->
                <div class="concept-card card-calc" id="topic-second-deriv-test">
                    <h3>üìò Second Derivative Test</h3>
                    <p>Used to classify critical points where f'(x) = 0.</p>
                    <p style="margin-top: var(--space-12);"><strong>Steps:</strong></p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        1. Find f'(x) and set f'(x) = 0 to get critical points<br>
                        2. Compute f''(x)<br>
                        3. Evaluate f''(c) at each critical point:
                    </p>
                    <div class="equation-box" style="font-size: 0.9rem;">
                        f''(c) &gt; 0 ‚Üí f(c) is a local minimum<br>
                        f''(c) &lt; 0 ‚Üí f(c) is a local maximum<br>
                        f''(c) = 0 ‚Üí test is inconclusive
                    </div>
                    <div class="info-badge" style="background: rgba(249, 115, 22, 0.1); border-left-color: var(--color-orange-500); color: var(--color-orange-500);">
                        <strong>Tip:</strong> If the second derivative test is inconclusive (f''(c) = 0), fall back to the First Derivative Test.
                    </div>
                </div>

                <!-- Steps for Graphing a Function Using Derivatives -->
                <div class="concept-card card-calc" id="topic-graphing-derivatives">
                    <h3>üìâ Graphing with Derivatives</h3>
                    <p><strong>Step-by-step procedure for sketching a function using calculus:</strong></p>
                    <p style="margin-top: var(--space-12);"><strong>Step 1:</strong> Find f'(x)</p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        Set f'(x) = 0 or find where f'(x) is undefined ‚Üí <strong>critical points</strong><br>
                        f'(x) &gt; 0 ‚Üí increasing &nbsp;|&nbsp; f'(x) &lt; 0 ‚Üí decreasing
                    </p>
                    <p style="margin-top: var(--space-12);"><strong>Step 2:</strong> Find f''(x)</p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">
                        Set f''(x) = 0 or find where f''(x) is undefined ‚Üí <strong>inflection points</strong><br>
                        f''(x) &gt; 0 ‚Üí concave up &nbsp;|&nbsp; f''(x) &lt; 0 ‚Üí concave down
                    </p>
                    <p style="margin-top: var(--space-12);"><strong>Step 3:</strong> Analyze sign of f'(x) and f''(x)</p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">Use sign charts to determine behavior on each interval.</p>
                    <p style="margin-top: var(--space-12);"><strong>Step 4:</strong> Identify key points</p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">Mark critical points (local max/min) and inflection points (concavity change).</p>
                    <p style="margin-top: var(--space-12);"><strong>Step 5:</strong> Sketch the graph</p>
                    <p style="font-size: 0.9rem; margin-top: var(--space-8);">Plot key points and connect using increasing/decreasing and concavity information.</p>
                </div>

                <!-- Integration Formulas -->
                <div class="concept-card card-calc" id="topic-integration-formulas">
                    <h3>‚à´ Integration Formulas</h3>
                    <p>Essential differentiation and integration pairs to memorize.</p>
                    <div class="table-responsive">
                        <table style="font-size: 0.85rem;">
                            <thead>
                                <tr>
                                    <th>Differentiation</th>
                                    <th>Indefinite Integral</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td>d/dx (k) = 0</td>
                                    <td>‚à´ k dx = kx + C</td>
                                </tr>
                                <tr>
                                    <td>d/dx (x<sup>n</sup>) = nx<sup>n‚àí1</sup></td>
                                    <td>‚à´ x<sup>n</sup> dx = x<sup>n+1</sup>/(n+1) + C, n ‚â† ‚àí1</td>
                                </tr>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td>d/dx (ln|x|) = 1/x</td>
                                    <td>‚à´ (1/x) dx = ln|x| + C</td>
                                </tr>
                                <tr>
                                    <td>d/dx (e<sup>x</sup>) = e<sup>x</sup></td>
                                    <td>‚à´ e<sup>x</sup> dx = e<sup>x</sup> + C</td>
                                </tr>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td>d/dx (sin x) = cos x</td>
                                    <td>‚à´ cos x dx = sin x + C</td>
                                </tr>
                                <tr>
                                    <td>d/dx (cos x) = ‚àísin x</td>
                                    <td>‚à´ sin x dx = ‚àícos x + C</td>
                                </tr>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td>d/dx (tan x) = sec¬≤x</td>
                                    <td>‚à´ sec¬≤x dx = tan x + C</td>
                                </tr>
                                <tr>
                                    <td>d/dx (csc x) = ‚àícsc x cot x</td>
                                    <td>‚à´ csc x cot x dx = ‚àícsc x + C</td>
                                </tr>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td>d/dx (sec x) = sec x tan x</td>
                                    <td>‚à´ sec x tan x dx = sec x + C</td>
                                </tr>
                                <tr>
                                    <td>d/dx (cot x) = ‚àícsc¬≤x</td>
                                    <td>‚à´ csc¬≤x dx = ‚àícot x + C</td>
                                </tr>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td>d/dx (sin‚Åª¬πx) = 1/‚àö(1‚àíx¬≤)</td>
                                    <td>‚à´ 1/‚àö(1‚àíx¬≤) dx = sin‚Åª¬πx + C</td>
                                </tr>
                                <tr>
                                    <td>d/dx (tan‚Åª¬πx) = 1/(1+x¬≤)</td>
                                    <td>‚à´ 1/(1+x¬≤) dx = tan‚Åª¬πx + C</td>
                                </tr>
                                <tr style="background: rgba(45, 212, 191, 0.1);">
                                    <td>d/dx (sec‚Åª¬π|x|) = 1/(x‚àö(x¬≤‚àí1))</td>
                                    <td>‚à´ 1/(x‚àö(x¬≤‚àí1)) dx = sec‚Åª¬π|x| + C</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ============================================================= -->
                <!-- ===== PRECALCULUS EXPANSION TOPICS (A1-A13) ================= -->
                <!-- ============================================================= -->

                <!-- IMPLEMENTATION STATUS: precalc_domain_range ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-precalc-exp" id="topic-precalc_domain_range">
                    <h3>üìò A1. Domain and Range <span class="tier-badge tier-1">‚≠ê Essential</span></h3>
                    <p><em>Detailed treatment ‚Äî interval notation, set-builder notation, toolkit function domains, piecewise functions.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Domain = set of all valid inputs; Range = set of all valid outputs.</li>
                        <li>Three main domain restrictions: division by zero, even roots of negatives, log of non-positives.</li>
                        <li>Interval notation: (a, b) open, [a, b] closed, use ‚à™ for union.</li>
                        <li>Set-builder notation: {x | condition}.</li>
                        <li>Toolkit function domains/ranges (constant, identity, quadratic, cubic, reciprocal, square root, cube root, absolute value).</li>
                        <li>Piecewise functions: formula changes based on which sub-domain the input lies in.</li>
                    </ul>
                    <h4>Formulas</h4>
                    <div class="equation-box">
                        Reciprocal: f(x) = 1/x ‚Üí Domain: (‚àí‚àû, 0) ‚à™ (0, ‚àû), Range: (‚àí‚àû, 0) ‚à™ (0, ‚àû)<br>
                        Square root: f(x) = ‚àöx ‚Üí Domain: [0, ‚àû), Range: [0, ‚àû)<br>
                        Reciprocal squared: f(x) = 1/x¬≤ ‚Üí Domain: (‚àí‚àû, 0) ‚à™ (0, ‚àû), Range: (0, ‚àû)
                    </div>
                    <details style="margin-top: var(--space-12);">
                        <summary>üé¥ Yu-Gi-Oh! Connection</summary>
                        <p style="margin-top: var(--space-8); font-size: 0.9rem;">In Yu-Gi-Oh!, many cards have activation conditions ‚Äî "You can only activate this card when your opponent controls a monster" is a <em>domain restriction</em>. The card's "function" (its effect) is undefined when the condition isn't met, just like f(x) = 1/x is undefined at x = 0. Piecewise functions mirror cards with multiple effects depending on conditions (e.g., "If your LP are 1000 or less, do X; otherwise, do Y").</p>
                    </details>
                </div>

                <!-- IMPLEMENTATION STATUS: precalc_composition ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-precalc-exp" id="topic-precalc_composition">
                    <h3>üìò A3. Composition of Functions <span class="tier-badge tier-1">‚≠ê Essential</span></h3>
                    <p><em>Composition notation, evaluating from tables/graphs/formulas, domain of compositions, decomposition.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Composition: (f ‚àò g)(x) = f(g(x)) ‚Äî evaluate the inner function first, then the outer.</li>
                        <li>The output of g becomes the input of f.</li>
                        <li>Domain of f(g(x)): x must be in the domain of g, AND g(x) must be in the domain of f.</li>
                        <li>Decomposition: breaking a complex function into simpler composed parts.</li>
                    </ul>
                    <h4>Formulas</h4>
                    <div class="equation-box">
                        (f ‚àò g)(x) = f(g(x))<br>
                        (g ‚àò f)(x) = g(f(x))<br>
                        Order matters: f(g(x)) ‚â† g(f(x)) in general
                    </div>
                    <details style="margin-top: var(--space-12);">
                        <summary>üé¥ Yu-Gi-Oh! Connection</summary>
                        <p style="margin-top: var(--space-8); font-size: 0.9rem;">A Yu-Gi-Oh! chain is literally function composition. Chain Link 1 activates an effect (function g), its resolution becomes the "input" for Chain Link 2 (function f). The final game state is f(g(initial state)). Importantly, just like f(g(x)) ‚â† g(f(x)), resolving effects in a different chain order produces different outcomes.</p>
                    </details>
                </div>

                <!-- IMPLEMENTATION STATUS: precalc_polynomials_deep ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-precalc-exp" id="topic-precalc_polynomials_deep">
                    <h3>üìò A5. Power Functions &amp; Polynomial Functions (Deep Dive) <span class="tier-badge tier-1">‚≠ê Essential</span></h3>
                    <p><em>Power functions, end behavior, intercepts, turning points, multiplicity, polynomial inequalities.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Power function: f(x) = x<sup>p</sup>. Toolkit: x¬≤, x¬≥, 1/x, ‚àöx, ¬≥‚àöx.</li>
                        <li>End behavior determined by degree and leading coefficient:
                            <ul>
                                <li>Even degree, positive lead ‚Üí both ends up.</li>
                                <li>Even degree, negative lead ‚Üí both ends down.</li>
                                <li>Odd degree, positive lead ‚Üí left down, right up.</li>
                                <li>Odd degree, negative lead ‚Üí left up, right down.</li>
                            </ul>
                        </li>
                        <li>A degree-n polynomial has at most n horizontal intercepts and at most n‚àí1 turning points.</li>
                        <li>Multiplicity of zeros: 1 ‚Üí crosses linearly; 2 ‚Üí bounces off; 3 ‚Üí crosses with cubic flattening.</li>
                    </ul>
                    <h4>Formulas</h4>
                    <div class="equation-box">
                        General polynomial: f(x) = a<sub>n</sub>x<sup>n</sup> + a<sub>n‚àí1</sub>x<sup>n‚àí1</sup> + ‚Ä¶ + a<sub>1</sub>x + a<sub>0</sub><br>
                        End behavior determined by leading term a<sub>n</sub>x<sup>n</sup>
                    </div>
                    <details style="margin-top: var(--space-12);">
                        <summary>üé¥ Yu-Gi-Oh! Connection</summary>
                        <p style="margin-top: var(--space-8); font-size: 0.9rem;">Think of multiplicity like stacking the same continuous effect. A single "Skill Drain" (multiplicity 1) negates monster effects ‚Äî the game state "crosses" from effects-on to effects-off cleanly. But if you have two copies active (multiplicity 2), removing one doesn't change the game state ‚Äî it "bounces" back to the same condition. The more layers of the same restriction, the "flatter" the transition.</p>
                    </details>
                </div>

                <!-- IMPLEMENTATION STATUS: precalc_quadratics_expanded ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-precalc-exp" id="topic-precalc_quadratics_expanded">
                    <h3>üìò A6. Quadratic Functions (Expanded) <span class="tier-badge tier-1">‚≠ê Essential</span></h3>
                    <p><em>Vertex form, completing the square, max/min applications, optimization problems.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Standard form: f(x) = ax¬≤ + bx + c.</li>
                        <li>Vertex form: f(x) = a(x ‚àí h)¬≤ + k, where vertex is (h, k).</li>
                        <li>Vertex formula: h = ‚àíb/(2a), k = f(h).</li>
                        <li>If a &gt; 0, parabola opens up ‚Üí vertex is a minimum.</li>
                        <li>If a &lt; 0, parabola opens down ‚Üí vertex is a maximum.</li>
                        <li>Applications: maximizing area, revenue, projectile motion.</li>
                    </ul>
                    <h4>Formulas</h4>
                    <div class="equation-box">
                        Standard: f(x) = ax¬≤ + bx + c<br>
                        Vertex: f(x) = a(x ‚àí h)¬≤ + k<br>
                        h = ‚àíb/(2a), k = f(h)
                    </div>
                </div>

                <!-- IMPLEMENTATION STATUS: precalc_factor_remainder ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-precalc-exp" id="topic-precalc_factor_remainder">
                    <h3>üìò A7. Factor Theorem, Remainder Theorem &amp; Synthetic Division <span class="tier-badge tier-1">‚≠ê Essential</span></h3>
                    <p><em>Remainder/Factor theorems, polynomial long division, synthetic division, finding zeros.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Remainder Theorem: When p(x) is divided by (x ‚àí c), the remainder is p(c).</li>
                        <li>Factor Theorem: (x ‚àí c) is a factor of p(x) if and only if p(c) = 0.</li>
                        <li>Polynomial long division: divide leading terms, multiply, subtract, repeat.</li>
                        <li>Synthetic division: shortcut for dividing by (x ‚àí c). Write c on the left, coefficients across; bring down, multiply, add, repeat.</li>
                        <li>If synthetic division gives remainder 0, then c is a zero and the quotient gives the reduced polynomial.</li>
                    </ul>
                    <details style="margin-top: var(--space-12);">
                        <summary>üé¥ Yu-Gi-Oh! Connection</summary>
                        <p style="margin-top: var(--space-8); font-size: 0.9rem;">Testing if a card interaction is legal is exactly the Factor Theorem. You "plug in" a specific game state (c) into the ruling (polynomial). If the result is 0 (legal / the effect resolves successfully), then that game state is a "zero" ‚Äî it satisfies the condition. Synthetic division is like systematically checking each link in a chain to see which card effects "factor out."</p>
                    </details>
                </div>

                <!-- IMPLEMENTATION STATUS: precalc_rates_of_change ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-precalc-exp" id="topic-precalc_rates_of_change">
                    <h3>üìò A2. Rates of Change &amp; Behavior of Graphs <span class="tier-badge tier-2">üìó Important</span></h3>
                    <p><em>Average rate of change, increasing/decreasing intervals, local extrema, concavity, inflection points.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Average rate of change = Œîy/Œîx = [f(b) ‚àí f(a)] / (b ‚àí a).</li>
                        <li>Increasing on an interval if f(b) &gt; f(a) for b &gt; a.</li>
                        <li>Decreasing on an interval if f(b) &lt; f(a) for b &gt; a.</li>
                        <li>Local maximum: function changes from increasing to decreasing.</li>
                        <li>Local minimum: function changes from decreasing to increasing.</li>
                        <li>Concave up: rate of change is increasing (smile ‚à™). Concave down: rate of change is decreasing (frown ‚à©).</li>
                        <li>Inflection point: where concavity changes.</li>
                    </ul>
                    <h4>Formulas</h4>
                    <div class="equation-box">
                        Average rate of change: [f(b) ‚àí f(a)] / (b ‚àí a)
                    </div>
                </div>

                <!-- IMPLEMENTATION STATUS: precalc_linear_functions ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-precalc-exp" id="topic-precalc_linear_functions">
                    <h3>üìò A4. Linear Functions (Detailed Treatment) <span class="tier-badge tier-2">üìó Important</span></h3>
                    <p><em>Modeling, interpretation of slope, finding equations from data, parallel/perpendicular lines.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Linear function: f(x) = mx + b, where m = rate of change, b = initial value.</li>
                        <li>Finding equations from two points: compute slope, then use point-slope form.</li>
                        <li>Interpreting slope in context (e.g., "population increases by 1700 people per year").</li>
                        <li>Parallel lines: same slope. Perpendicular lines: slopes are negative reciprocals.</li>
                        <li>Intersection of two lines: set f(x) = g(x) and solve for x.</li>
                    </ul>
                </div>

                <!-- IMPLEMENTATION STATUS: precalc_real_zeros ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-precalc-exp" id="topic-precalc_real_zeros">
                    <h3>üìò A8. Real Zeros of Polynomials <span class="tier-badge tier-2">üìó Important</span></h3>
                    <p><em>Rational Roots Theorem, Cauchy's Bound, systematic zero-finding strategies.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Cauchy's Bound: All real zeros lie in [‚àíM‚àí1, M+1] where M = max(|a<sub>i</sub>/a<sub>n</sub>|).</li>
                        <li>Rational Roots Theorem: If p/q is a rational zero, then p divides the constant term and q divides the leading coefficient.</li>
                        <li>Strategy: List possible rational zeros ‚Üí test using synthetic division ‚Üí reduce polynomial ‚Üí use quadratic formula on remainder.</li>
                    </ul>
                </div>

                <!-- IMPLEMENTATION STATUS: precalc_complex_zeros ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-precalc-exp" id="topic-precalc_complex_zeros">
                    <h3>üìò A9. Complex Zeros <span class="tier-badge tier-2">üìó Important</span></h3>
                    <p><em>Imaginary unit, complex arithmetic, Fundamental Theorem of Algebra, conjugate pairs.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Imaginary unit: i = ‚àö(‚àí1), i¬≤ = ‚àí1.</li>
                        <li>Complex number: a + bi. Conjugate: a ‚àí bi.</li>
                        <li>Fundamental Theorem of Algebra: every degree-n polynomial (n ‚â• 1) has at least one complex zero.</li>
                        <li>A degree-n polynomial has exactly n complex zeros (counting multiplicities).</li>
                        <li>Complex zeros of real-coefficient polynomials come in conjugate pairs.</li>
                        <li>To multiply: use FOIL, replace i¬≤ with ‚àí1. To divide: multiply by conjugate of denominator.</li>
                    </ul>
                    <details style="margin-top: var(--space-12);">
                        <summary>üé¥ Yu-Gi-Oh! Connection</summary>
                        <p style="margin-top: var(--space-8); font-size: 0.9rem;">Complex zeros are "invisible" on the real number line, just like face-down cards are hidden information in Yu-Gi-Oh!. You know they <em>exist</em> (the Fundamental Theorem guarantees it), but you can't see them on the real graph ‚Äî they're in the "complex plane." Conjugate pairs are like a set card and its mirror ruling.</p>
                    </details>
                </div>

                <!-- IMPLEMENTATION STATUS: precalc_rational_functions_deep ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-precalc-exp" id="topic-precalc_rational_functions_deep">
                    <h3>üìò A10. Rational Functions (Deep Dive) <span class="tier-badge tier-2">üìó Important</span></h3>
                    <p><em>Oblique asymptotes, holes, writing equations from graphs, sign analysis.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Vertical asymptotes: denominator = 0 (where numerator ‚â† 0).</li>
                        <li>Holes: both numerator and denominator are 0 at the same x-value.</li>
                        <li>Horizontal asymptotes ‚Äî compare degrees n (numerator) and m (denominator):
                            <ul>
                                <li>n &lt; m ‚Üí y = 0</li>
                                <li>n = m ‚Üí y = ratio of leading coefficients</li>
                                <li>n &gt; m ‚Üí no horizontal asymptote (check for oblique)</li>
                            </ul>
                        </li>
                        <li>Oblique (slant) asymptote: when n = m + 1, perform polynomial long division; the quotient is the oblique asymptote.</li>
                        <li>Writing equations: identify intercepts, asymptotes, multiplicities; form f(x) = a ¬∑ (numerator factors)/(denominator factors); solve for stretch factor using a known point.</li>
                    </ul>
                </div>

                <!-- IMPLEMENTATION STATUS: precalc_exponential_models ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-precalc-exp" id="topic-precalc_exponential_models">
                    <h3>üìò A12. Exponential Functions (Expanded) <span class="tier-badge tier-2">üìó Important</span></h3>
                    <p><em>Growth/decay models, half-life, doubling time, compound interest, fitting models.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Exponential growth: f(t) = a ¬∑ b<sup>t</sup>, b &gt; 1. Decay: 0 &lt; b &lt; 1.</li>
                        <li>Continuous growth/decay: f(t) = a ¬∑ e<sup>rt</sup>.</li>
                        <li>Compound interest: A = P(1 + r/n)<sup>nt</sup>. Continuous: A = Pe<sup>rt</sup>.</li>
                        <li>Doubling time: t = ln(2)/r (continuous) or t = ln(2)/ln(1+r) (periodic).</li>
                        <li>Half-life: t = ln(2)/|r|.</li>
                        <li>Solving exponential equations: take log of both sides.</li>
                    </ul>
                    <h4>Formulas</h4>
                    <div class="equation-box">
                        Continuous: A = Pe<sup>rt</sup><br>
                        Compound: A = P(1 + r/n)<sup>nt</sup><br>
                        Doubling time: t = ln(2)/r<br>
                        Half-life: t = ln(2)/|r|
                    </div>
                    <details style="margin-top: var(--space-12);">
                        <summary>üé¥ Yu-Gi-Oh! Connection</summary>
                        <p style="margin-top: var(--space-8); font-size: 0.9rem;">Cards like "Ring of Destruction" or repeated effect damage follow exponential patterns. If your LP get halved each turn (8000 ‚Üí 4000 ‚Üí 2000 ‚Üí 1000), that's exponential decay with b = 0.5. The half-life concept maps directly: "How many turns until LP drop below 500?" is the same calculation as radioactive half-life.</p>
                    </details>
                </div>

                <!-- IMPLEMENTATION STATUS: precalc_logarithmic_models ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-precalc-exp" id="topic-precalc_logarithmic_models">
                    <h3>üìò A13. Logarithmic Functions (Expanded) <span class="tier-badge tier-2">üìó Important</span></h3>
                    <p><em>Graphs of log functions, solving log equations, applications (pH, decibels, Richter scale).</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>log<sub>a</sub>(x) is defined only for x &gt; 0.</li>
                        <li>Graph of y = log<sub>a</sub>(x): passes through (1, 0), has vertical asymptote at x = 0.</li>
                        <li>Domain of log: (0, ‚àû). Range: all reals.</li>
                        <li>Solving log equations: convert to exponential form, or condense/expand using log properties.</li>
                        <li>Common applications: pH = ‚àílog[H‚Å∫], Richter scale, decibel scale.</li>
                        <li>Change of base: log<sub>a</sub>(x) = ln(x)/ln(a).</li>
                    </ul>
                </div>

                <!-- IMPLEMENTATION STATUS: precalc_inverses_radicals ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-precalc-exp" id="topic-precalc_inverses_radicals">
                    <h3>üìò A11. Inverses &amp; Radical Functions <span class="tier-badge tier-3">üî¨ Advanced</span></h3>
                    <p><em>Restricting domains, inverse of quadratics, radical functions, solving radical equations.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>To find the inverse of a non-one-to-one function, restrict the domain first.</li>
                        <li>Inverse of f(x) = x¬≤ (x ‚â• 0) is f‚Åª¬π(x) = ‚àöx.</li>
                        <li>Radical equations: isolate the radical, raise both sides to the appropriate power, CHECK for extraneous solutions.</li>
                        <li>The domain of the inverse becomes the range of the original function, and vice versa.</li>
                    </ul>
                </div>

                <!-- ============================================================= -->
                <!-- ===== TRIGONOMETRY EXPANSION TOPICS (B1-B14) ================ -->
                <!-- ============================================================= -->

                <!-- IMPLEMENTATION STATUS: trig_six_functions ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_six_functions">
                    <h3>üî∫ B2. The Six Circular Functions &amp; Fundamental Identities <span class="tier-badge tier-1">‚≠ê Essential</span></h3>
                    <p><em>All six trig functions, reciprocal/quotient/Pythagorean/cofunction identities, ASTC rule.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Six trig functions: sin, cos, tan, csc, sec, cot.</li>
                        <li>Reciprocal identities: csc(Œ∏) = 1/sin(Œ∏), sec(Œ∏) = 1/cos(Œ∏), cot(Œ∏) = 1/tan(Œ∏).</li>
                        <li>Quotient identities: tan(Œ∏) = sin(Œ∏)/cos(Œ∏), cot(Œ∏) = cos(Œ∏)/sin(Œ∏).</li>
                        <li>Three Pythagorean identities:
                            <ol>
                                <li>sin¬≤(Œ∏) + cos¬≤(Œ∏) = 1</li>
                                <li>1 + tan¬≤(Œ∏) = sec¬≤(Œ∏)</li>
                                <li>1 + cot¬≤(Œ∏) = csc¬≤(Œ∏)</li>
                            </ol>
                        </li>
                        <li>Cofunction identities: sin(œÄ/2 ‚àí Œ∏) = cos(Œ∏), etc.</li>
                        <li>Signs by quadrant: ASTC ("All Students Take Calculus").</li>
                    </ul>
                </div>

                <!-- IMPLEMENTATION STATUS: trig_identities_proofs ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_identities_proofs">
                    <h3>üî∫ B3. Trigonometric Identities (Proving &amp; Verifying) <span class="tier-badge tier-1">‚≠ê Essential</span></h3>
                    <p><em>Sum/difference formulas, double-angle, half-angle, power-reducing formulas, proof strategies.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Sum/Difference formulas:
                            <ul>
                                <li>sin(A ¬± B) = sinA¬∑cosB ¬± cosA¬∑sinB</li>
                                <li>cos(A ¬± B) = cosA¬∑cosB ‚àì sinA¬∑sinB</li>
                                <li>tan(A ¬± B) = (tanA ¬± tanB) / (1 ‚àì tanA¬∑tanB)</li>
                            </ul>
                        </li>
                        <li>Double-angle formulas:
                            <ul>
                                <li>sin(2Œ∏) = 2sinŒ∏¬∑cosŒ∏</li>
                                <li>cos(2Œ∏) = cos¬≤Œ∏ ‚àí sin¬≤Œ∏ = 2cos¬≤Œ∏ ‚àí 1 = 1 ‚àí 2sin¬≤Œ∏</li>
                                <li>tan(2Œ∏) = 2tanŒ∏ / (1 ‚àí tan¬≤Œ∏)</li>
                            </ul>
                        </li>
                        <li>Half-angle formulas: sin(Œ∏/2) = ¬±‚àö[(1 ‚àí cosŒ∏)/2], cos(Œ∏/2) = ¬±‚àö[(1 + cosŒ∏)/2].</li>
                        <li>Power-reducing: sin¬≤Œ∏ = (1 ‚àí cos2Œ∏)/2, cos¬≤Œ∏ = (1 + cos2Œ∏)/2.</li>
                        <li>Proof strategies: work one side only, convert everything to sin/cos, factor, use known identities.</li>
                    </ul>
                    <details style="margin-top: var(--space-12);">
                        <summary>üé¥ Yu-Gi-Oh! Connection</summary>
                        <p style="margin-top: var(--space-8); font-size: 0.9rem;">Proving a trig identity is exactly like proving that two different card combos produce the same end result. You have Side A and Side B ‚Äî you can't "move things across the equal sign" (that's like illegally moving cards between zones). Instead, you manipulate one side using known rules (identities = established rulings) until it matches the other.</p>
                    </details>
                </div>

                <!-- IMPLEMENTATION STATUS: trig_inverse_functions ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_inverse_functions">
                    <h3>üî∫ B5. Inverse Trigonometric Functions <span class="tier-badge tier-1">‚≠ê Essential</span></h3>
                    <p><em>arcsin, arccos, arctan domains/ranges, composing trig and inverse trig functions.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>arcsin(x): domain [‚àí1, 1], range [‚àíœÄ/2, œÄ/2].</li>
                        <li>arccos(x): domain [‚àí1, 1], range [0, œÄ].</li>
                        <li>arctan(x): domain (‚àí‚àû, ‚àû), range (‚àíœÄ/2, œÄ/2).</li>
                        <li>These are the "undo" functions: sin(arcsin(x)) = x for x ‚àà [‚àí1, 1].</li>
                        <li>Composing trig and inverse trig functions requires care with domain restrictions.</li>
                        <li>arcsec(x): domain |x| ‚â• 1, range [0, œÄ], excluding œÄ/2.</li>
                    </ul>
                </div>

                <!-- IMPLEMENTATION STATUS: trig_equations ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_equations">
                    <h3>üî∫ B6. Trigonometric Equations &amp; Inequalities <span class="tier-badge tier-1">‚≠ê Essential</span></h3>
                    <p><em>Systematic solving techniques, general solutions with +2œÄk, multi-angle equations, quadratic-type trig equations.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>General solutions:
                            <ul>
                                <li>sin(Œ∏) = k ‚Üí Œ∏ = arcsin(k) + 2œÄn or Œ∏ = œÄ ‚àí arcsin(k) + 2œÄn</li>
                                <li>cos(Œ∏) = k ‚Üí Œ∏ = ¬±arccos(k) + 2œÄn</li>
                                <li>tan(Œ∏) = k ‚Üí Œ∏ = arctan(k) + œÄn</li>
                            </ul>
                        </li>
                        <li>Multi-angle equations: sin(2x) = ‚àö3/2 ‚Üí solve for 2x first, then divide.</li>
                        <li>Quadratic-type: 2cos¬≤x ‚àí cosx ‚àí 1 = 0 ‚Üí factor as (2cosx + 1)(cosx ‚àí 1) = 0.</li>
                        <li>Trig inequalities: solve the equality first, then use sign charts or unit circle to find intervals.</li>
                    </ul>
                </div>

                <!-- IMPLEMENTATION STATUS: trig_angles_measure ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_angles_measure">
                    <h3>üî∫ B1. Angles and Their Measure (Expanded) <span class="tier-badge tier-2">üìó Important</span></h3>
                    <p><em>DMS system, arc length, sector area, circular motion, angular/linear velocity.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>DMS (Degree-Minute-Second): 1¬∞ = 60', 1' = 60".</li>
                        <li>Converting DMS ‚Üî decimal degrees.</li>
                        <li>Complementary angles: sum = 90¬∞. Supplementary angles: sum = 180¬∞.</li>
                        <li>Coterminal angles: differ by multiples of 360¬∞ (or 2œÄ).</li>
                        <li>Arc length: s = rŒ∏ (Œ∏ in radians).</li>
                        <li>Sector area: A = (1/2)r¬≤Œ∏.</li>
                        <li>Linear velocity: v = rœâ (œâ = angular velocity in rad/s).</li>
                    </ul>
                    <h4>Formulas</h4>
                    <div class="equation-box">
                        Arc length: s = rŒ∏<br>
                        Sector area: A = ¬Ωr¬≤Œ∏<br>
                        Angular velocity: œâ = Œ∏/t<br>
                        Linear velocity: v = rœâ
                    </div>
                    <details style="margin-top: var(--space-12);">
                        <summary>üé¥ Yu-Gi-Oh! Connection</summary>
                        <p style="margin-top: var(--space-8); font-size: 0.9rem;">Each game turn in Yu-Gi-Oh! cycles through phases: Draw ‚Üí Standby ‚Üí Main 1 ‚Üí Battle ‚Üí Main 2 ‚Üí End. After a full "revolution" (one complete turn), you're back to Draw Phase ‚Äî that's a coterminal angle. Turn 1's Draw Phase and Turn 3's Draw Phase are coterminal (differ by full revolutions).</p>
                    </details>
                </div>

                <!-- IMPLEMENTATION STATUS: trig_graphs_all_functions ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_graphs_all_functions">
                    <h3>üî∫ B4. Graphs of Trigonometric Functions (Expanded) <span class="tier-badge tier-2">üìó Important</span></h3>
                    <p><em>Graphs of all six trig functions, period/asymptote analysis, transformations.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>y = sin(x) and y = cos(x): period 2œÄ, amplitude 1, smooth waves.</li>
                        <li>y = tan(x): period œÄ, vertical asymptotes at x = œÄ/2 + nœÄ, no amplitude.</li>
                        <li>y = cot(x): period œÄ, vertical asymptotes at x = nœÄ.</li>
                        <li>y = sec(x): period 2œÄ, vertical asymptotes where cos(x) = 0, U-shapes.</li>
                        <li>y = csc(x): period 2œÄ, vertical asymptotes where sin(x) = 0, U-shapes.</li>
                        <li>Transformations: y = A¬∑tan(B(x ‚àí C)) + D ‚Äî period = œÄ/|B|, phase shift = C, vertical shift = D.</li>
                    </ul>
                </div>

                <!-- IMPLEMENTATION STATUS: trig_law_of_sines ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_law_of_sines">
                    <h3>üî∫ B7. Law of Sines <span class="tier-badge tier-2">üìó Important</span></h3>
                    <p><em>AAS/ASA/SSA cases, the ambiguous case (SSA), deriving equations from triangle relationships.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>For any triangle with sides a, b, c opposite angles A, B, C: a/sin(A) = b/sin(B) = c/sin(C).</li>
                        <li>Used when you know: AAS, ASA, or SSA (ambiguous case).</li>
                        <li>Ambiguous case (SSA): zero, one, or two triangles possible.</li>
                        <li>Always check: does the given information yield a valid triangle?</li>
                    </ul>
                    <h4>Formulas</h4>
                    <div class="equation-box">
                        a/sin(A) = b/sin(B) = c/sin(C)<br>
                        Area = ¬Ω ¬∑ a ¬∑ b ¬∑ sin(C)
                    </div>
                </div>

                <!-- IMPLEMENTATION STATUS: trig_law_of_cosines ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_law_of_cosines">
                    <h3>üî∫ B8. Law of Cosines <span class="tier-badge tier-2">üìó Important</span></h3>
                    <p><em>SAS/SSS cases, connection to Pythagorean theorem, finding angles from three sides.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>For any triangle: c¬≤ = a¬≤ + b¬≤ ‚àí 2ab¬∑cos(C).</li>
                        <li>Used when you know: SAS or SSS.</li>
                        <li>Reduces to Pythagorean theorem when C = 90¬∞.</li>
                        <li>Find angles from three sides: cos(C) = (a¬≤ + b¬≤ ‚àí c¬≤)/(2ab).</li>
                    </ul>
                    <h4>Formulas</h4>
                    <div class="equation-box">
                        c¬≤ = a¬≤ + b¬≤ ‚àí 2ab¬∑cos(C)<br>
                        cos(C) = (a¬≤ + b¬≤ ‚àí c¬≤) / (2ab)
                    </div>
                    <details style="margin-top: var(--space-12);">
                        <summary>üé¥ Yu-Gi-Oh! Connection</summary>
                        <p style="margin-top: var(--space-8); font-size: 0.9rem;">Battle damage in Yu-Gi-Oh! involves comparing ATK/DEF values, but imagine a more complex scenario with three interacting monsters (a triangular relationship). The Law of Cosines is like calculating the "effective damage" when two stat values and the "angle" between them (game mechanic interaction) are known.</p>
                    </details>
                </div>

                <!-- IMPLEMENTATION STATUS: trig_polar_coordinates ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_polar_coordinates">
                    <h3>üî∫ B9. Polar Coordinates <span class="tier-badge tier-3">üî¨ Advanced</span></h3>
                    <p><em>Polar ‚Üî Cartesian conversion, multiple representations, polar graphs (cardioids, rose curves, lima√ßons).</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Polar point: (r, Œ∏) where r = distance from origin, Œ∏ = angle from positive x-axis.</li>
                        <li>Conversion: x = r¬∑cos(Œ∏), y = r¬∑sin(Œ∏), r¬≤ = x¬≤ + y¬≤, tan(Œ∏) = y/x.</li>
                        <li>Same point has infinitely many polar representations: (r, Œ∏ + 2œÄk) and (‚àír, Œ∏ + œÄ + 2œÄk).</li>
                        <li>Polar graphs: circles, cardioids, rose curves, lima√ßons, lemniscates.</li>
                        <li>Rose curve r = a¬∑cos(nŒ∏): n petals if n odd, 2n petals if n even.</li>
                    </ul>
                </div>

                <!-- IMPLEMENTATION STATUS: trig_vectors ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_vectors">
                    <h3>üî∫ B10. Vectors <span class="tier-badge tier-3">üî¨ Advanced</span></h3>
                    <p><em>Magnitude, direction, unit vectors, operations, dot product, angle between vectors, projection, work.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>A vector has magnitude and direction: v = ‚ü®a, b‚ü©.</li>
                        <li>Magnitude: ||v|| = ‚àö(a¬≤ + b¬≤). Unit vector: v/||v||.</li>
                        <li>Operations: addition ‚ü®a‚ÇÅ+a‚ÇÇ, b‚ÇÅ+b‚ÇÇ‚ü©, scalar multiplication ‚ü®ca, cb‚ü©.</li>
                        <li>Dot product: v ¬∑ w = a‚ÇÅa‚ÇÇ + b‚ÇÅb‚ÇÇ = ||v|| ||w|| cos(Œ∏).</li>
                        <li>Angle between vectors: cos(Œ∏) = (v ¬∑ w)/(||v|| ||w||).</li>
                        <li>Perpendicular vectors: v ¬∑ w = 0.</li>
                        <li>Projection of v onto w: proj_w(v) = [(v ¬∑ w)/(w ¬∑ w)] ¬∑ w.</li>
                        <li>Work: W = F ¬∑ d = ||F|| ||d|| cos(Œ∏).</li>
                    </ul>
                </div>

                <!-- IMPLEMENTATION STATUS: trig_parametric_equations ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_parametric_equations">
                    <h3>üî∫ B11. Parametric Equations <span class="tier-badge tier-3">üî¨ Advanced</span></h3>
                    <p><em>Parameter elimination, common parametrizations (line, circle, ellipse), orientation.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>System: x = f(t), y = g(t), where t is the parameter.</li>
                        <li>The parameter adds orientation (direction of travel) to a curve.</li>
                        <li>Eliminating the parameter: solve one equation for t, substitute into the other.</li>
                        <li>Common parametrizations:
                            <ul>
                                <li>Line from (x‚ÇÄ,y‚ÇÄ) to (x‚ÇÅ,y‚ÇÅ): x = x‚ÇÄ + (x‚ÇÅ‚àíx‚ÇÄ)t, y = y‚ÇÄ + (y‚ÇÅ‚àíy‚ÇÄ)t, 0 ‚â§ t ‚â§ 1.</li>
                                <li>Circle: x = h + r¬∑cos(t), y = k + r¬∑sin(t), 0 ‚â§ t ‚â§ 2œÄ.</li>
                                <li>Ellipse: x = h + a¬∑cos(t), y = k + b¬∑sin(t).</li>
                            </ul>
                        </li>
                    </ul>
                    <details style="margin-top: var(--space-12);">
                        <summary>üé¥ Yu-Gi-Oh! Connection</summary>
                        <p style="margin-top: var(--space-8); font-size: 0.9rem;">A Yu-Gi-Oh! duel's game state can be described parametrically with "turn number" as parameter t. At each t, LP = f(t), hand size = g(t), field state = h(t). The parameter gives the game an <em>orientation</em> (you can't go backwards), just like parametric equations give a curve a direction. Eliminating the parameter is like summarizing a whole duel replay into just "final LP vs. cards used."</p>
                    </details>
                </div>

                <!-- IMPLEMENTATION STATUS: trig_polar_complex ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_polar_complex">
                    <h3>üî∫ B12. Polar Form of Complex Numbers <span class="tier-badge tier-3">üî¨ Advanced</span></h3>
                    <p><em>Polar representation, multiplication/division in polar form, De Moivre's Theorem, nth roots.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Complex number z = a + bi can be written as z = r(cosŒ∏ + i¬∑sinŒ∏) = r¬∑cis(Œ∏).</li>
                        <li>r = |z| = ‚àö(a¬≤ + b¬≤), Œ∏ = arg(z) = arctan(b/a).</li>
                        <li>Multiplication: r‚ÇÅcis(Œ∏‚ÇÅ) ¬∑ r‚ÇÇcis(Œ∏‚ÇÇ) = r‚ÇÅr‚ÇÇ ¬∑ cis(Œ∏‚ÇÅ + Œ∏‚ÇÇ).</li>
                        <li>Division: (r‚ÇÅ/r‚ÇÇ) ¬∑ cis(Œ∏‚ÇÅ ‚àí Œ∏‚ÇÇ).</li>
                        <li>De Moivre's Theorem: [r¬∑cis(Œ∏)]<sup>n</sup> = r<sup>n</sup> ¬∑ cis(nŒ∏).</li>
                        <li>nth roots of a complex number: n equally-spaced points on a circle of radius r<sup>1/n</sup>.</li>
                    </ul>
                </div>

                <!-- IMPLEMENTATION STATUS: trig_harmonic_motion ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_harmonic_motion">
                    <h3>üî∫ B13. Applications of Sinusoids / Harmonic Motion <span class="tier-badge tier-3">üî¨ Advanced</span></h3>
                    <p><em>Ferris wheels, springs, sound waves, daylight models, fitting sinusoidal models to data.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>S(t) = A¬∑sin(œât ‚àí œÜ) + B models periodic real-world phenomena.</li>
                        <li>Amplitude A: maximum displacement from baseline.</li>
                        <li>Angular frequency œâ = 2œÄ/period. Ordinary frequency f = œâ/(2œÄ).</li>
                        <li>Phase shift: ‚àíœÜ/œâ. Vertical shift (baseline): B.</li>
                        <li>Harmonic motion: x(t) = A¬∑sin(œât + œÜ) models spring/pendulum motion.</li>
                        <li>œâ for a spring: œâ = ‚àö(k/m), where k = spring constant, m = mass.</li>
                        <li>Fitting sinusoidal models: estimate A, B, œâ, œÜ from max/min/period.</li>
                    </ul>
                </div>

                <!-- IMPLEMENTATION STATUS: trig_polar_conics ‚Äì review=done, flashcards=done, quiz=done -->
                <div class="concept-card card-trig-exp" id="topic-trig_polar_conics">
                    <h3>üî∫ B14. Conic Sections in Polar Form / Rotation of Axes <span class="tier-badge tier-3">üî¨ Advanced</span></h3>
                    <p><em>Polar form of conics with eccentricity, rotation of axes to remove xy-term.</em></p>
                    <h4>Key Ideas</h4>
                    <ul>
                        <li>Polar form of conics: r = ed/(1 ¬± e¬∑cos(Œ∏)) or r = ed/(1 ¬± e¬∑sin(Œ∏)).
                            <ul>
                                <li>e &lt; 1: ellipse. e = 1: parabola. e &gt; 1: hyperbola.</li>
                            </ul>
                        </li>
                        <li>Rotation of axes removes the xy-term from Ax¬≤ + Bxy + Cy¬≤ + Dx + Ey + F = 0.</li>
                        <li>Rotation angle: cot(2Œ±) = (A ‚àí C)/B.</li>
                        <li>After rotation: x = XcosŒ± ‚àí YsinŒ±, y = XsinŒ± + YcosŒ±.</li>
                    </ul>
                </div>

            </div>

            <div style="text-align: center; margin-top: var(--space-40);">
                <h2 style="margin-bottom: var(--space-24);">Visual Learning: Sine Wave Animation</h2>
                <div class="animation-visual">
                    <div class="wave">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                </div>
                <p style="color: var(--color-text-secondary); margin-top: var(--space-12);">See how amplitude and period work in oscillatory motion</p>
            </div>
        </div>

        <!-- UNIT CIRCLE TAB -->
        <div id="unit-circle" class="content-section">
            <div style="max-width: 1000px; margin: 0 auto;">
                <h2 style="text-align: center; margin-bottom: var(--space-24); color: var(--color-teal-400); font-size: 2rem;">The Unit Circle</h2>
                
                <div class="concept-card" style="margin-bottom: var(--space-32);">
                    <h3 style="color: var(--color-teal-400);">Understanding the Unit Circle</h3>
                    <p style="font-size: 1.05rem; line-height: 1.8; margin-bottom: var(--space-16);">
                        The unit circle is a circle with radius 1 centered at the origin (0, 0). Every point on it is represented as <strong>(cos Œ∏, sin Œ∏)</strong>, where Œ∏ is the angle measured counterclockwise from the positive x-axis.
                    </p>
                    
                    <div class="info-badge" style="margin-bottom: var(--space-16);">
                        <strong>Key Insight:</strong> The x-coordinate of any point on the unit circle equals cos(Œ∏), and the y-coordinate equals sin(Œ∏).
                    </div>
                    
                    <div style="background: rgba(45, 212, 191, 0.08); padding: var(--space-20); border-radius: var(--radius-base); border: 1px solid rgba(45, 212, 191, 0.3); margin-bottom: var(--space-16);">
                        <h4 style="color: var(--color-teal-400); margin-bottom: var(--space-12);">Converting Between Degrees and Radians</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-24);">
                            <div>
                                <p style="font-size: 0.95rem; color: var(--color-text-secondary);">Radians to Degrees:</p>
                                <div class="equation-box">Degrees = (180/œÄ) √ó Radians</div>
                            </div>
                            <div>
                                <p style="font-size: 0.95rem; color: var(--color-text-secondary);">Degrees to Radians:</p>
                                <div class="equation-box">Radians = (œÄ/180) √ó Degrees</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-badge" style="background: rgba(249, 115, 22, 0.1); border-left-color: var(--color-orange-500); color: var(--color-orange-500);">
                        <strong>üîë Memorize These 4 Key Angles:</strong> 0¬∞, 30¬∞ (œÄ/6), 45¬∞ (œÄ/4), 60¬∞ (œÄ/3), and 90¬∞ (œÄ/2). These appear constantly in calculus!
                    </div>
                </div>

                <h3 style="margin-bottom: var(--space-24); color: var(--color-teal-400); font-size: 1.5rem;">Complete Unit Circle Reference Table</h3>
                <div class="table-responsive">
                    <table style="font-size: 0.95rem;">
                        <thead>
                            <tr>
                                <th>Degrees</th>
                                <th>Radians</th>
                                <th>cos Œ∏</th>
                                <th>sin Œ∏</th>
                                <th>tan Œ∏</th>
                                <th>Quadrant</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="background: rgba(45, 212, 191, 0.1);">
                                <td><strong>0¬∞</strong></td>
                                <td><strong>0</strong></td>
                                <td>1</td>
                                <td>0</td>
                                <td>0</td>
                                <td>Start (Positive x-axis)</td>
                            </tr>
                            <tr style="background: rgba(249, 115, 22, 0.08);">
                                <td><strong>30¬∞</strong></td>
                                <td><strong>œÄ/6</strong></td>
                                <td>‚àö3/2</td>
                                <td>1/2</td>
                                <td>‚àö3/3</td>
                                <td>Quadrant I (Key Angle)</td>
                            </tr>
                            <tr style="background: rgba(249, 115, 22, 0.08);">
                                <td><strong>45¬∞</strong></td>
                                <td><strong>œÄ/4</strong></td>
                                <td>‚àö2/2</td>
                                <td>‚àö2/2</td>
                                <td>1</td>
                                <td>Quadrant I (Key Angle)</td>
                            </tr>
                            <tr style="background: rgba(249, 115, 22, 0.08);">
                                <td><strong>60¬∞</strong></td>
                                <td><strong>œÄ/3</strong></td>
                                <td>1/2</td>
                                <td>‚àö3/2</td>
                                <td>‚àö3</td>
                                <td>Quadrant I (Key Angle)</td>
                            </tr>
                            <tr style="background: rgba(45, 212, 191, 0.1);">
                                <td><strong>90¬∞</strong></td>
                                <td><strong>œÄ/2</strong></td>
                                <td>0</td>
                                <td>1</td>
                                <td>undefined</td>
                                <td>Positive y-axis</td>
                            </tr>
                            <tr>
                                <td>120¬∞</td>
                                <td>2œÄ/3</td>
                                <td>‚àí1/2</td>
                                <td>‚àö3/2</td>
                                <td>‚àí‚àö3</td>
                                <td>Quadrant II</td>
                            </tr>
                            <tr>
                                <td>135¬∞</td>
                                <td>3œÄ/4</td>
                                <td>‚àí‚àö2/2</td>
                                <td>‚àö2/2</td>
                                <td>‚àí1</td>
                                <td>Quadrant II</td>
                            </tr>
                            <tr>
                                <td>150¬∞</td>
                                <td>5œÄ/6</td>
                                <td>‚àí‚àö3/2</td>
                                <td>1/2</td>
                                <td>‚àí‚àö3/3</td>
                                <td>Quadrant II</td>
                            </tr>
                            <tr style="background: rgba(45, 212, 191, 0.1);">
                                <td><strong>180¬∞</strong></td>
                                <td><strong>œÄ</strong></td>
                                <td>‚àí1</td>
                                <td>0</td>
                                <td>0</td>
                                <td>Negative x-axis</td>
                            </tr>
                            <tr>
                                <td>210¬∞</td>
                                <td>7œÄ/6</td>
                                <td>‚àí‚àö3/2</td>
                                <td>‚àí1/2</td>
                                <td>‚àö3/3</td>
                                <td>Quadrant III</td>
                            </tr>
                            <tr>
                                <td>225¬∞</td>
                                <td>5œÄ/4</td>
                                <td>‚àí‚àö2/2</td>
                                <td>‚àí‚àö2/2</td>
                                <td>1</td>
                                <td>Quadrant III</td>
                            </tr>
                            <tr>
                                <td>240¬∞</td>
                                <td>4œÄ/3</td>
                                <td>‚àí1/2</td>
                                <td>‚àí‚àö3/2</td>
                                <td>‚àö3</td>
                                <td>Quadrant III</td>
                            </tr>
                            <tr style="background: rgba(45, 212, 191, 0.1);">
                                <td><strong>270¬∞</strong></td>
                                <td><strong>3œÄ/2</strong></td>
                                <td>0</td>
                                <td>‚àí1</td>
                                <td>undefined</td>
                                <td>Negative y-axis</td>
                            </tr>
                            <tr>
                                <td>300¬∞</td>
                                <td>5œÄ/3</td>
                                <td>1/2</td>
                                <td>‚àí‚àö3/2</td>
                                <td>‚àí‚àö3</td>
                                <td>Quadrant IV</td>
                            </tr>
                            <tr>
                                <td>315¬∞</td>
                                <td>7œÄ/4</td>
                                <td>‚àö2/2</td>
                                <td>‚àí‚àö2/2</td>
                                <td>‚àí1</td>
                                <td>Quadrant IV</td>
                            </tr>
                            <tr>
                                <td>330¬∞</td>
                                <td>11œÄ/6</td>
                                <td>‚àö3/2</td>
                                <td>‚àí1/2</td>
                                <td>‚àí‚àö3/3</td>
                                <td>Quadrant IV</td>
                            </tr>
                            <tr style="background: rgba(45, 212, 191, 0.1);">
                                <td><strong>360¬∞</strong></td>
                                <td><strong>2œÄ</strong></td>
                                <td>1</td>
                                <td>0</td>
                                <td>0</td>
                                <td>Back to Start</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="concept-card" style="margin-top: var(--space-32);">
                    <h3 style="color: var(--color-teal-400);">Key Patterns to Remember</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-24);">
                        <div>
                            <h4 style="color: var(--color-text); margin-bottom: var(--space-12);">üìê Quadrant I (0¬∞ to 90¬∞)</h4>
                            <p style="font-size: 0.95rem; line-height: 1.6; color: var(--color-text-secondary);">All trig functions are <strong style="color: var(--color-green-500);">positive</strong>. This is where the key angles live!</p>
                        </div>
                        <div>
                            <h4 style="color: var(--color-text); margin-bottom: var(--space-12);">‚ö†Ô∏è Other Quadrants</h4>
                            <p style="font-size: 0.95rem; line-height: 1.6; color: var(--color-text-secondary);"><strong>QII:</strong> sin positive, cos/tan negative | <strong>QIII:</strong> tan positive, sin/cos negative | <strong>QIV:</strong> cos positive, sin/tan negative</p>
                        </div>
                    </div>
                    
                    <div class="info-badge" style="margin-top: var(--space-20); background: rgba(34, 197, 94, 0.1); border-left-color: var(--color-green-500); color: var(--color-green-500);">
                        <strong>üí° Study Tip:</strong> Focus on Quadrant I first. The other quadrants use reference angles to find the same values with different signs. Once you master the key angles (30¬∞, 45¬∞, 60¬∞), you can figure out almost any angle!
                    </div>
                </div>
            </div>
        </div>

        <!-- FLASHCARDS TAB -->
        <div id="flashcards" class="content-section">
            <div style="text-align: center; margin-bottom: var(--space-16);">
                <label for="flashcardTopicSelect" style="color: var(--color-text-secondary); margin-right: var(--space-8);">Filter by topic:</label>
                <select id="flashcardTopicSelect" onchange="filterFlashcards(this.value)" style="padding: 6px 12px; border-radius: 8px; background: var(--color-surface); color: var(--color-text-primary); border: 1px solid var(--color-border); font-size: 0.95rem;">
                    <option value="">All Topics</option>
                    <option value="_legacy_precalc">‚Äî Original Pre-Calc Cards ‚Äî</option>
                    <option value="_legacy_calculus">‚Äî Original Calculus Cards ‚Äî</option>
                    <optgroup label="Precalculus (Expanded)">
                        <option value="precalc_domain_range">A1. Domain &amp; Range</option>
                        <option value="precalc_rates_of_change">A2. Rates of Change</option>
                        <option value="precalc_composition">A3. Function Composition</option>
                        <option value="precalc_linear_functions">A4. Linear Functions</option>
                        <option value="precalc_polynomials_deep">A5. Polynomials (Deep)</option>
                        <option value="precalc_quadratics_expanded">A6. Quadratics (Expanded)</option>
                        <option value="precalc_factor_remainder">A7. Factor &amp; Remainder</option>
                        <option value="precalc_real_zeros">A8. Real Zeros</option>
                        <option value="precalc_complex_zeros">A9. Complex Zeros</option>
                        <option value="precalc_rational_functions_deep">A10. Rational Functions (Deep)</option>
                        <option value="precalc_inverses_radicals">A11. Inverses &amp; Radicals</option>
                        <option value="precalc_exponential_models">A12. Exponential (Expanded)</option>
                        <option value="precalc_logarithmic_models">A13. Logarithmic (Expanded)</option>
                    </optgroup>
                    <optgroup label="Trigonometry (Expanded)">
                        <option value="trig_angles_measure">B1. Angles &amp; Measure</option>
                        <option value="trig_six_functions">B2. Six Trig Functions</option>
                        <option value="trig_identities_proofs">B3. Trig Identities (Proofs)</option>
                        <option value="trig_graphs_all_functions">B4. Trig Graphs (All)</option>
                        <option value="trig_inverse_functions">B5. Inverse Trig Functions</option>
                        <option value="trig_equations">B6. Trig Equations</option>
                        <option value="trig_law_of_sines">B7. Law of Sines</option>
                        <option value="trig_law_of_cosines">B8. Law of Cosines</option>
                        <option value="trig_polar_coordinates">B9. Polar Coordinates</option>
                        <option value="trig_vectors">B10. Vectors</option>
                        <option value="trig_parametric_equations">B11. Parametric Equations</option>
                        <option value="trig_polar_complex">B12. Polar Complex Numbers</option>
                        <option value="trig_harmonic_motion">B13. Harmonic Motion</option>
                        <option value="trig_polar_conics">B14. Polar Conics</option>
                    </optgroup>
                </select>
            </div>

            <div class="flashcard-container">
                <div id="currentFlashcard" class="flashcard" onclick="toggleFlashcard()">
                    <span class="flashcard-label"><span id="cardIndex">1</span> / <span id="cardTotal">10</span></span>
                    <div class="flashcard-question" id="questionText">What is the core relationship between exponentials and logarithms?</div>
                    <div class="flashcard-answer" id="answerText" style="display: none;">a<sup>x</sup> = y  ‚ü∫  log<sub>a</sub>(y) = x (they are inverses‚Äîthey undo each other)</div>
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-secondary btn-small" onclick="previousCard()">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="toggleFlashcard()">Flip Card</button>
                <button class="btn btn-secondary btn-small" onclick="nextCard()">Next ‚Üí</button>
            </div>

            <div style="text-align: center;">
                <p style="color: var(--color-text-secondary); margin-bottom: var(--space-16);">Click the card or use the Flip button to reveal answers</p>
                <button class="btn btn-primary" onclick="shuffleCards()">üîÄ Shuffle Deck</button>
            </div>
        </div>

        <!-- QUIZ TAB -->
        <div id="quiz" class="content-section">
            <div style="text-align: center; margin-bottom: var(--space-16);">
                <label for="quizTopicSelect" style="color: var(--color-text-secondary); margin-right: var(--space-8);">Quiz topic:</label>
                <select id="quizTopicSelect" onchange="setQuizTopic(this.value)" style="padding: 6px 12px; border-radius: 8px; background: var(--color-surface); color: var(--color-text-primary); border: 1px solid var(--color-border); font-size: 0.95rem;">
                    <option value="">All Topics (random 10)</option>
                    <option value="_legacy_precalc">‚Äî Original Pre-Calc ‚Äî</option>
                    <option value="_legacy_calculus">‚Äî Original Calculus ‚Äî</option>
                    <optgroup label="Precalculus (Expanded)">
                        <option value="precalc_domain_range">A1. Domain &amp; Range</option>
                        <option value="precalc_rates_of_change">A2. Rates of Change</option>
                        <option value="precalc_composition">A3. Function Composition</option>
                        <option value="precalc_linear_functions">A4. Linear Functions</option>
                        <option value="precalc_polynomials_deep">A5. Polynomials (Deep)</option>
                        <option value="precalc_quadratics_expanded">A6. Quadratics (Expanded)</option>
                        <option value="precalc_factor_remainder">A7. Factor &amp; Remainder</option>
                        <option value="precalc_real_zeros">A8. Real Zeros</option>
                        <option value="precalc_complex_zeros">A9. Complex Zeros</option>
                        <option value="precalc_rational_functions_deep">A10. Rational Functions (Deep)</option>
                        <option value="precalc_inverses_radicals">A11. Inverses &amp; Radicals</option>
                        <option value="precalc_exponential_models">A12. Exponential (Expanded)</option>
                        <option value="precalc_logarithmic_models">A13. Logarithmic (Expanded)</option>
                    </optgroup>
                    <optgroup label="Trigonometry (Expanded)">
                        <option value="trig_angles_measure">B1. Angles &amp; Measure</option>
                        <option value="trig_six_functions">B2. Six Trig Functions</option>
                        <option value="trig_identities_proofs">B3. Trig Identities (Proofs)</option>
                        <option value="trig_graphs_all_functions">B4. Trig Graphs (All)</option>
                        <option value="trig_inverse_functions">B5. Inverse Trig Functions</option>
                        <option value="trig_equations">B6. Trig Equations</option>
                        <option value="trig_law_of_sines">B7. Law of Sines</option>
                        <option value="trig_law_of_cosines">B8. Law of Cosines</option>
                        <option value="trig_polar_coordinates">B9. Polar Coordinates</option>
                        <option value="trig_vectors">B10. Vectors</option>
                        <option value="trig_parametric_equations">B11. Parametric Equations</option>
                        <option value="trig_polar_complex">B12. Polar Complex Numbers</option>
                        <option value="trig_harmonic_motion">B13. Harmonic Motion</option>
                        <option value="trig_polar_conics">B14. Polar Conics</option>
                    </optgroup>
                </select>
            </div>

            <div class="quiz-container">
                <div id="quizContent"></div>
            </div>
        </div>
    </div>

    <script>
        // ===== TOPICS REGISTRY (Expansion Plan) =====
        const TOPICS = [
          // --- Precalculus (A1-A13) ---
          { id: 'precalc_domain_range',           label: 'Domain & Range',                         tier: 1, section: 'Precalculus' },
          { id: 'precalc_composition',             label: 'Function Composition',                   tier: 1, section: 'Precalculus' },
          { id: 'precalc_polynomials_deep',        label: 'Polynomials (Deep Dive)',                tier: 1, section: 'Precalculus' },
          { id: 'precalc_quadratics_expanded',     label: 'Quadratics (Expanded)',                  tier: 1, section: 'Precalculus' },
          { id: 'precalc_factor_remainder',        label: 'Factor & Remainder Theorem',             tier: 1, section: 'Precalculus' },
          { id: 'precalc_rates_of_change',         label: 'Rates of Change & Graph Behavior',       tier: 2, section: 'Precalculus' },
          { id: 'precalc_linear_functions',        label: 'Linear Functions (Detailed)',             tier: 2, section: 'Precalculus' },
          { id: 'precalc_real_zeros',              label: 'Real Zeros of Polynomials',              tier: 2, section: 'Precalculus' },
          { id: 'precalc_complex_zeros',           label: 'Complex Zeros',                          tier: 2, section: 'Precalculus' },
          { id: 'precalc_rational_functions_deep', label: 'Rational Functions (Deep Dive)',          tier: 2, section: 'Precalculus' },
          { id: 'precalc_exponential_models',      label: 'Exponential Functions (Expanded)',        tier: 2, section: 'Precalculus' },
          { id: 'precalc_logarithmic_models',      label: 'Logarithmic Functions (Expanded)',        tier: 2, section: 'Precalculus' },
          { id: 'precalc_inverses_radicals',       label: 'Inverses & Radical Functions',            tier: 3, section: 'Precalculus' },
          // --- Trigonometry (B1-B14) ---
          { id: 'trig_six_functions',              label: 'Six Trig Functions & Identities',        tier: 1, section: 'Trigonometry' },
          { id: 'trig_identities_proofs',          label: 'Trig Identities (Proving)',               tier: 1, section: 'Trigonometry' },
          { id: 'trig_inverse_functions',          label: 'Inverse Trig Functions',                 tier: 1, section: 'Trigonometry' },
          { id: 'trig_equations',                  label: 'Trig Equations & Inequalities',          tier: 1, section: 'Trigonometry' },
          { id: 'trig_angles_measure',             label: 'Angles & Their Measure',                 tier: 2, section: 'Trigonometry' },
          { id: 'trig_graphs_all_functions',       label: 'Graphs of Trig Functions',               tier: 2, section: 'Trigonometry' },
          { id: 'trig_law_of_sines',              label: 'Law of Sines',                           tier: 2, section: 'Trigonometry' },
          { id: 'trig_law_of_cosines',            label: 'Law of Cosines',                         tier: 2, section: 'Trigonometry' },
          { id: 'trig_polar_coordinates',          label: 'Polar Coordinates',                      tier: 3, section: 'Trigonometry' },
          { id: 'trig_vectors',                    label: 'Vectors',                                tier: 3, section: 'Trigonometry' },
          { id: 'trig_parametric_equations',       label: 'Parametric Equations',                   tier: 3, section: 'Trigonometry' },
          { id: 'trig_polar_complex',              label: 'Polar Form of Complex Numbers',          tier: 3, section: 'Trigonometry' },
          { id: 'trig_harmonic_motion',            label: 'Harmonic Motion / Sinusoid Apps',        tier: 3, section: 'Trigonometry' },
          { id: 'trig_polar_conics',               label: 'Conic Sections in Polar Form',           tier: 3, section: 'Trigonometry' },
        ];

        // ===== FLASHCARDS DATA (consolidated from flashcards-data.js) =====
        const FLASHCARDS = [

    // ==================== FUNCTIONS (4 cards) ====================
    { topic: 'functions', q: 'What does f(a + h) mean?', a: 'Replace every <em>x</em> in the function rule with <strong>(a + h)</strong>, keeping the parentheses. For example, if f(x) = x<sup>2</sup>, then f(a + h) = (a + h)<sup>2</sup> = a<sup>2</sup> + 2ah + h<sup>2</sup>.' },
    { topic: 'functions', q: 'What three things restrict the domain of a function?', a: '1. <strong>Division by zero</strong> ‚Äî denominator ‚â† 0.<br>2. <strong>Even roots of negatives</strong> ‚Äî value under the root ‚â• 0.<br>3. <strong>Logarithms of non-positives</strong> ‚Äî argument &gt; 0.' },
    { topic: 'functions', q: 'How do you evaluate the composition (f ‚àò g)(x)?', a: '(f ‚àò g)(x) = f(g(x)). First evaluate g(x), then plug that result into f. The domain is all x in the domain of g such that g(x) is in the domain of f.' },
    { topic: 'functions', q: 'What is the difference between domain and range?', a: '<strong>Domain</strong> = set of all valid input (x) values.<br><strong>Range</strong> = set of all possible output (y) values the function can produce.' },

    // ==================== EXPONENTIALS (4 cards) ====================
    { topic: 'exponentials', q: 'State the core relationship between exponentials and logarithms.', a: 'a<sup>x</sup> = y &nbsp;‚ü∫&nbsp; log<sub>a</sub>(y) = x. They are inverse operations ‚Äî they undo each other.' },
    { topic: 'exponentials', q: 'State all three logarithm properties (product, quotient, power).', a: 'Product: log(MN) = log(M) + log(N)<br>Quotient: log(M/N) = log(M) ‚àí log(N)<br>Power: log(M<sup>k</sup>) = k ¬∑ log(M)' },
    { topic: 'exponentials', q: 'What is the change of base formula?', a: 'log<sub>a</sub>(M) = ln(M) / ln(a). This lets you evaluate any log base using only the natural log (ln) button on your calculator.' },
    { topic: 'exponentials', q: 'State three key log/exp values you must memorize.', a: 'ln(1) = 0 &nbsp;|&nbsp; ln(e) = 1 &nbsp;|&nbsp; e<sup>ln(x)</sup> = x. Also: log<sub>a</sub>(1) = 0 and log<sub>a</sub>(a) = 1 for any valid base a.' },

    // ==================== TRIGONOMETRY (4 cards) ====================
    { topic: 'trigonometry', q: 'State the Pythagorean identity.', a: 'sin<sup>2</sup>(x) + cos<sup>2</sup>(x) = 1. This is the most fundamental trig identity and is used constantly in calculus.' },
    { topic: 'trigonometry', q: 'State both double-angle formulas for sin(2x) and cos(2x).', a: 'sin(2x) = 2 sin(x) cos(x)<br>cos(2x) = cos<sup>2</sup>(x) ‚àí sin<sup>2</sup>(x) = 2cos<sup>2</sup>(x) ‚àí 1 = 1 ‚àí 2sin<sup>2</sup>(x)' },
    { topic: 'trigonometry', q: 'Which trig functions are even and which are odd?', a: '<strong>Even:</strong> cos(‚àíx) = cos(x), sec(‚àíx) = sec(x).<br><strong>Odd:</strong> sin(‚àíx) = ‚àísin(x), tan(‚àíx) = ‚àítan(x), csc(‚àíx) = ‚àícsc(x), cot(‚àíx) = ‚àícot(x).' },
    { topic: 'trigonometry', q: 'Express tan(x) and the two other Pythagorean identities.', a: 'tan(x) = sin(x)/cos(x)<br>1 + tan<sup>2</sup>(x) = sec<sup>2</sup>(x)<br>1 + cot<sup>2</sup>(x) = csc<sup>2</sup>(x)' },

    // ==================== UNIT CIRCLE (4 cards) ====================
    { topic: 'unit-circle', q: 'What are cos(œÄ/6) and sin(œÄ/6)?', a: 'cos(œÄ/6) = ‚àö3/2 &nbsp;and&nbsp; sin(œÄ/6) = 1/2. (30¬∞ angle ‚Äî the cosine is the larger value.)' },
    { topic: 'unit-circle', q: 'What are cos(œÄ/4) and sin(œÄ/4)?', a: 'cos(œÄ/4) = ‚àö2/2 &nbsp;and&nbsp; sin(œÄ/4) = ‚àö2/2. (45¬∞ angle ‚Äî both coordinates are equal.)' },
    { topic: 'unit-circle', q: 'Which trig functions are positive in each quadrant?', a: '<strong>QI:</strong> All positive &nbsp;|&nbsp; <strong>QII:</strong> sin, csc &nbsp;|&nbsp; <strong>QIII:</strong> tan, cot &nbsp;|&nbsp; <strong>QIV:</strong> cos, sec. Mnemonic: <em>All Students Take Calculus</em>.' },
    { topic: 'unit-circle', q: 'How do you convert between degrees and radians?', a: 'Degrees ‚Üí Radians: multiply by œÄ/180.<br>Radians ‚Üí Degrees: multiply by 180/œÄ.<br>Example: 60¬∞ √ó (œÄ/180) = œÄ/3.' },

    // ==================== SINUSOIDAL (3 cards) ====================
    { topic: 'sinusoidal', q: 'In y = A ¬∑ sin(bx + c) + D, what does each parameter control?', a: '<strong>A</strong> = amplitude (vertical stretch).<br><strong>b</strong> = frequency; period = 2œÄ/b.<br><strong>c</strong> = phase constant; phase shift = ‚àíc/b (horizontal shift).<br><strong>D</strong> = vertical shift (midline y = D).' },
    { topic: 'sinusoidal', q: 'How do you find the period of y = 3 sin(2x) ‚àí 5?', a: 'Period = 2œÄ/b = 2œÄ/2 = <strong>œÄ</strong>. The amplitude is 3 and the midline is y = ‚àí5, but only b affects the period.' },
    { topic: 'sinusoidal', q: 'How do you find amplitude from a graph showing max and min values?', a: 'Amplitude = (max ‚àí min) / 2. The midline is D = (max + min) / 2. For example, if max = 8 and min = 2, then A = 3 and D = 5.' },

    // ==================== POLYNOMIALS (3 cards) ====================
    { topic: 'polynomials', q: 'How does the degree and leading coefficient determine end behavior?', a: '<strong>Even degree, positive lead:</strong> both ends ‚Üí +‚àû.<br><strong>Even degree, negative lead:</strong> both ends ‚Üí ‚àí‚àû.<br><strong>Odd degree, positive lead:</strong> left ‚Üí ‚àí‚àû, right ‚Üí +‚àû.<br><strong>Odd degree, negative lead:</strong> left ‚Üí +‚àû, right ‚Üí ‚àí‚àû.' },
    { topic: 'polynomials', q: 'How do you find the horizontal asymptote of a rational function P(x)/Q(x)?', a: 'Compare degrees: deg(P) &lt; deg(Q) ‚Üí y = 0.<br>deg(P) = deg(Q) ‚Üí y = ratio of leading coefficients.<br>deg(P) &gt; deg(Q) ‚Üí no horizontal asymptote (oblique or none).' },
    { topic: 'polynomials', q: 'How do you find vertical asymptotes of a rational function?', a: 'Set the denominator equal to zero and solve. Each solution x = a is a vertical asymptote <em>only if</em> the numerator is not also zero at x = a (otherwise it may be a hole).' },

    // ==================== ALGEBRA SKILLS (4 cards) ====================
    { topic: 'algebra-skills', q: 'State the difference of squares and sum/difference of cubes patterns.', a: 'a<sup>2</sup> ‚àí b<sup>2</sup> = (a + b)(a ‚àí b)<br>a<sup>3</sup> + b<sup>3</sup> = (a + b)(a<sup>2</sup> ‚àí ab + b<sup>2</sup>)<br>a<sup>3</sup> ‚àí b<sup>3</sup> = (a ‚àí b)(a<sup>2</sup> + ab + b<sup>2</sup>)' },
    { topic: 'algebra-skills', q: 'State the quadratic formula and explain the discriminant.', a: 'x = (‚àíb ¬± ‚àö(b<sup>2</sup> ‚àí 4ac)) / (2a).<br>Discriminant Œî = b<sup>2</sup> ‚àí 4ac:<br>Œî &gt; 0 ‚Üí two distinct real roots.<br>Œî = 0 ‚Üí one repeated real root.<br>Œî &lt; 0 ‚Üí no real roots (two complex roots).' },
    { topic: 'algebra-skills', q: 'What are the steps to complete the square for x<sup>2</sup> + bx?', a: 'Take half of b, square it, then add and subtract: x<sup>2</sup> + bx = (x + b/2)<sup>2</sup> ‚àí (b/2)<sup>2</sup>. Example: x<sup>2</sup> + 6x = (x + 3)<sup>2</sup> ‚àí 9.' },
    { topic: 'algebra-skills', q: 'How do you rationalize a denominator with a binomial radical like 1/(‚àöa + b)?', a: 'Multiply numerator and denominator by the <strong>conjugate</strong> (‚àöa ‚àí b):<br>1/(‚àöa + b) ¬∑ (‚àöa ‚àí b)/(‚àöa ‚àí b) = (‚àöa ‚àí b)/(a ‚àí b<sup>2</sup>).' },

    // ==================== LINES (3 cards) ====================
    { topic: 'lines', q: 'State the slope formula and the three main forms of a line.', a: 'Slope: m = (y<sub>2</sub> ‚àí y<sub>1</sub>) / (x<sub>2</sub> ‚àí x<sub>1</sub>).<br><strong>Slope-intercept:</strong> y = mx + b.<br><strong>Point-slope:</strong> y ‚àí y<sub>1</sub> = m(x ‚àí x<sub>1</sub>).<br><strong>Standard:</strong> Ax + By = C.' },
    { topic: 'lines', q: 'What is the relationship between slopes of parallel and perpendicular lines?', a: '<strong>Parallel lines:</strong> same slope (m<sub>1</sub> = m<sub>2</sub>).<br><strong>Perpendicular lines:</strong> slopes are negative reciprocals (m<sub>1</sub> ¬∑ m<sub>2</sub> = ‚àí1). Example: if m = 2, the perpendicular slope is ‚àí1/2.' },
    { topic: 'lines', q: 'What does a slope of zero vs. an undefined slope look like?', a: 'Slope = 0 ‚Üí <strong>horizontal line</strong> (y = constant).<br>Slope undefined ‚Üí <strong>vertical line</strong> (x = constant). A vertical line is NOT a function.' },

    // ==================== ABSOLUTE VALUE & PIECEWISE (3 cards) ====================
    { topic: 'absolute-piecewise', q: 'State the formal definition of |x|.', a: '|x| = x if x ‚â• 0, and |x| = ‚àíx if x &lt; 0. Absolute value gives the distance from zero, so the result is always ‚â• 0.' },
    { topic: 'absolute-piecewise', q: 'How do you solve |expression| = k?', a: 'If k &gt; 0: set up two equations: expression = k OR expression = ‚àík, then solve both.<br>If k = 0: expression = 0.<br>If k &lt; 0: no solution (absolute value cannot be negative).' },
    { topic: 'absolute-piecewise', q: 'How do you solve |expression| &lt; k (where k &gt; 0)?', a: 'Rewrite as a compound inequality: ‚àík &lt; expression &lt; k, then solve for x. For |expression| &gt; k, split into: expression &lt; ‚àík OR expression &gt; k.' },

    // ==================== INVERSES (3 cards) ====================
    { topic: 'inverses', q: 'What is the definition of an inverse function?', a: 'f and g are inverses if f(g(x)) = x and g(f(x)) = x for all x in their respective domains. The domain of f becomes the range of f<sup>‚àí1</sup>, and vice versa.' },
    { topic: 'inverses', q: 'What are the steps to find an inverse function algebraically?', a: '1. Write y = f(x).<br>2. Swap x and y.<br>3. Solve for y.<br>4. Write the result as f<sup>‚àí1</sup>(x) = ... <br>5. Verify: check that f(f<sup>‚àí1</sup>(x)) = x.' },
    { topic: 'inverses', q: 'How are the graphs of f and f<sup>‚àí1</sup> related?', a: 'The graph of f<sup>‚àí1</sup> is the <strong>reflection of f across the line y = x</strong>. Every point (a, b) on f corresponds to point (b, a) on f<sup>‚àí1</sup>.' },

    // ==================== TRANSFORMATIONS (4 cards) ====================
    { topic: 'transformations', q: 'What does y = f(x) + k do to the graph? What about y = f(x + h)?', a: 'y = f(x) + k shifts the graph <strong>up</strong> by k (down if k &lt; 0).<br>y = f(x + h) shifts the graph <strong>left</strong> by h (right if h &lt; 0). Remember: horizontal shifts go opposite to the sign.' },
    { topic: 'transformations', q: 'How do vertical and horizontal stretches/compressions work?', a: 'y = a ¬∑ f(x): vertical stretch by factor |a| (if |a| &gt; 1) or compression (if 0 &lt; |a| &lt; 1).<br>y = f(bx): horizontal compression by factor 1/|b| (if |b| &gt; 1) or stretch by factor 1/|b| (if 0 &lt; |b| &lt; 1). Horizontal transformations act opposite to what the number suggests.' },
    { topic: 'transformations', q: 'What do y = ‚àíf(x) and y = f(‚àíx) do?', a: 'y = ‚àíf(x) reflects across the <strong>x-axis</strong> (flip vertically).<br>y = f(‚àíx) reflects across the <strong>y-axis</strong> (flip horizontally).' },
    { topic: 'transformations', q: 'In what order should you apply multiple transformations?', a: '1. Horizontal stretch/compression and reflection (inside the function).<br>2. Horizontal shift.<br>3. Vertical stretch/compression and reflection.<br>4. Vertical shift (outside the function).' },

    // ==================== INEQUALITIES (3 cards) ====================
    { topic: 'inequalities', q: 'What critical rule must you remember when solving inequalities?', a: 'When you <strong>multiply or divide both sides by a negative number</strong>, you must <strong>flip the inequality sign</strong>. Example: ‚àí2x &gt; 6 becomes x &lt; ‚àí3.' },
    { topic: 'inequalities', q: 'How does the sign chart method work for polynomial/rational inequalities?', a: '1. Move everything to one side (compare to 0).<br>2. Factor completely and find all zeros/undefined points.<br>3. Plot them on a number line, creating intervals.<br>4. Test a value in each interval to determine the sign.<br>5. Select intervals that satisfy the inequality.' },
    { topic: 'inequalities', q: 'How do you write solutions in interval notation?', a: 'Use ( ) for strict inequalities (&lt;, &gt;) and [ ] for inclusive (‚â§, ‚â•). Use ‚àû and ‚àí‚àû always with parentheses. Example: ‚àí3 ‚â§ x &lt; 5 is written [‚àí3, 5). Union: use ‚à™ for disjoint intervals.' },

    // ==================== SEQUENCES (4 cards) ====================
    { topic: 'sequences', q: 'State the formulas for the n-th term and sum of an arithmetic sequence.', a: 'n-th term: a<sub>n</sub> = a<sub>1</sub> + (n ‚àí 1)d, where d is the common difference.<br>Sum of first n terms: S<sub>n</sub> = n(a<sub>1</sub> + a<sub>n</sub>) / 2.' },
    { topic: 'sequences', q: 'State the formulas for the n-th term and sum of a geometric sequence.', a: 'n-th term: a<sub>n</sub> = a<sub>1</sub> ¬∑ r<sup>n‚àí1</sup>, where r is the common ratio.<br>Sum of first n terms: S<sub>n</sub> = a<sub>1</sub>(1 ‚àí r<sup>n</sup>) / (1 ‚àí r), for r ‚â† 1.' },
    { topic: 'sequences', q: 'What is the formula for an infinite geometric series, and when does it converge?', a: 'S = a<sub>1</sub> / (1 ‚àí r), valid only when |r| &lt; 1. If |r| ‚â• 1, the series diverges (sum does not exist).' },
    { topic: 'sequences', q: 'How do you determine if a sequence is arithmetic vs. geometric?', a: '<strong>Arithmetic:</strong> consecutive terms have a constant <em>difference</em> (a<sub>n+1</sub> ‚àí a<sub>n</sub> = d).<br><strong>Geometric:</strong> consecutive terms have a constant <em>ratio</em> (a<sub>n+1</sub> / a<sub>n</sub> = r).' },

    // ==================== LIMITS (3 cards) ====================
    { topic: 'limits', q: 'What does lim(x‚Üía) f(x) = L mean intuitively?', a: 'As x gets arbitrarily close to a (from both sides), f(x) gets arbitrarily close to L. The function does <em>not</em> need to be defined at x = a ‚Äî only the behavior <em>near</em> a matters.' },
    { topic: 'limits', q: 'What are the common indeterminate forms, and what do you do about 0/0?', a: 'Common indeterminate forms: 0/0 and ‚àû/‚àû. For 0/0: try factoring, rationalizing (multiply by conjugate), or simplifying. The goal is to cancel the common factor causing 0/0, then substitute again.' },
    { topic: 'limits', q: 'How do you find the limit of a polynomial as x ‚Üí c?', a: 'For polynomials (and most "nice" functions), simply <strong>substitute</strong>: lim(x‚Üíc) p(x) = p(c). This works because polynomials are continuous everywhere ‚Äî direct substitution is the first technique to try.' },

    // ==================== COMMON MISTAKES (3 cards) ====================
    { topic: 'common-mistakes', q: 'Why is ln(a + b) ‚â† ln(a) + ln(b)?', a: 'The log product rule says ln(a ¬∑ b) = ln(a) + ln(b) ‚Äî it requires <strong>multiplication</strong> inside, not addition. There is no simplification rule for the log of a sum.' },
    { topic: 'common-mistakes', q: 'What is the correct expansion of (a + b)<sup>2</sup>?', a: '(a + b)<sup>2</sup> = a<sup>2</sup> + <strong>2ab</strong> + b<sup>2</sup>. Common mistake: writing a<sup>2</sup> + b<sup>2</sup> and forgetting the cross term 2ab.' },
    { topic: 'common-mistakes', q: 'Is ‚àö(a<sup>2</sup> + b<sup>2</sup>) equal to a + b?', a: '<strong>No!</strong> ‚àö(a<sup>2</sup> + b<sup>2</sup>) ‚â† a + b. You cannot "distribute" a square root over addition. For example, ‚àö(9 + 16) = ‚àö25 = 5, but 3 + 4 = 7.' },

    // ==================== CALCULATOR (3 cards) ====================
    { topic: 'calculator', q: 'When should your calculator be in radian mode vs. degree mode?', a: 'Use <strong>radian mode</strong> for all calculus and most precalc problems (especially when angles involve œÄ). Use <strong>degree mode</strong> only when the problem specifically gives angles in degrees. Always check before evaluating trig functions!' },
    { topic: 'calculator', q: 'How do you compute log base 5 of 20 on a calculator that only has ln?', a: 'Use the change of base formula: log<sub>5</sub>(20) = ln(20) / ln(5) ‚âà 2.9957 / 1.6094 ‚âà 1.861. Many calculators also have a logBASE function: look for log<sub>a</sub>(x) or logBASE.' },
    { topic: 'calculator', q: 'What is a common calculator pitfall with negative numbers and exponents?', a: 'Entering ‚àí3<sup>2</sup> as <code>-3^2</code> gives ‚àí9 (exponent first, then negation). To square negative three, you must use parentheses: <code>(-3)^2</code> = 9. Always parenthesize negative bases.' },

    // ==================== CALCULUS: LIMITS (7 cards) ====================
    { topic: 'calc-limits', q: 'What is the limit of f(x) = 3x¬≤ ‚àí 2x + 1 as x approaches 2?', a: 'Substitute x = 2: f(2) = 3(4) ‚àí 2(2) + 1 = 12 ‚àí 4 + 1 = <strong>9</strong>. Polynomials are continuous, so direct substitution works.' },
    { topic: 'calc-limits', q: 'What is the value of lim(x‚Üí0) sin(x)/x?', a: 'This is a fundamental limit: lim(x‚Üí0) sin(x)/x = <strong>1</strong>. This result is used frequently in calculus, especially when finding derivatives of trig functions.' },
    { topic: 'calc-limits', q: 'What is the limit of (x¬≤ ‚àí 4)/(x ‚àí 2) as x approaches 2?', a: 'Factor the numerator: (x + 2)(x ‚àí 2)/(x ‚àí 2) = x + 2. At x = 2: 2 + 2 = <strong>4</strong>. Cancel the common factor before substituting.' },
    { topic: 'calc-limits', q: 'What is the value of lim(x‚Üí‚àû) (2x¬≤ + 3x)/(x¬≤ + 1)?', a: 'When degrees are equal, the limit is the ratio of leading coefficients: 2/1 = <strong>2</strong>. Divide every term by x¬≤ to see why.' },
    { topic: 'calc-limits', q: 'What is the limit of 1/x as x approaches infinity?', a: 'As x grows without bound, 1/x shrinks toward <strong>0</strong>. This is a foundational limit: lim(x‚Üí‚àû) 1/x = 0.' },
    { topic: 'calc-limits', q: 'What is the value of lim(x‚Üí3) (x¬≤ ‚àí 9)/(x ‚àí 3)?', a: 'Factor: (x + 3)(x ‚àí 3)/(x ‚àí 3) = x + 3. At x = 3: 3 + 3 = <strong>6</strong>. The 0/0 indeterminate form resolves after cancellation.' },
    { topic: 'calc-limits', q: 'What is the limit of e<sup>x</sup> as x approaches negative infinity?', a: 'As x ‚Üí ‚àí‚àû, e<sup>x</sup> ‚Üí <strong>0</strong>. The exponential function approaches zero from the positive side but never reaches it.' },

    // ==================== CALCULUS: DERIVATIVES (10 cards) ====================
    { topic: 'calc-derivatives', q: 'What is the derivative of f(x) = x¬≥?', a: 'Power rule: bring down the exponent and subtract 1.<br>f\'(x) = 3x<sup>3‚àí1</sup> = <strong>3x<sup>2</sup></strong>.' },
    { topic: 'calc-derivatives', q: 'What is the derivative of f(x) = sin(x)?', a: 'f\'(x) = <strong>cos(x)</strong>. This is a fundamental derivative to memorize.' },
    { topic: 'calc-derivatives', q: 'What is the derivative of f(x) = e<sup>x</sup>?', a: 'f\'(x) = <strong>e<sup>x</sup></strong>. The exponential function is its own derivative ‚Äî one of the most remarkable facts in calculus.' },
    { topic: 'calc-derivatives', q: 'What is the derivative of f(x) = ln(x)?', a: 'f\'(x) = <strong>1/x</strong>. This pairs with the integral: ‚à´(1/x) dx = ln|x| + C.' },
    { topic: 'calc-derivatives', q: 'What is the derivative of f(x) = x¬≤ + 3x ‚àí 4?', a: 'Apply the power rule term by term:<br>f\'(x) = 2x + 3 ‚àí 0 = <strong>2x + 3</strong>.' },
    { topic: 'calc-derivatives', q: 'What is the derivative of f(x) = cos(x)?', a: 'f\'(x) = <strong>‚àísin(x)</strong>. Note the negative sign ‚Äî a common source of errors!' },
    { topic: 'calc-derivatives', q: 'What is the derivative of f(x) = tan(x)?', a: 'f\'(x) = <strong>sec<sup>2</sup>(x)</strong>. Derived by applying the quotient rule to sin(x)/cos(x).' },
    { topic: 'calc-derivatives', q: 'What is the derivative of f(x) = x¬∑sin(x)?', a: 'Product rule: f\'(x) = (1)¬∑sin(x) + x¬∑cos(x) = <strong>sin(x) + x¬∑cos(x)</strong>.' },
    { topic: 'calc-derivatives', q: 'What is the derivative of f(x) = 1/x?', a: 'Rewrite as x<sup>‚àí1</sup>, then apply the power rule:<br>f\'(x) = ‚àí1¬∑x<sup>‚àí2</sup> = <strong>‚àí1/x<sup>2</sup></strong>.' },
    { topic: 'calc-derivatives', q: 'What is the derivative of f(x) = x‚Å¥ ‚àí 2x¬≥ + 5x¬≤ ‚àí 3x + 1?', a: 'Apply the power rule term by term:<br>f\'(x) = <strong>4x<sup>3</sup> ‚àí 6x<sup>2</sup> + 10x ‚àí 3</strong>.' },

    // ==================== CALCULUS: INTEGRALS (10 cards) ====================
    { topic: 'calc-integrals', q: 'What is the integral of f(x) = x¬≤?', a: 'Reverse power rule: add 1 to the exponent, divide by the new exponent.<br>‚à´x<sup>2</sup> dx = x<sup>3</sup>/3 + C = <strong>x<sup>3</sup>/3 + C</strong>.' },
    { topic: 'calc-integrals', q: 'What is the value of ‚à´e<sup>x</sup> dx?', a: '<strong>e<sup>x</sup> + C</strong>. The exponential function is its own antiderivative, just as it is its own derivative.' },
    { topic: 'calc-integrals', q: 'What is the integral of f(x) = sin(x)?', a: '‚à´sin(x) dx = <strong>‚àícos(x) + C</strong>. Note the negative sign ‚Äî the derivative of ‚àícos(x) is sin(x).' },
    { topic: 'calc-integrals', q: 'What is the value of ‚à´(1/x) dx?', a: '<strong>ln|x| + C</strong>. The absolute value is important because ln is only defined for positive arguments, but 1/x exists for all x ‚â† 0.' },
    { topic: 'calc-integrals', q: 'What is the integral of f(x) = cos(x)?', a: '‚à´cos(x) dx = <strong>sin(x) + C</strong>. The derivative of sin(x) is cos(x), confirming this antiderivative.' },
    { topic: 'calc-integrals', q: 'What is the value of ‚à´x¬≥ dx?', a: 'Reverse power rule: ‚à´x<sup>3</sup> dx = x<sup>4</sup>/4 + C = <strong>x<sup>4</sup>/4 + C</strong>.' },
    { topic: 'calc-integrals', q: 'What is the integral of f(x) = 1/x¬≤?', a: 'Rewrite as x<sup>‚àí2</sup>: ‚à´x<sup>‚àí2</sup> dx = x<sup>‚àí1</sup>/(‚àí1) + C = <strong>‚àí1/x + C</strong>.' },
    { topic: 'calc-integrals', q: 'What is the value of ‚à´(2x + 3) dx?', a: 'Integrate term by term: 2¬∑(x<sup>2</sup>/2) + 3x + C = <strong>x<sup>2</sup> + 3x + C</strong>.' },
    { topic: 'calc-integrals', q: 'What is the integral of f(x) = tan(x)?', a: '‚à´tan(x) dx = <strong>‚àíln|cos(x)| + C</strong>, which is equivalently written as ln|sec(x)| + C.' },
    { topic: 'calc-integrals', q: 'What is the value of ‚à´‚àöx dx?', a: 'Rewrite as x<sup>1/2</sup>: ‚à´x<sup>1/2</sup> dx = x<sup>3/2</sup>/(3/2) + C = <strong>(2/3)x<sup>3/2</sup> + C</strong>.' },

    // ==================== CALCULUS: APPLICATIONS (8 cards) ====================
    { topic: 'calc-applications', q: 'What is the slope of the tangent line to y = x¬≤ at x = 2?', a: 'The slope of the tangent line is the derivative evaluated at the point.<br>dy/dx = 2x. At x = 2: slope = 2(2) = <strong>4</strong>.' },
    { topic: 'calc-applications', q: 'What are the critical points of f(x) = x¬≥ ‚àí 3x¬≤?', a: 'Set f\'(x) = 0: 3x<sup>2</sup> ‚àí 6x = 3x(x ‚àí 2) = 0.<br>Critical points: <strong>x = 0 and x = 2</strong>.' },
    { topic: 'calc-applications', q: 'What is the maximum value of f(x) = x‚Å¥ ‚àí 4x¬≥ + 4 on [0, 4]?', a: 'f\'(x) = 4x<sup>3</sup> ‚àí 12x<sup>2</sup> = 4x<sup>2</sup>(x ‚àí 3) = 0 ‚Üí x = 0, 3.<br>Evaluate: f(0) = 4, f(3) = 81 ‚àí 108 + 4 = ‚àí23, f(4) = 256 ‚àí 256 + 4 = 4.<br>Maximum = <strong>4</strong> (at endpoints x = 0 and x = 4).' },
    { topic: 'calc-applications', q: 'What is the minimum value of f(x) = x¬≤ ‚àí 4x + 4?', a: 'f(x) = (x ‚àí 2)<sup>2</sup>, a perfect square. This is always ‚â• 0.<br>Minimum at x = 2: f(2) = (2 ‚àí 2)<sup>2</sup> = <strong>0</strong>.' },
    { topic: 'calc-applications', q: 'What is the rate of change of f(x) = x¬≤ at x = 3?', a: 'The rate of change is the derivative: f\'(x) = 2x.<br>At x = 3: f\'(3) = 2(3) = <strong>6</strong>.' },
    { topic: 'calc-applications', q: 'What is the derivative of f(x) = x¬≤¬∑sin(x)?', a: 'Product rule: f\'(x) = 2x¬∑sin(x) + x<sup>2</sup>¬∑cos(x) = <strong>2x¬∑sin(x) + x<sup>2</sup>¬∑cos(x)</strong>.' },
    { topic: 'calc-applications', q: 'What is the slope of the tangent line to y = ln(x) at x = 1?', a: 'dy/dx = 1/x. At x = 1: slope = 1/1 = <strong>1</strong>.' },
    { topic: 'calc-applications', q: 'What are the critical points of f(x) = x¬≥ ‚àí 6x¬≤ + 11x ‚àí 6?', a: 'f\'(x) = 3x<sup>2</sup> ‚àí 12x + 11 = 0. Quadratic formula:<br>x = (12 ¬± ‚àö(144 ‚àí 132))/6 = (12 ¬± 2‚àö3)/6 = <strong>(6 ¬± ‚àö3)/3</strong>.' },

    // ==================== EXPANSION: A1 ‚Äî Domain & Range (3 cards) ====================
    { topicId: 'precalc_domain_range', q: 'What three things restrict a function\'s domain?', a: '1) Denominator = 0, 2) Even root of a negative, 3) Log of zero or negative.' },
    { topicId: 'precalc_domain_range', q: 'Write the domain of f(x) = ‚àö(4 ‚àí x) in interval notation.', a: '<strong>(‚àí‚àû, 4]</strong>.' },
    { topicId: 'precalc_domain_range', q: 'What is the domain of f(x) = 1/(x ‚àí 3)?', a: '<strong>(‚àí‚àû, 3) ‚à™ (3, ‚àû)</strong>.' },

    // ==================== EXPANSION: A2 ‚Äî Rates of Change (3 cards) ====================
    { topicId: 'precalc_rates_of_change', q: 'What is the average rate of change of f(x) = x¬≤ on [1, 5]?', a: '(25 ‚àí 1)/(5 ‚àí 1) = 24/4 = <strong>6</strong>.' },
    { topicId: 'precalc_rates_of_change', q: 'What is an inflection point?', a: 'A point where the function changes from <strong>concave up to concave down</strong>, or vice versa.' },
    { topicId: 'precalc_rates_of_change', q: 'How do you tell if a function is concave up from a table?', a: 'The <strong>rate of change between consecutive points is increasing</strong>.' },

    // ==================== EXPANSION: A3 ‚Äî Function Composition (3 cards) ====================
    { topicId: 'precalc_composition', q: 'If f(x) = x¬≤ and g(x) = x + 3, what is f(g(2))?', a: 'g(2) = 5, then f(5) = <strong>25</strong>.' },
    { topicId: 'precalc_composition', q: 'What is the domain of f(g(x)) if f(x) = ‚àöx and g(x) = x ‚àí 4?', a: 'Need g(x) ‚â• 0, so x ‚àí 4 ‚â• 0, meaning x ‚â• 4. Domain: <strong>[4, ‚àû)</strong>.' },
    { topicId: 'precalc_composition', q: 'What does "decomposition" of a function mean?', a: 'Writing a function as a composition of two simpler functions.<br>E.g., h(x) = ‚àö(x¬≤ + 5) can be decomposed as f(x) = ‚àöx, g(x) = x¬≤ + 5, so <strong>h = f ‚àò g</strong>.' },

    // ==================== EXPANSION: A4 ‚Äî Linear Functions (2 cards) ====================
    { topicId: 'precalc_linear_functions', q: 'A town had population 45,000 in 2003 and grows by 1,700/year. Write the equation.', a: '<strong>P(t) = 1700t + 45000</strong>, where t = years after 2003.' },
    { topicId: 'precalc_linear_functions', q: 'Find the equation of the line through (2, 4) and (4, 10).', a: 'm = (10‚àí4)/(4‚àí2) = 3. y ‚àí 4 = 3(x ‚àí 2) ‚Üí <strong>y = 3x ‚àí 2</strong>.' },

    // ==================== EXPANSION: A5 ‚Äî Polynomials Deep (3 cards) ====================
    { topicId: 'precalc_polynomials_deep', q: 'What determines the end behavior of a polynomial?', a: 'The <strong>degree</strong> (even/odd) and the <strong>sign of the leading coefficient</strong>.' },
    { topicId: 'precalc_polynomials_deep', q: 'What happens at a zero with multiplicity 2?', a: 'The graph <strong>touches (bounces off) the x-axis</strong> but doesn\'t cross it.' },
    { topicId: 'precalc_polynomials_deep', q: 'A degree-5 polynomial has at most how many turning points?', a: '<strong>4</strong>.' },

    // ==================== EXPANSION: A6 ‚Äî Quadratics Expanded (2 cards) ====================
    { topicId: 'precalc_quadratics_expanded', q: 'Find the vertex of f(x) = 2x¬≤ ‚àí 12x + 7.', a: 'h = 12/4 = 3, k = f(3) = 18 ‚àí 36 + 7 = ‚àí11. Vertex: <strong>(3, ‚àí11)</strong>.' },
    { topicId: 'precalc_quadratics_expanded', q: 'When does a quadratic have a maximum vs. minimum?', a: '<strong>Maximum when a < 0</strong> (opens down); <strong>minimum when a > 0</strong> (opens up).' },

    // ==================== EXPANSION: A7 ‚Äî Factor & Remainder Theorem (3 cards) ====================
    { topicId: 'precalc_factor_remainder', q: 'What does the Remainder Theorem state?', a: 'When polynomial p(x) is divided by (x ‚àí c), the remainder equals <strong>p(c)</strong>.' },
    { topicId: 'precalc_factor_remainder', q: 'What does the Factor Theorem tell us?', a: '<strong>(x ‚àí c) is a factor of p(x) ‚ü∫ p(c) = 0</strong>.' },
    { topicId: 'precalc_factor_remainder', q: 'Describe synthetic division in 3 steps.', a: '1) Write c and the coefficients. 2) Bring down first coeff. 3) <strong>Multiply by c, add to next coeff, repeat</strong>.' },

    // ==================== EXPANSION: A8 ‚Äî Real Zeros (2 cards) ====================
    { topicId: 'precalc_real_zeros', q: 'State the Rational Roots Theorem.', a: 'For polynomial a<sub>n</sub>x<sup>n</sup> + ‚Ä¶ + a<sub>0</sub> with integer coefficients, any rational zero p/q has <strong>p | a<sub>0</sub></strong> and <strong>q | a<sub>n</sub></strong>.' },
    { topicId: 'precalc_real_zeros', q: 'What are the possible rational zeros of 2x¬≥ + 3x¬≤ ‚àí 1?', a: '<strong>¬±{1, 1/2}</strong>.' },

    // ==================== EXPANSION: A9 ‚Äî Complex Zeros (3 cards) ====================
    { topicId: 'precalc_complex_zeros', q: 'What is the conjugate of 3 ‚àí 2i?', a: '<strong>3 + 2i</strong>.' },
    { topicId: 'precalc_complex_zeros', q: 'Simplify (2 + i)(3 ‚àí 4i).', a: '6 ‚àí 8i + 3i ‚àí 4i¬≤ = 6 ‚àí 5i + 4 = <strong>10 ‚àí 5i</strong>.' },
    { topicId: 'precalc_complex_zeros', q: 'Why do complex zeros come in conjugate pairs for real-coefficient polynomials?', a: 'Because the <strong>complex conjugate of each step in evaluation also equals zero</strong>.' },

    // ==================== EXPANSION: A10 ‚Äî Rational Functions Deep (3 cards) ====================
    { topicId: 'precalc_rational_functions_deep', q: 'When does a rational function have a hole instead of a vertical asymptote?', a: 'When a factor <strong>cancels from both numerator and denominator</strong> (both zero at the same x).' },
    { topicId: 'precalc_rational_functions_deep', q: 'What is an oblique asymptote?', a: 'A <strong>slant line</strong> that the function approaches as x ‚Üí ¬±‚àû. Occurs when degree of numerator = degree of denominator + 1.' },
    { topicId: 'precalc_rational_functions_deep', q: 'Find the oblique asymptote of f(x) = (x¬≤ + 2x + 1)/(x ‚àí 1).', a: 'Perform long division: quotient is x + 3. Oblique asymptote: <strong>y = x + 3</strong>.' },

    // ==================== EXPANSION: A11 ‚Äî Inverses & Radicals (2 cards) ====================
    { topicId: 'precalc_inverses_radicals', q: 'Why must we check for extraneous solutions when solving radical equations?', a: '<strong>Squaring both sides can introduce solutions</strong> that don\'t satisfy the original equation.' },
    { topicId: 'precalc_inverses_radicals', q: 'What is the inverse of f(x) = x¬≤ for x ‚â• 0?', a: '<strong>f‚Åª¬π(x) = ‚àöx</strong>.' },

    // ==================== EXPANSION: A12 ‚Äî Exponential Models (3 cards) ====================
    { topicId: 'precalc_exponential_models', q: 'What is the formula for continuous compound interest?', a: '<strong>A = Pe<sup>rt</sup></strong>, where P = principal, r = rate, t = time.' },
    { topicId: 'precalc_exponential_models', q: 'If a population doubles every 5 years with continuous growth, what is r?', a: 'r = ln(2)/5 ‚âà <strong>0.1386</strong>.' },
    { topicId: 'precalc_exponential_models', q: 'Solve 3À£ = 81.', a: '3À£ = 3‚Å¥, so <strong>x = 4</strong>.' },

    // ==================== EXPANSION: A13 ‚Äî Logarithmic Models (3 cards) ====================
    { topicId: 'precalc_logarithmic_models', q: 'Solve log‚ÇÇ(x) = 5.', a: 'x = 2‚Åµ = <strong>32</strong>.' },
    { topicId: 'precalc_logarithmic_models', q: 'Solve ln(x) + ln(x ‚àí 2) = ln(3).', a: 'ln(x(x‚àí2)) = ln(3) ‚Üí x¬≤ ‚àí 2x = 3 ‚Üí x¬≤ ‚àí 2x ‚àí 3 = 0 ‚Üí <strong>x = 3</strong> (reject x = ‚àí1).' },
    { topicId: 'precalc_logarithmic_models', q: 'What is the domain of f(x) = log(x ‚àí 5)?', a: 'x > 5, or <strong>(5, ‚àû)</strong>.' },

    // ==================== EXPANSION: B1 ‚Äî Angles & Measure (3 cards) ====================
    { topicId: 'trig_angles_measure', q: 'Convert 42¬∞7\'30" to decimal degrees.', a: '42 + 7/60 + 30/3600 = <strong>42.125¬∞</strong>.' },
    { topicId: 'trig_angles_measure', q: 'Find the arc length of a sector with radius 5 and central angle œÄ/3.', a: 's = 5 ¬∑ œÄ/3 = <strong>5œÄ/3 ‚âà 5.24</strong>.' },
    { topicId: 'trig_angles_measure', q: 'What are coterminal angles?', a: 'Angles that share the same terminal side; they differ by multiples of <strong>360¬∞ (or 2œÄ)</strong>.' },

    // ==================== EXPANSION: B2 ‚Äî Six Trig Functions (3 cards) ====================
    { topicId: 'trig_six_functions', q: 'State the three Pythagorean identities.', a: '<strong>sin¬≤Œ∏ + cos¬≤Œ∏ = 1</strong>; <strong>1 + tan¬≤Œ∏ = sec¬≤Œ∏</strong>; <strong>1 + cot¬≤Œ∏ = csc¬≤Œ∏</strong>.' },
    { topicId: 'trig_six_functions', q: 'If sin(Œ∏) = 3/5 and Œ∏ is in QI, find all six trig values.', a: 'cos = <strong>4/5</strong>, tan = <strong>3/4</strong>, csc = <strong>5/3</strong>, sec = <strong>5/4</strong>, cot = <strong>4/3</strong>.' },
    { topicId: 'trig_six_functions', q: 'State the cofunction identity for sin.', a: '<strong>sin(œÄ/2 ‚àí Œ∏) = cos(Œ∏)</strong>.' },

    // ==================== EXPANSION: B3 ‚Äî Trig Identities / Proofs (3 cards) ====================
    { topicId: 'trig_identities_proofs', q: 'State the sum formula for sin(A + B).', a: '<strong>sin(A + B) = sinA¬∑cosB + cosA¬∑sinB</strong>.' },
    { topicId: 'trig_identities_proofs', q: 'Find the exact value of cos(75¬∞) using sum formulas.', a: 'cos(45¬∞ + 30¬∞) = cos45¬∑cos30 ‚àí sin45¬∑sin30 = (‚àö2/2)(‚àö3/2) ‚àí (‚àö2/2)(1/2) = <strong>(‚àö6 ‚àí ‚àö2)/4</strong>.' },
    { topicId: 'trig_identities_proofs', q: 'State the half-angle formula for sin(Œ∏/2).', a: '<strong>sin(Œ∏/2) = ¬±‚àö[(1 ‚àí cosŒ∏)/2]</strong>, sign depends on quadrant of Œ∏/2.' },

    // ==================== EXPANSION: B4 ‚Äî Trig Graphs All (3 cards) ====================
    { topicId: 'trig_graphs_all_functions', q: 'What is the period of y = tan(x)?', a: '<strong>œÄ</strong>.' },
    { topicId: 'trig_graphs_all_functions', q: 'Where are the vertical asymptotes of y = csc(x)?', a: 'At <strong>x = nœÄ</strong> for integer n (wherever sin(x) = 0).' },
    { topicId: 'trig_graphs_all_functions', q: 'What is the period of y = 3tan(2x)?', a: '<strong>œÄ/2</strong>.' },

    // ==================== EXPANSION: B5 ‚Äî Inverse Trig Functions (3 cards) ====================
    { topicId: 'trig_inverse_functions', q: 'What is arcsin(1/2)?', a: '<strong>œÄ/6 (30¬∞)</strong>.' },
    { topicId: 'trig_inverse_functions', q: 'What is the range of arccos(x)?', a: '<strong>[0, œÄ]</strong>.' },
    { topicId: 'trig_inverse_functions', q: 'Evaluate cos(arctan(3/4)).', a: 'Draw right triangle with opposite 3, adjacent 4, hypotenuse 5. cos = <strong>4/5</strong>.' },

    // ==================== EXPANSION: B6 ‚Äî Trig Equations (3 cards) ====================
    { topicId: 'trig_equations', q: 'Find all solutions to sin(x) = ‚àö3/2 in [0, 2œÄ).', a: 'x = <strong>œÄ/3</strong> and x = <strong>2œÄ/3</strong>.' },
    { topicId: 'trig_equations', q: 'Find the general solution to cos(x) = ‚àí1/2.', a: 'x = <strong>2œÄ/3 + 2œÄk</strong> or x = <strong>4œÄ/3 + 2œÄk</strong>, where k is any integer.' },
    { topicId: 'trig_equations', q: 'Solve 2sin¬≤(x) ‚àí sin(x) ‚àí 1 = 0.', a: 'Factor: (2sinx + 1)(sinx ‚àí 1) = 0 ‚Üí <strong>sinx = ‚àí1/2</strong> or <strong>sinx = 1</strong>.' },

    // ==================== EXPANSION: B7 ‚Äî Law of Sines (3 cards) ====================
    { topicId: 'trig_law_of_sines', q: 'State the Law of Sines.', a: '<strong>a/sinA = b/sinB = c/sinC</strong>.' },
    { topicId: 'trig_law_of_sines', q: 'When is the Law of Sines ambiguous?', a: 'In the <strong>SSA case</strong> ‚Äî you might get 0, 1, or 2 valid triangles.' },
    { topicId: 'trig_law_of_sines', q: 'Find side b if A = 30¬∞, B = 45¬∞, a = 10.', a: 'b = 10¬∑sin(45¬∞)/sin(30¬∞) = 10¬∑(‚àö2/2)/(1/2) = <strong>10‚àö2 ‚âà 14.14</strong>.' },

    // ==================== EXPANSION: B8 ‚Äî Law of Cosines (3 cards) ====================
    { topicId: 'trig_law_of_cosines', q: 'State the Law of Cosines.', a: '<strong>c¬≤ = a¬≤ + b¬≤ ‚àí 2ab¬∑cos(C)</strong>.' },
    { topicId: 'trig_law_of_cosines', q: 'If a = 5, b = 7, C = 60¬∞, find c.', a: 'c¬≤ = 25 + 49 ‚àí 2(5)(7)cos(60¬∞) = 74 ‚àí 35 = 39. <strong>c = ‚àö39 ‚âà 6.24</strong>.' },
    { topicId: 'trig_law_of_cosines', q: 'When does the Law of Cosines reduce to the Pythagorean theorem?', a: 'When <strong>C = 90¬∞</strong> (cos 90¬∞ = 0), so c¬≤ = a¬≤ + b¬≤.' },

    // ==================== EXPANSION: B9 ‚Äî Polar Coordinates (3 cards) ====================
    { topicId: 'trig_polar_coordinates', q: 'Convert (3, œÄ/4) from polar to Cartesian.', a: 'x = 3cos(œÄ/4) = <strong>3‚àö2/2</strong>, y = 3sin(œÄ/4) = <strong>3‚àö2/2</strong>.' },
    { topicId: 'trig_polar_coordinates', q: 'Convert (1, 1) from Cartesian to polar.', a: 'r = ‚àö2, Œ∏ = arctan(1) = œÄ/4. Polar: <strong>(‚àö2, œÄ/4)</strong>.' },
    { topicId: 'trig_polar_coordinates', q: 'How many petals does r = 3cos(4Œ∏) have?', a: '<strong>8</strong> (2n = 2¬∑4 = 8, since n is even).' },

    // ==================== EXPANSION: B10 ‚Äî Vectors (3 cards) ====================
    { topicId: 'trig_vectors', q: 'Find the magnitude of v = ‚ü®3, 4‚ü©.', a: '||v|| = ‚àö(9 + 16) = <strong>5</strong>.' },
    { topicId: 'trig_vectors', q: 'Find the dot product of ‚ü®2, ‚àí1‚ü© and ‚ü®3, 4‚ü©.', a: '2(3) + (‚àí1)(4) = 6 ‚àí 4 = <strong>2</strong>.' },
    { topicId: 'trig_vectors', q: 'When are two vectors perpendicular?', a: 'When their <strong>dot product equals zero</strong>.' },

    // ==================== EXPANSION: B11 ‚Äî Parametric Equations (3 cards) ====================
    { topicId: 'trig_parametric_equations', q: 'Eliminate the parameter from x = t¬≤, y = 2t + 1.', a: 'From y: t = (y‚àí1)/2. Substituting: x = ((y‚àí1)/2)¬≤ = (y‚àí1)¬≤/4. So <strong>4x = (y‚àí1)¬≤</strong>.' },
    { topicId: 'trig_parametric_equations', q: 'Parametrize the line segment from (1, 3) to (4, 7).', a: '<strong>x = 1 + 3t, y = 3 + 4t</strong>, for 0 ‚â§ t ‚â§ 1.' },
    { topicId: 'trig_parametric_equations', q: 'What do parametric equations add that y = f(x) doesn\'t?', a: '<strong>Direction/orientation</strong> and the ability to represent curves that aren\'t functions.' },

    // ==================== EXPANSION: B12 ‚Äî Polar Complex Numbers (3 cards) ====================
    { topicId: 'trig_polar_complex', q: 'Write z = 1 + i in polar form.', a: 'r = ‚àö2, Œ∏ = œÄ/4. <strong>z = ‚àö2 ¬∑ cis(œÄ/4)</strong>.' },
    { topicId: 'trig_polar_complex', q: 'State De Moivre\'s Theorem.', a: '<strong>[r¬∑cis(Œ∏)]<sup>n</sup> = r<sup>n</sup> ¬∑ cis(nŒ∏)</strong>.' },
    { topicId: 'trig_polar_complex', q: 'Multiply 2¬∑cis(œÄ/3) and 3¬∑cis(œÄ/6).', a: '6¬∑cis(œÄ/3 + œÄ/6) = <strong>6¬∑cis(œÄ/2) = 6i</strong>.' },

    // ==================== EXPANSION: B13 ‚Äî Harmonic Motion (3 cards) ====================
    { topicId: 'trig_harmonic_motion', q: 'A Ferris wheel has diameter 128 ft and completes 2 revolutions in 127 seconds. What is the angular frequency?', a: 'œâ = 2¬∑(2œÄ)/127 = <strong>4œÄ/127 rad/s</strong>.' },
    { topicId: 'trig_harmonic_motion', q: 'How do you find amplitude from a graph?', a: '<strong>Amplitude = (max ‚àí min)/2</strong>.' },
    { topicId: 'trig_harmonic_motion', q: 'What is the midline of a sinusoid with max 80 and min 20?', a: 'Midline = (80 + 20)/2 = <strong>50</strong>.' },

    // ==================== EXPANSION: B14 ‚Äî Polar Conics (2 cards) ====================
    { topicId: 'trig_polar_conics', q: 'What determines if a polar conic is an ellipse, parabola, or hyperbola?', a: 'The eccentricity e: <strong>e < 1 ‚Üí ellipse</strong>, <strong>e = 1 ‚Üí parabola</strong>, <strong>e > 1 ‚Üí hyperbola</strong>.' },
    { topicId: 'trig_polar_conics', q: 'What is the rotation angle formula for eliminating an xy-term?', a: '<strong>cot(2Œ±) = (A ‚àí C)/B</strong>.' }

        ];

        const flashcards = FLASHCARDS;

        let currentCardIndex = 0;
        let isFlipped = false;
        let cardDeck = [...flashcards];
        let currentFlashcardTopicId = '';

        // Legacy topic groupings for the filter dropdown
        const LEGACY_PRECALC_TOPICS = ['functions','exponentials','trigonometry','unit-circle','sinusoidal','polynomials','algebra-skills','lines','absolute-piecewise','inverses','transformations','inequalities','sequences','limits','common-mistakes','calculator'];
        const LEGACY_CALCULUS_TOPICS = ['calc-limits','calc-derivatives','calc-integrals','calc-applications'];

        function getFilteredFlashcards() {
            if (!currentFlashcardTopicId) return [...flashcards];
            if (currentFlashcardTopicId === '_legacy_precalc') {
                return flashcards.filter(c => c.topic && LEGACY_PRECALC_TOPICS.includes(c.topic));
            }
            if (currentFlashcardTopicId === '_legacy_calculus') {
                return flashcards.filter(c => c.topic && LEGACY_CALCULUS_TOPICS.includes(c.topic));
            }
            return flashcards.filter(c => c.topicId === currentFlashcardTopicId);
        }

        function filterFlashcards(topicId) {
            currentFlashcardTopicId = topicId;
            cardDeck = getFilteredFlashcards();
            currentCardIndex = 0;
            isFlipped = false;
            if (cardDeck.length > 0) {
                updateFlashcard();
            } else {
                document.getElementById('questionText').innerHTML = 'No cards match this filter.';
                document.getElementById('answerText').innerHTML = '';
                document.getElementById('cardIndex').textContent = '0';
                document.getElementById('cardTotal').textContent = '0';
            }
        }

        // ===== QUIZ DATA =====
        const quizQuestions = [
            { q: "If f(x) = x¬≤ ‚àí 3x + 2, what is f(2)?", opts: ["0", "2", "4", "6"], ans: 0 },
            { q: "Solve: 2^x = 16", opts: ["2", "3", "4", "8"], ans: 2 },
            { q: "Which is equivalent to ln(e^5)?", opts: ["1", "e", "5", "e^5"], ans: 2 },
            { q: "Expand: log(x¬≤y/z)", opts: ["2log(x) + log(y) ‚àí log(z)", "log(x) + log(y) ‚àí log(z)", "2log(x) ‚àí log(y) ‚àí log(z)", "log(2x) + log(y) ‚àí log(z)"], ans: 0 },
            { q: "What is cos(œÄ/3)?", opts: ["0", "1/2", "‚àö3/2", "1"], ans: 1 },
            { q: "Factor: x¬≤ ‚àí 9", opts: ["(x‚àí3)¬≤", "(x+3)¬≤", "(x‚àí3)(x+3)", "(x‚àí3)(x‚àí3)"], ans: 2 },
            { q: "Solve: sin(x) = 1/2 for x ‚àà [0, 2œÄ)", opts: ["œÄ/6, 5œÄ/6", "œÄ/3, 2œÄ/3", "œÄ/4, 3œÄ/4", "œÄ/6, œÄ/3"], ans: 0 },
            { q: "Find the amplitude of y = 3sin(2x) ‚àí 5", opts: ["2", "3", "5", "‚àí5"], ans: 1 },
            { q: "Simplify: sin¬≤(x) + cos¬≤(x)", opts: ["0", "1", "sin(2x)", "tan(x)"], ans: 1 },
            { q: "What is ln(1)?", opts: ["0", "1", "undefined", "e"], ans: 0 },
            { q: "Solve: |x ‚àí 3| = 5", opts: ["3", "8, ‚àí2", "5, ‚àí5", "‚àí2, 8"], ans: 3 },
            { q: "Find the period of y = cos(œÄx)", opts: ["œÄ", "2œÄ", "2", "1/2"], ans: 2 },
            { q: "Which are perpendicular lines?", opts: ["m=2, m=2", "m=2, m=‚àí1/2", "m=2, m=1/2", "m=2, m=1"], ans: 1 },
            { q: "For f(x) = 1/(x‚àí2), what is the vertical asymptote?", opts: ["x=0", "x=1", "x=2", "x=‚àí2"], ans: 2 },
            { q: "Solve: x¬≤ ‚àí 5x + 6 = 0", opts: ["1, 6", "2, 3", "‚àí2, ‚àí3", "2, ‚àí3"], ans: 1 },
        ];

        // Calculus quiz question pool (35 questions) ‚Äî stored for later integration into randomized quiz
        const calculusQuizPool = [
            // Limits (7 questions)
            { q: "What is the limit of f(x) = 3x¬≤ ‚àí 2x + 1 as x approaches 2?", opts: ["9", "5", "11", "7"], ans: 0 },
            { q: "Evaluate: lim(x‚Üí0) sin(x)/x", opts: ["0", "1", "‚àû", "undefined"], ans: 1 },
            { q: "What is the limit of (x¬≤ ‚àí 4)/(x ‚àí 2) as x approaches 2?", opts: ["0", "2", "4", "undefined"], ans: 2 },
            { q: "Evaluate: lim(x‚Üí‚àû) (2x¬≤ + 3x)/(x¬≤ + 1)", opts: ["0", "1", "2", "3"], ans: 2 },
            { q: "What is the limit of 1/x as x approaches infinity?", opts: ["0", "1", "‚àû", "undefined"], ans: 0 },
            { q: "Evaluate: lim(x‚Üí3) (x¬≤ ‚àí 9)/(x ‚àí 3)", opts: ["0", "3", "6", "9"], ans: 2 },
            { q: "What is the limit of e^x as x approaches negative infinity?", opts: ["0", "1", "‚àí‚àû", "‚àû"], ans: 0 },
            // Derivatives (10 questions)
            { q: "What is the derivative of f(x) = x¬≥?", opts: ["x¬≤", "3x", "3x¬≤", "x¬≥"], ans: 2 },
            { q: "Find the derivative of f(x) = sin(x).", opts: ["cos(x)", "‚àícos(x)", "‚àísin(x)", "tan(x)"], ans: 0 },
            { q: "What is the derivative of f(x) = e^x?", opts: ["xe^(x‚àí1)", "e^x", "e^(x‚àí1)", "ln(x)"], ans: 1 },
            { q: "Find the derivative of f(x) = ln(x).", opts: ["x", "1/x", "ln(x)/x", "e^x"], ans: 1 },
            { q: "What is the derivative of f(x) = x¬≤ + 3x ‚àí 4?", opts: ["2x + 3", "x¬≤ + 3", "2x ‚àí 4", "2x + 3x"], ans: 0 },
            { q: "Find the derivative of f(x) = cos(x).", opts: ["sin(x)", "‚àísin(x)", "‚àícos(x)", "tan(x)"], ans: 1 },
            { q: "What is the derivative of f(x) = tan(x)?", opts: ["sec(x)", "cot(x)", "sec¬≤(x)", "‚àícsc¬≤(x)"], ans: 2 },
            { q: "Find the derivative of f(x) = x¬∑sin(x).", opts: ["cos(x)", "x¬∑cos(x)", "sin(x) + cos(x)", "sin(x) + x¬∑cos(x)"], ans: 3 },
            { q: "What is the derivative of f(x) = 1/x?", opts: ["1/x¬≤", "‚àí1/x¬≤", "ln(x)", "‚àíln(x)"], ans: 1 },
            { q: "Find the derivative of f(x) = x‚Å¥ ‚àí 2x¬≥ + 5x¬≤ ‚àí 3x + 1.", opts: ["4x¬≥ ‚àí 6x¬≤ + 10x ‚àí 3", "4x¬≥ ‚àí 2x¬≤ + 5x ‚àí 3", "x¬≥ ‚àí 6x¬≤ + 10x ‚àí 3", "4x‚Å¥ ‚àí 6x¬≥ + 10x¬≤ ‚àí 3x"], ans: 0 },
            // Integrals (10 questions)
            { q: "What is the integral of f(x) = x¬≤?", opts: ["x¬≥/3 + C", "2x + C", "x¬≥ + C", "x¬≤/2 + C"], ans: 0 },
            { q: "Evaluate: ‚à´ e^x dx", opts: ["e^x + C", "xe^x + C", "e^(x+1)/(x+1) + C", "ln(x) + C"], ans: 0 },
            { q: "What is the integral of f(x) = sin(x)?", opts: ["cos(x) + C", "‚àícos(x) + C", "‚àísin(x) + C", "sin¬≤(x)/2 + C"], ans: 1 },
            { q: "Evaluate: ‚à´ (1/x) dx", opts: ["x + C", "ln(x) + C", "ln|x| + C", "‚àí1/x¬≤ + C"], ans: 2 },
            { q: "What is the integral of f(x) = cos(x)?", opts: ["sin(x) + C", "‚àísin(x) + C", "cos¬≤(x) + C", "tan(x) + C"], ans: 0 },
            { q: "Evaluate: ‚à´ x¬≥ dx", opts: ["3x¬≤ + C", "x‚Å¥ + C", "x‚Å¥/4 + C", "x¬≥/3 + C"], ans: 2 },
            { q: "What is the integral of f(x) = 1/x¬≤?", opts: ["‚àí1/x + C", "1/x + C", "ln(x¬≤) + C", "‚àí2/x¬≥ + C"], ans: 0 },
            { q: "Evaluate: ‚à´ (2x + 3) dx", opts: ["x¬≤ + 3x + C", "2x¬≤ + 3x + C", "x¬≤ + 3 + C", "2 + C"], ans: 0 },
            { q: "What is the integral of f(x) = tan(x)?", opts: ["sec¬≤(x) + C", "‚àíln|cos(x)| + C", "ln|sin(x)| + C", "‚àícot(x) + C"], ans: 1 },
            { q: "Evaluate: ‚à´ ‚àöx dx", opts: ["(2/3)x^(3/2) + C", "(1/2)x^(1/2) + C", "2‚àöx + C", "(3/2)x^(1/2) + C"], ans: 0 },
            // Applications (8 questions)
            { q: "What is the slope of the tangent line to y = x¬≤ at x = 2?", opts: ["2", "4", "8", "1"], ans: 1 },
            { q: "Find the critical points of f(x) = x¬≥ ‚àí 3x¬≤.", opts: ["x = 0 only", "x = 3 only", "x = 0 and x = 2", "x = 1 and x = 3"], ans: 2 },
            { q: "What is the maximum value of f(x) = x‚Å¥ ‚àí 4x¬≥ + 4 on [0, 4]?", opts: ["4", "‚àí23", "0", "260"], ans: 0 },
            { q: "Find the minimum value of f(x) = x¬≤ ‚àí 4x + 4.", opts: ["0", "2", "4", "‚àí4"], ans: 0 },
            { q: "What is the rate of change of f(x) = x¬≤ at x = 3?", opts: ["3", "6", "9", "12"], ans: 1 },
            { q: "Find the derivative of f(x) = x¬≤¬∑sin(x).", opts: ["2x¬∑sin(x)", "x¬≤¬∑cos(x)", "2x¬∑sin(x) + x¬≤¬∑cos(x)", "2x¬∑cos(x) ‚àí x¬≤¬∑sin(x)"], ans: 2 },
            { q: "What is the slope of the tangent line to y = ln(x) at x = 1?", opts: ["0", "1", "e", "undefined"], ans: 1 },
            { q: "Find the critical points of f(x) = x¬≥ ‚àí 6x¬≤ + 11x ‚àí 6.", opts: ["x = 1, 2, 3", "x = (6 ¬± ‚àö3)/3", "x = 2 only", "x = 3 ¬± ‚àö2"], ans: 1 },
        ];

        // Expansion quiz pool (39 questions) ‚Äî from expansion plan topics A1-A13, B1-B14
        const expansionQuizPool = [
            // A1. Domain & Range (2)
            { topicId: 'precalc_domain_range', q: "What is the domain of f(x) = ‚àö(x ‚àí 2)?", opts: ["[2, ‚àû)", "(2, ‚àû)", "(‚àí‚àû, 2]", "All reals"], ans: 0 },
            { topicId: 'precalc_domain_range', q: "What is the range of f(x) = x¬≤?", opts: ["All reals", "[0, ‚àû)", "(0, ‚àû)", "(‚àí‚àû, 0]"], ans: 1 },
            // A2. Rates of Change (2)
            { topicId: 'precalc_rates_of_change', q: "If f(x) = x¬≤ ‚àí 4x, what is the average rate of change on [1, 3]?", opts: ["0", "‚àí2", "2", "4"], ans: 0 },
            { topicId: 'precalc_rates_of_change', q: "A function that is concave down has what shape?", opts: ["Frown (‚à©)", "Smile (‚à™)", "Straight line", "Vertical"], ans: 0 },
            // A3. Composition (2)
            { topicId: 'precalc_composition', q: "If f(x) = 2x + 1 and g(x) = x¬≤, what is (f ‚àò g)(3)?", opts: ["49", "19", "7", "13"], ans: 1 },
            { topicId: 'precalc_composition', q: "f(g(x)) is the same as g(f(x)). True or false?", opts: ["True", "False"], ans: 1 },
            // A4. Linear Functions (1)
            { topicId: 'precalc_linear_functions', q: "What is the slope of a line passing through (‚àí1, 4) and (5, 2)?", opts: ["‚àí1/3", "1/3", "‚àí3", "3"], ans: 0 },
            // A5. Polynomials Deep (2)
            { topicId: 'precalc_polynomials_deep', q: "What is the end behavior of f(x) = ‚àí2x‚Åµ + 3x¬≤ ‚àí 1?", opts: ["Both ends up", "Both ends down", "Left up, right down", "Left down, right up"], ans: 2 },
            { topicId: 'precalc_polynomials_deep', q: "At a zero of multiplicity 3, the graph:", opts: ["Bounces", "Crosses linearly", "Crosses with flattening", "Has a vertical asymptote"], ans: 2 },
            // A6. Quadratics Expanded (1)
            { topicId: 'precalc_quadratics_expanded', q: "What is the vertex of f(x) = ‚àíx¬≤ + 6x ‚àí 5?", opts: ["(3, 4)", "(‚àí3, ‚àí4)", "(3, ‚àí4)", "(‚àí3, 4)"], ans: 0 },
            // A7. Factor & Remainder (2)
            { topicId: 'precalc_factor_remainder', q: "If p(x) = x¬≥ ‚àí 4x¬≤ + 5x ‚àí 14, what is the remainder when divided by (x ‚àí 2)?", opts: ["0", "‚àí12", "‚àí16", "2"], ans: 1 },
            { topicId: 'precalc_factor_remainder', q: "If p(3) = 0 for polynomial p(x), which is true?", opts: ["(x + 3) is a factor", "(x ‚àí 3) is a factor", "x = ‚àí3 is a zero", "None of these"], ans: 1 },
            // A8. Real Zeros (1)
            { topicId: 'precalc_real_zeros', q: "What are the possible rational zeros of f(x) = 3x¬≥ ‚àí x¬≤ + 2?", opts: ["¬±{1, 2, 1/3, 2/3}", "¬±{1, 3}", "¬±{1, 2}", "¬±{2, 3}"], ans: 0 },
            // A9. Complex Zeros (2)
            { topicId: 'precalc_complex_zeros', q: "What are the zeros of f(x) = x¬≤ + 4?", opts: ["¬±2", "¬±2i", "¬±4i", "No zeros"], ans: 1 },
            { topicId: 'precalc_complex_zeros', q: "How many complex zeros does a degree-5 polynomial have?", opts: ["At most 5", "Exactly 5", "At least 1", "Both B and C"], ans: 3 },
            // A10. Rational Functions Deep (1)
            { topicId: 'precalc_rational_functions_deep', q: "f(x) = (x ‚àí 2)/((x ‚àí 2)(x + 3)) has:", opts: ["VA at x = 2 and x = ‚àí3", "Hole at x = 2, VA at x = ‚àí3", "VA at x = ‚àí3 only", "Both B and C"], ans: 1 },
            // A11. Inverses & Radicals (1)
            { topicId: 'precalc_inverses_radicals', q: "Solve ‚àö(x + 3) = 5.", opts: ["x = 22", "x = 28", "x = 8", "x = 2"], ans: 0 },
            // A12. Exponential Models (1)
            { topicId: 'precalc_exponential_models', q: "An investment of $1000 at 5% compounded continuously is worth how much after 10 years?", opts: ["$1,628.89", "$1,500", "$1,648.72", "$1,050"], ans: 2 },
            // A13. Logarithmic Models (1)
            { topicId: 'precalc_logarithmic_models', q: "Solve: log‚ÇÉ(x + 1) = 2", opts: ["x = 8", "x = 7", "x = 9", "x = 5"], ans: 0 },
            // B1. Angles & Measure (2)
            { topicId: 'trig_angles_measure', q: "What is the arc length of a circle with radius 10 and central angle 2 radians?", opts: ["20", "5", "10", "40"], ans: 0 },
            { topicId: 'trig_angles_measure', q: "Which angle is coterminal with 450¬∞?", opts: ["90¬∞", "180¬∞", "270¬∞", "360¬∞"], ans: 0 },
            // B2. Six Trig Functions (2)
            { topicId: 'trig_six_functions', q: "If tan(Œ∏) = 3 and Œ∏ is in QIII, what is sin(Œ∏)?", opts: ["3/‚àö10", "‚àí3/‚àö10", "‚àí1/‚àö10", "1/‚àö10"], ans: 1 },
            { topicId: 'trig_six_functions', q: "sec(Œ∏) is the reciprocal of:", opts: ["sin(Œ∏)", "cos(Œ∏)", "tan(Œ∏)", "cot(Œ∏)"], ans: 1 },
            // B3. Trig Identities Proofs (2)
            { topicId: 'trig_identities_proofs', q: "What is sin(2Œ∏) equal to?", opts: ["2sinŒ∏", "sin¬≤Œ∏", "2sinŒ∏¬∑cosŒ∏", "cos¬≤Œ∏ ‚àí sin¬≤Œ∏"], ans: 2 },
            { topicId: 'trig_identities_proofs', q: "cos(A ‚àí B) =", opts: ["cosA¬∑cosB + sinA¬∑sinB", "cosA¬∑cosB ‚àí sinA¬∑sinB", "sinA¬∑cosB ‚àí cosA¬∑sinB", "sinA¬∑cosB + cosA¬∑sinB"], ans: 0 },
            // B4. Trig Graphs (1)
            { topicId: 'trig_graphs_all_functions', q: "The period of y = sec(3x) is:", opts: ["2œÄ", "2œÄ/3", "œÄ/3", "3œÄ"], ans: 1 },
            // B5. Inverse Trig (2)
            { topicId: 'trig_inverse_functions', q: "arctan(1) = ?", opts: ["œÄ/6", "œÄ/4", "œÄ/3", "œÄ/2"], ans: 1 },
            { topicId: 'trig_inverse_functions', q: "The domain of arcsin(x) is:", opts: ["All reals", "[‚àí1, 1]", "[0, 1]", "(‚àíœÄ/2, œÄ/2)"], ans: 1 },
            // B6. Trig Equations (2)
            { topicId: 'trig_equations', q: "How many solutions does sin(x) = 1/2 have in [0, 2œÄ)?", opts: ["1", "2", "3", "Infinite"], ans: 1 },
            { topicId: 'trig_equations', q: "The general solution to tan(x) = 1 is:", opts: ["x = œÄ/4 + 2œÄk", "x = œÄ/4 + œÄk", "x = œÄ/4 only", "x = 3œÄ/4 + œÄk"], ans: 1 },
            // B7. Law of Sines (1)
            { topicId: 'trig_law_of_sines', q: "The Law of Sines is useful when you know:", opts: ["SSS", "SAS", "AAS", "All of these"], ans: 2 },
            // B8. Law of Cosines (1)
            { topicId: 'trig_law_of_cosines', q: "Given a = 8, b = 6, c = 10, find angle C.", opts: ["90¬∞", "60¬∞", "120¬∞", "45¬∞"], ans: 0 },
            // B9. Polar Coordinates (1)
            { topicId: 'trig_polar_coordinates', q: "The Cartesian coordinates of the polar point (4, œÄ/3) are:", opts: ["(2, 2‚àö3)", "(2‚àö3, 2)", "(4, 4)", "(2, 2)"], ans: 0 },
            // B10. Vectors (2)
            { topicId: 'trig_vectors', q: "What is the dot product of ‚ü®1, 2‚ü© and ‚ü®‚àí2, 1‚ü©?", opts: ["0", "4", "‚àí4", "2"], ans: 0 },
            { topicId: 'trig_vectors', q: "The work done by a force F = 10 lbs at 30¬∞ over 50 ft is:", opts: ["250‚àö3", "500", "250", "125‚àö3"], ans: 0 },
            // B11. Parametric Equations (1)
            { topicId: 'trig_parametric_equations', q: "The parametric equations x = 3cos(t), y = 3sin(t) trace out:", opts: ["A line", "A parabola", "A circle of radius 3", "An ellipse"], ans: 2 },
            // B12. Polar Complex (1)
            { topicId: 'trig_polar_complex', q: "The modulus of z = 3 + 4i is:", opts: ["5", "7", "‚àö7", "25"], ans: 0 },
            // B13. Harmonic Motion (1)
            { topicId: 'trig_harmonic_motion', q: "The period of S(t) = 5sin(œÄt/3) is:", opts: ["6", "3", "œÄ/3", "2œÄ/3"], ans: 0 },
            // B14. Polar Conics (1)
            { topicId: 'trig_polar_conics', q: "A conic with eccentricity e = 0.5 is:", opts: ["Circle", "Ellipse", "Parabola", "Hyperbola"], ans: 1 },
        ];

        // Combined pool of all quiz questions (89 total: 15 legacy + 35 calculus + 39 expansion)
        const allQuizQuestions = [...quizQuestions, ...calculusQuizPool, ...expansionQuizPool];

        let quizState = {
            current: 0,
            answers: [],
            submitted: false,
            activeQuiz: [],
        };
        let currentQuizTopicId = '';

        function getFilteredQuizPool() {
            if (!currentQuizTopicId) return [...allQuizQuestions];
            if (currentQuizTopicId === '_legacy_precalc') return [...quizQuestions];
            if (currentQuizTopicId === '_legacy_calculus') return [...calculusQuizPool];
            return allQuizQuestions.filter(q => q.topicId === currentQuizTopicId);
        }

        function setQuizTopic(topicId) {
            currentQuizTopicId = topicId;
            initQuiz();
        }

        // ===== TAB SWITCHING =====
        function switchTab(tab) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById(tab).classList.add('active');
            event.target.classList.add('active');

            if (tab === 'quiz' && (!quizState.activeQuiz || quizState.activeQuiz.length === 0)) {
                initQuiz();
            }
        }

        // ===== FLASHCARD FUNCTIONS =====
        function toggleFlashcard() {
            isFlipped = !isFlipped;
            const question = document.getElementById('questionText');
            const answer = document.getElementById('answerText');
            const card = document.getElementById('currentFlashcard');

            if (isFlipped) {
                question.style.display = 'none';
                answer.style.display = 'block';
                card.classList.add('flipped');
            } else {
                question.style.display = 'block';
                answer.style.display = 'none';
                card.classList.remove('flipped');
            }
        }

        function nextCard() {
            isFlipped = false;
            currentCardIndex = (currentCardIndex + 1) % cardDeck.length;
            updateFlashcard();
        }

        function previousCard() {
            isFlipped = false;
            currentCardIndex = (currentCardIndex - 1 + cardDeck.length) % cardDeck.length;
            updateFlashcard();
        }

        function shuffleCards() {
            cardDeck = getFilteredFlashcards().sort(() => Math.random() - 0.5);
            currentCardIndex = 0;
            isFlipped = false;
            updateFlashcard();
        }

        function updateFlashcard() {
            const card = cardDeck[currentCardIndex];
            document.getElementById('questionText').innerHTML = card.q;
            document.getElementById('answerText').innerHTML = card.a;
            document.getElementById('cardIndex').textContent = currentCardIndex + 1;
            document.getElementById('cardTotal').textContent = cardDeck.length;
            
            const cardEl = document.getElementById('currentFlashcard');
            cardEl.classList.remove('flipped');
            document.getElementById('questionText').style.display = 'block';
            document.getElementById('answerText').style.display = 'none';
        }

        // ===== QUIZ FUNCTIONS =====
        function initQuiz() {
            var pool = getFilteredQuizPool();
            var shuffled = pool.sort(function() { return Math.random() - 0.5; });
            var count = Math.min(10, shuffled.length);
            var selected = shuffled.slice(0, count);
            quizState = {
                current: 0,
                answers: new Array(count).fill(null),
                submitted: false,
                activeQuiz: selected,
            };
            if (selected.length > 0) {
                renderQuestionCard();
            } else {
                document.getElementById('quizContent').innerHTML = '<p style="color: var(--color-text-secondary); text-align: center; padding: var(--space-24);">No quiz questions available for this topic.</p>';
            }
        }

        function renderQuestionCard() {
            const container = document.getElementById('quizContent');
            const q = quizState.activeQuiz[quizState.current];
            const progress = ((quizState.current + 1) / quizState.activeQuiz.length) * 100;

            let html = `
                <div class="quiz-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                    <div class="progress-text">Question ${quizState.current + 1} of ${quizState.activeQuiz.length}</div>
                </div>

                <div class="question-card">
                    <div class="question-number">Question ${quizState.current + 1}</div>
                    <div class="question-text">${q.q}</div>
                    <div class="options">
            `;

            q.opts.forEach((opt, idx) => {
                const selected = quizState.answers[quizState.current] === idx;
                const isCorrect = idx === q.ans;
                let className = 'option';
                
                if (quizState.submitted) {
                    if (isCorrect) className += ' correct';
                    else if (selected && !isCorrect) className += ' incorrect';
                } else if (selected) {
                    className += ' selected';
                }

                html += `<div class="${className}" onclick="selectAnswer(${idx})">${opt}</div>`;
            });

            html += `</div><div class="controls" style="display: flex; justify-content: space-between; align-items: center;">`;

            if (quizState.current > 0) {
                html += `<button class="btn btn-secondary" onclick="prevQuestion()">‚Üê Previous</button>`;
            }

            if (!quizState.submitted) {
                html += `<button class="btn btn-primary" onclick="nextQuestion()">Next ‚Üí</button>`;
            } else {
                html += `<button class="btn btn-primary" onclick="nextQuestion()">${quizState.current < quizState.activeQuiz.length - 1 ? 'Next ‚Üí' : 'See Results'}</button>`;
            }

            html += `<button class="btn btn-secondary btn-small" onclick="endQuizEarly()" style="margin-left: auto;">End Quiz</button>`;

            html += `</div></div>`;
            container.innerHTML = html;
        }

        function selectAnswer(idx) {
            if (!quizState.submitted) {
                quizState.answers[quizState.current] = idx;
                renderQuestionCard();
            }
        }

        function nextQuestion() {
            if (quizState.submitted) {
                if (quizState.current < quizState.activeQuiz.length - 1) {
                    quizState.current++;
                    quizState.submitted = false;
                    renderQuestionCard();
                } else {
                    showResults();
                }
            } else {
                if (quizState.answers[quizState.current] === null) {
                    alert('Please select an answer before proceeding!');
                    return;
                }
                quizState.submitted = true;
                renderQuestionCard();
            }
        }

        function prevQuestion() {
            if (quizState.current > 0) {
                quizState.current--;
                quizState.submitted = false;
                renderQuestionCard();
            }
        }

        function endQuizEarly() {
            if (confirm('End quiz and save your results? Unanswered questions will not be scored.')) {
                showResults();
            }
        }

        function showResults() {
            var answered = quizState.answers.filter(function(a) { return a !== null; }).length;
            var correct = quizState.answers.filter(function(ans, idx) {
                return ans !== null && ans === quizState.activeQuiz[idx].ans;
            }).length;
            var total = answered;
            var percent = total > 0 ? Math.round((correct / total) * 100) : 0;
            var isPartial = answered < quizState.activeQuiz.length;

            saveQuizResult(correct, total, percent);

            var statusLabel = isPartial
                ? 'Quiz Ended ‚Äî ' + answered + ' of ' + quizState.activeQuiz.length + ' answered'
                : 'Quiz Complete!';
            var incorrectCount = total - correct;

            const container = document.getElementById('quizContent');
            container.innerHTML = `
                <div class="results-container">
                    <div class="results-score">${percent}%</div>
                    <div class="results-label">${statusLabel}</div>
                    <div class="results-detail">
                        <div class="results-stat">
                            <div class="results-stat-value">${correct}</div>
                            <div class="results-stat-label">Correct Answers</div>
                        </div>
                        <div class="results-stat">
                            <div class="results-stat-value">${incorrectCount}</div>
                            <div class="results-stat-label">Incorrect Answers</div>
                        </div>
                    </div>
                    <p style="color: var(--color-text-secondary); font-size: 1rem; margin: var(--space-24) 0;">
                        ${percent >= 80 ? 'üéâ Excellent work! You\'re ready for Calculus!' : percent >= 60 ? 'üëç Good job! Review weak areas.' : 'üìö Keep studying! Focus on fundamentals.'}
                    </p>
                    <button class="btn btn-primary" onclick="switchToQuiz()">Retake Quiz</button>
                </div>

                <div class="quiz-history-section">
                    <h3 style="color: var(--color-text); margin-bottom: var(--space-16);">Past Results</h3>
                    ${renderQuizHistory()}
                    <div class="quiz-history-actions">
                        <button class="btn btn-secondary btn-small" onclick="exportQuizResults()">Export to CSV</button>
                        <button class="btn btn-secondary btn-small" onclick="clearQuizHistory()">Clear History</button>
                    </div>
                </div>
            `;
        }

        function switchToQuiz() {
            initQuiz();
        }

        // ===== QUIZ RESULTS PERSISTENCE =====

        function saveQuizResult(correct, total, percent) {
            const history = getQuizHistory();
            history.push({
                date: new Date().toISOString(),
                correct: correct,
                total: total,
                percent: percent
            });
            localStorage.setItem('precalcQuizResults', JSON.stringify(history));
        }

        function getQuizHistory() {
            try {
                const data = localStorage.getItem('precalcQuizResults');
                return data ? JSON.parse(data) : [];
            } catch (e) {
                return [];
            }
        }

        function renderQuizHistory() {
            const history = getQuizHistory();
            if (history.length === 0) return '<p style="color: var(--color-text-secondary); font-size: 0.9rem;">No previous attempts yet.</p>';

            let rows = '';
            history.slice().reverse().forEach((r, i) => {
                const d = new Date(r.date);
                const dateStr = d.toLocaleDateString() + ' ' + d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const badge = r.percent >= 80 ? 'quiz-history-pass' : r.percent >= 60 ? 'quiz-history-ok' : 'quiz-history-fail';
                rows += `<tr>
                    <td>${history.length - i}</td>
                    <td>${dateStr}</td>
                    <td>${r.correct} / ${r.total}</td>
                    <td><span class="${badge}">${r.percent}%</span></td>
                </tr>`;
            });

            return `
                <div class="table-responsive">
                    <table class="quiz-history-table">
                        <tr><th>#</th><th>Date</th><th>Score</th><th>Percent</th></tr>
                        ${rows}
                    </table>
                </div>`;
        }

        function exportQuizResults() {
            const history = getQuizHistory();
            if (history.length === 0) {
                alert('No quiz results to export.');
                return;
            }

            let csv = 'Attempt,Date,Correct,Total,Percent\n';
            history.forEach((r, i) => {
                const d = new Date(r.date);
                const dateStr = d.toLocaleDateString() + ' ' + d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                csv += `${i + 1},"${dateStr}",${r.correct},${r.total},${r.percent}%\n`;
            });

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'precalc-quiz-results.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function clearQuizHistory() {
            if (confirm('Clear all quiz history? This cannot be undone.')) {
                localStorage.removeItem('precalcQuizResults');
                var historySection = document.querySelector('.quiz-history-section');
                if (historySection) {
                    historySection.innerHTML = `
                        <h3 style="color: var(--color-text); margin-bottom: var(--space-16);">Past Results</h3>
                        ${renderQuizHistory()}
                        <div class="quiz-history-actions">
                            <button class="btn btn-secondary btn-small" onclick="exportQuizResults()">Export to CSV</button>
                            <button class="btn btn-secondary btn-small" onclick="clearQuizHistory()">Clear History</button>
                        </div>
                    `;
                }
            }
        }

        // ===== SIDEBAR =====

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
            document.getElementById('sidebarOverlay').classList.toggle('open');
        }

        function toggleSidebarSection(el) {
            el.classList.toggle('open');
            var group = el.nextElementSibling;
            if (group && group.classList.contains('sidebar-group')) {
                group.classList.toggle('open');
            }
        }

        // ===== COLLAPSIBLE CARDS & FOCUS MODE =====

        document.querySelector('.review-grid').addEventListener('click', function(e) {
            const card = e.target.closest('.concept-card');
            if (!card) return;
            const grid = document.querySelector('.review-grid');

            if (grid.classList.contains('focus-mode')) {
                // Already in focus mode, ignore clicks
                return;
            }

            // Enter focus mode
            grid.classList.add('focus-mode');
            card.classList.add('expanded', 'focused');
            document.getElementById('cardBackBtn').classList.add('visible');
            card.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });

        function exitFocusMode() {
            const grid = document.querySelector('.review-grid');
            grid.classList.remove('focus-mode');
            grid.querySelectorAll('.concept-card').forEach(function(c) {
                c.classList.remove('expanded', 'focused');
            });
            document.getElementById('cardBackBtn').classList.remove('visible');
        }

        // Sidebar link navigation: handle tab links and card links
        document.querySelectorAll('.sidebar-link').forEach(function(link) {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                var href = this.getAttribute('href');

                // Close sidebar
                document.getElementById('sidebar').classList.remove('open');
                document.getElementById('sidebarOverlay').classList.remove('open');

                // Tab links (e.g. #tab-review, #tab-flashcards)
                if (href.startsWith('#tab-')) {
                    var tabName = href.substring(5); // remove '#tab-'
                    document.querySelectorAll('.content-section').forEach(function(s) { s.classList.remove('active'); });
                    document.querySelectorAll('.tab-btn').forEach(function(b) { b.classList.remove('active'); });
                    document.getElementById(tabName).classList.add('active');
                    // Find matching tab button
                    document.querySelectorAll('.tab-btn').forEach(function(btn) {
                        if (btn.textContent.toLowerCase().indexOf(tabName.replace('-', ' ').replace('unit circle', 'unit')) > -1 ||
                            btn.getAttribute('onclick').indexOf("'" + tabName + "'") > -1) {
                            btn.classList.add('active');
                        }
                    });
                    if (tabName === 'quiz') {
                        if (quizState.current === 0 && quizState.answers.length === 0) {
                            initQuiz();
                        }
                    }
                    return;
                }

                // Card links (e.g. #topic-functions-notation)
                var targetId = href.substring(1);
                var targetCard = document.getElementById(targetId);
                if (!targetCard) return;

                // Switch to review tab if not already active
                var reviewSection = document.getElementById('review');
                if (!reviewSection.classList.contains('active')) {
                    document.querySelectorAll('.content-section').forEach(function(s) { s.classList.remove('active'); });
                    document.querySelectorAll('.tab-btn').forEach(function(b) { b.classList.remove('active'); });
                    reviewSection.classList.add('active');
                    document.querySelector('.tab-btn').classList.add('active');
                }

                // Exit any existing focus mode first
                exitFocusMode();

                // Enter focus mode on target card
                var grid = document.querySelector('.review-grid');
                grid.classList.add('focus-mode');
                targetCard.classList.add('expanded', 'focused');
                document.getElementById('cardBackBtn').classList.add('visible');

                // Scroll to card
                setTimeout(function() {
                    targetCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 300);
            });
        });
    </script>

<!--
==========================================================
IMPLEMENTATION LOG ‚Äî Expansion Plan
==========================================================
TOPIC ID MAPPING:
  A1  ‚Üí precalc_domain_range          A2  ‚Üí precalc_rates_of_change
  A3  ‚Üí precalc_composition           A4  ‚Üí precalc_linear_functions
  A5  ‚Üí precalc_polynomials_deep      A6  ‚Üí precalc_quadratics_expanded
  A7  ‚Üí precalc_factor_remainder      A8  ‚Üí precalc_real_zeros
  A9  ‚Üí precalc_complex_zeros         A10 ‚Üí precalc_rational_functions_deep
  A11 ‚Üí precalc_inverses_radicals     A12 ‚Üí precalc_exponential_models
  A13 ‚Üí precalc_logarithmic_models
  B1  ‚Üí trig_angles_measure           B2  ‚Üí trig_six_functions
  B3  ‚Üí trig_identities_proofs        B4  ‚Üí trig_graphs_all_functions
  B5  ‚Üí trig_inverse_functions        B6  ‚Üí trig_equations
  B7  ‚Üí trig_law_of_sines             B8  ‚Üí trig_law_of_cosines
  B9  ‚Üí trig_polar_coordinates        B10 ‚Üí trig_vectors
  B11 ‚Üí trig_parametric_equations     B12 ‚Üí trig_polar_complex
  B13 ‚Üí trig_harmonic_motion          B14 ‚Üí trig_polar_conics

LOG:
  2026-02-16: Part 1 ‚Äî Added TOPICS registry (27 entries) with id, label, tier, section.
  2026-02-16: Part 2 ‚Äî Added 27 concept-card sections in Review tab (A1-A13 Precalc, B1-B14 Trig).
              Added two new CSS card classes: card-precalc-exp (amber/gold), card-trig-exp (rose/pink).
              Added sidebar navigation groups: "Precalculus (Expanded)" and "Trigonometry (Expanded)".
              Cards ordered by priority tier within each section group.
              Yu-Gi-Oh! crossover sections included where available (in <details> elements).
              Parts 3-7 (flashcards, quiz, filtering, sync, etc.) NOT YET implemented.
  2026-02-16: Part 3 ‚Äî Added 76 new expansion flashcards (A1-A13: 35 cards, B1-B14: 41 cards).
              Each new card uses { topicId, q, a } schema; legacy cards keep { topic, q, a }.
              Added topic-filter <select> dropdown to Flashcards tab with optgroups.
              Added getFilteredFlashcards(), filterFlashcards() functions + legacy topic arrays.
              Updated shuffleCards() to respect active filter via getFilteredFlashcards().
              Total flashcards: ~121 (45 legacy + 76 expansion).
  2026-02-16: Part 4 ‚Äî Added 39 new expansion quiz questions (A1-A13: 19 Qs, B1-B14: 20 Qs).
              Each new quiz Q uses { topicId, q, opts, ans } schema; legacy Qs keep { q, opts, ans }.
              Added quiz topic-filter <select> dropdown to Quiz tab with optgroups.
              Added getFilteredQuizPool(), setQuizTopic() functions + currentQuizTopicId state.
              Updated initQuiz() to draw from filtered pool; caps at min(10, pool.length).
              Total quiz questions: 89 (15 legacy precalc + 35 calculus + 39 expansion).
  2026-02-16: Part 5 ‚Äî Applied priority tier badges to all 27 expansion cards.
              Tier 1 (‚≠ê Essential): A1,A3,A5,A6,A7 + B2,B3,B5,B6 ‚Äî 9 topics.
              Tier 2 (üìó Important): A2,A4,A8,A9,A10,A12,A13 + B1,B4,B7,B8 ‚Äî 11 topics.
              Tier 3 (üî¨ Advanced): A11 + B9,B10,B11,B12,B13,B14 ‚Äî 7 topics.
              Updated all 27 IMPLEMENTATION STATUS comments ‚Üí review=done, flashcards=done, quiz=done.
              Added .tier-badge CSS classes (tier-1 gold, tier-2 blue, tier-3 purple).
              Cards already ordered by tier within each section group (confirmed).
              Parts 6-7 (navigation sync, maintenance logging) NOT YET implemented.
==========================================================
-->

</body>
</html>
